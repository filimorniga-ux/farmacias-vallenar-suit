(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";var t=e.i(71645);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:n="",children:o,iconNode:c,...d},u)=>(0,t.createElement)("svg",{ref:u,...a,width:r,height:r,stroke:e,strokeWidth:i?24*Number(l)/Number(r):l,className:s("lucide",n),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),i=(e,a)=>{let i=(0,t.forwardRef)(({className:i,...n},o)=>(0,t.createElement)(l,{ref:o,iconNode:a,className:s(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...n}));return i.displayName=r(e),i};e.s(["default",()=>i],75254)},42760,e=>{"use strict";let t,r,s,a;var l,i=e.i(71645);let n=e=>{let t,r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,l={setState:s,getState:a,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e))},i=t=e(s,a,l);return l},o=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>o(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>o(t)(e)}}},c=(s=(l=(t=e=>({user:null,isAuthenticated:!1,login:t=>e({user:t,isAuthenticated:!0}),logout:()=>e({user:null,isAuthenticated:!1})}),r={name:"auth-storage"},(e,s,a)=>{let l,i={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let s=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=r.getItem(e))?t:null;return a instanceof Promise?a.then(s):s(a)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...r},n=!1,c=new Set,d=new Set,u=i.storage;if(!u)return t((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),e(...t)},s,a);let m=()=>{let e=i.partialize({...s()});return u.setItem(i.name,{state:e,version:i.version})},h=a.setState;a.setState=(e,t)=>(h(e,t),m());let p=t((...t)=>(e(...t),m()),s,a);a.getInitialState=()=>p;let x=()=>{var t,r;if(!u)return;n=!1,c.forEach(e=>{var t;return e(null!=(t=s())?t:p)});let a=(null==(r=i.onRehydrateStorage)?void 0:r.call(i,null!=(t=s())?t:p))||void 0;return o(u.getItem.bind(u))(i.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];else{if(i.migrate){let t=i.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(t=>{var r;let[a,n]=t;if(e(l=i.merge(n,null!=(r=s())?r:p),!0),a)return m()}).then(()=>{null==a||a(l,void 0),l=s(),n=!0,d.forEach(e=>e(l))}).catch(e=>{null==a||a(void 0,e)})};return a.persist={setOptions:e=>{i={...i,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>n,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},i.skipHydration||x(),l||p}))?n(l):n,Object.assign(a=e=>(function(e,t=e=>e){let r=i.default.useSyncExternalStore(e.subscribe,i.default.useCallback(()=>t(e.getState()),[e,t]),i.default.useCallback(()=>t(e.getInitialState()),[e,t]));return i.default.useDebugValue(r),r})(s,e),s),a);e.s(["useAuthStore",0,c],42760)},18566,(e,t,r)=>{t.exports=e.r(76562)},84901,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(42760);function l({children:e,allowedRoles:l}){let i=(0,s.useRouter)(),{isAuthenticated:n,user:o}=(0,a.useAuthStore)(),[c,d]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{n?l&&o&&!l.includes(o.role)?i.push("/"):d(!0):i.push("/login")},[n,o,i,l]),c)?(0,t.jsx)(t.Fragment,{children:e}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}e.s(["default",()=>l])},70756,e=>{"use strict";let t=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},72325,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let s=(0,e.i(75254).default)("snowflake",[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]]);var a=e.i(70756),l=e.i(55436);function i({initialData:e}){let[i,n]=(0,r.useState)(""),o=(0,r.useMemo)(()=>{if(!i)return e;let t=i.toLowerCase();return e.filter(e=>e.nombre.toLowerCase().includes(t)||e.numero_lote.toLowerCase().includes(t))},[e,i]);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)(l.Search,{className:"h-5 w-5 text-gray-400"})}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar por Nombre o Lote...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-purple-500 focus:border-purple-500 sm:text-sm",value:i,onChange:e=>n(e.target.value)})]}),(0,t.jsx)("div",{className:"overflow-x-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Producto"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Lote"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Ubicación"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Stock"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Vencimiento"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Condición"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:o.map(e=>{let r,l,i;return(0,t.jsxs)("tr",{className:(r=new Date,l=Math.ceil((new Date(e.fecha_vencimiento).getTime()-r.getTime())/864e5),i=e.cantidad_disponible<10,l<=0||i?"bg-red-50 hover:bg-red-100 border-l-4 border-red-500":l<90?"bg-yellow-50 hover:bg-yellow-100 border-l-4 border-yellow-500":"hover:bg-gray-50 border-l-4 border-transparent"),children:[(0,t.jsxs)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.nombre}),e.requiere_frio&&(0,t.jsx)("span",{className:"ml-2 text-blue-500",title:"Cadena de Frío",children:(0,t.jsx)(s,{className:"h-4 w-4"})}),("RECETA_RETENIDA"===e.condicion_venta||"RECETA_CHEQUE"===e.condicion_venta)&&(0,t.jsx)("span",{className:"ml-2 text-amber-600",title:"Controlado",children:(0,t.jsx)(a.Lock,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"text-gray-500",children:e.dci})]}),(0,t.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.numero_lote}),(0,t.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.ubicacion_fisica||"-"}),(0,t.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm font-medium",children:(0,t.jsx)("span",{className:e.cantidad_disponible<10?"text-red-600":"text-gray-900",children:e.cantidad_disponible})}),(0,t.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:new Date(e.fecha_vencimiento).toLocaleDateString("es-CL")}),(0,t.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:(0,t.jsx)("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${"DISPONIBLE"===e.estado?"bg-green-100 text-green-800":"CUARENTENA"===e.estado?"bg-yellow-100 text-yellow-800":"VENCIDO"===e.estado?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:e.estado})})]},`${e.producto_id}-${e.lote_id}`)})})]})})]})}e.s(["default",()=>i],72325)},2883,e=>{"use strict";var t=e.i(43476),r=e.i(42760),s=e.i(7233);function a(){let{user:e}=(0,r.useAuthStore)();return e&&"VENDEDOR"!==e.role?(0,t.jsxs)("button",{type:"button",className:"inline-flex items-center rounded-md bg-purple-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-purple-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600",children:[(0,t.jsx)(s.Plus,{className:"-ml-0.5 mr-1.5 h-5 w-5","aria-hidden":"true"}),"Ingresar Compra"]}):null}e.s(["default",()=>a])}]);