module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},30056,a=>a.a(async(b,c)=>{try{let b=await a.y("pg");a.n(b),c()}catch(a){c(a)}},!0),61469,a=>a.a(async(b,c)=>{try{var d=a.i(30056),e=b([d]);[d]=e.then?(await e)():e;let g=new d.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}});async function f(a,b){let c=Date.now(),d=await g.query(a,b),e=Date.now()-c;return console.log("Executed query",{text:a,duration:e,rows:d.rowCount}),d}a.s(["query",()=>f]),c()}catch(a){c(a)}},!1),73921,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/auth/RouteGuard.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/auth/RouteGuard.tsx <module evaluation>","default");a.s(["default",0,b])},21524,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/auth/RouteGuard.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/auth/RouteGuard.tsx","default");a.s(["default",0,b])},78240,a=>{"use strict";a.i(73921);var b=a.i(21524);a.n(b)},41333,a=>a.a(async(b,c)=>{try{var d=a.i(61469),e=b([d]);async function f(){let a=new Date,b=new Date(a.getFullYear(),a.getMonth(),1).toISOString(),c=new Date(a.getTime()-6048e5).toISOString(),e=`
    SELECT 
      COALESCE(SUM(total), 0) as total_sales,
      COUNT(*) as ticket_count
    FROM ventas
    WHERE fecha >= $1
  `,f=await (0,d.query)(e,[b]),g=parseInt(f.rows[0].total_sales),h=parseInt(f.rows[0].ticket_count),i=Math.round(g/1.19),j=h>0?Math.round(g/h):0,k=`
    SELECT 
      DATE(fecha) as sale_date,
      SUM(total) as daily_total
    FROM ventas
    WHERE fecha >= $1
    GROUP BY DATE(fecha)
    ORDER BY DATE(fecha) ASC
  `,l=(await (0,d.query)(k,[c])).rows.map(a=>({date:new Date(a.sale_date).toLocaleDateString("es-CL",{weekday:"short",day:"numeric"}),total:parseInt(a.daily_total)})),m=`
    SELECT id, fecha, total, metodo_pago, tipo_boleta
    FROM ventas
    ORDER BY fecha DESC
    LIMIT 10
  `,n=(await (0,d.query)(m)).rows.map(a=>({...a,fecha:new Date(a.fecha).toLocaleString("es-CL")}));return{monthlyStats:{totalSales:g,ticketCount:h,averageTicket:j,netSales:i,ivaDebit:g-i},dailySales:l,recentTransactions:n}}[d]=e.then?(await e)():e,a.s(["getFinanceData",()=>f]),c()}catch(a){c(a)}},!1),70670,a=>{"use strict";var b=a.i(7997),c=a.i(717);let d=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},e=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var f={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let g=(0,c.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:d=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,c.createElement)("svg",{ref:l,...f,width:b,height:b,stroke:a,strokeWidth:g?24*Number(d)/Number(b):d,className:e("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,b])=>(0,c.createElement)(a,b)),...Array.isArray(i)?i:[i]])),h=(a,b)=>{let f=(0,c.forwardRef)(({className:f,...h},i)=>(0,c.createElement)(g,{ref:i,iconNode:b,className:e(`lucide-${d(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,f),...h}));return f.displayName=d(a),f},i=h("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),j=h("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),k=h("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),l=h("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);function m({stats:a}){let c=a=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(a);return(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)("div",{className:"overflow-hidden rounded-lg bg-white shadow",children:(0,b.jsx)("div",{className:"p-5",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(i,{className:"h-6 w-6 text-gray-400","aria-hidden":"true"})}),(0,b.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,b.jsxs)("dl",{children:[(0,b.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Ventas Totales (Mes)"}),(0,b.jsx)("dd",{children:(0,b.jsx)("div",{className:"text-lg font-medium text-gray-900",children:c(a.totalSales)})})]})})]})})}),(0,b.jsx)("div",{className:"overflow-hidden rounded-lg bg-white shadow",children:(0,b.jsx)("div",{className:"p-5",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(j,{className:"h-6 w-6 text-gray-400","aria-hidden":"true"})}),(0,b.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,b.jsxs)("dl",{children:[(0,b.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Tickets Emitidos"}),(0,b.jsx)("dd",{children:(0,b.jsx)("div",{className:"text-lg font-medium text-gray-900",children:a.ticketCount})})]})})]})})}),(0,b.jsx)("div",{className:"overflow-hidden rounded-lg bg-white shadow",children:(0,b.jsx)("div",{className:"p-5",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(l,{className:"h-6 w-6 text-gray-400","aria-hidden":"true"})}),(0,b.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,b.jsxs)("dl",{children:[(0,b.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Ticket Promedio"}),(0,b.jsx)("dd",{children:(0,b.jsx)("div",{className:"text-lg font-medium text-gray-900",children:c(a.averageTicket)})})]})})]})})}),(0,b.jsx)("div",{className:"overflow-hidden rounded-lg bg-purple-50 border border-purple-200 shadow",children:(0,b.jsx)("div",{className:"p-5",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(k,{className:"h-6 w-6 text-purple-600","aria-hidden":"true"})}),(0,b.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,b.jsxs)("dl",{children:[(0,b.jsx)("dt",{className:"truncate text-sm font-medium text-purple-800",children:"EstimaciÃ³n Impuesto (F29)"}),(0,b.jsx)("dd",{children:(0,b.jsx)("div",{className:"text-lg font-bold text-purple-900",children:c(a.ivaDebit)})})]})})]})})})]})}a.s(["default",()=>m],70670)},91892,a=>{"use strict";var b=a.i(7997);function c({data:a}){let c=Math.max(...a.map(a=>a.total),1);return(0,b.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Ventas Ãšltimos 7 DÃ­as"}),(0,b.jsxs)("div",{className:"relative h-64 flex items-end justify-between space-x-2",children:[a.map((a,d)=>{let e,f=Math.round(a.total/c*100);return(0,b.jsxs)("div",{className:"flex flex-col items-center flex-1 group",children:[(0,b.jsx)("div",{className:"w-full bg-purple-200 rounded-t-md hover:bg-purple-300 transition-all relative",style:{height:`${f}%`},children:(0,b.jsx)("div",{className:"opacity-0 group-hover:opacity-100 absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 pointer-events-none z-10 whitespace-nowrap",children:(e=a.total,new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",maximumFractionDigits:0}).format(e))})}),(0,b.jsx)("div",{className:"mt-2 text-xs text-gray-500 rotate-0 truncate w-full text-center",children:a.date})]},d)}),0===a.length&&(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No hay datos suficientes"})]})]})}a.s(["default",()=>c])},27278,a=>{"use strict";var b=a.i(7997);function c({transactions:a}){return(0,b.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,b.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Ãšltimos Movimientos"})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID Boleta"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pago"}),(0,b.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),(0,b.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[a.map(a=>{let c;return(0,b.jsxs)("tr",{children:[(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",a.id]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.fecha}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-semibold",children:(c=a.total,new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(c))}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.metodo_pago}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Aceptado"})})]},a.id)}),0===a.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No hay movimientos recientes."})})]})]})})]})}a.s(["default",()=>c])},65842,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/finanzas/ExportButton.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/finanzas/ExportButton.tsx <module evaluation>","default");a.s(["default",0,b])},95872,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/finanzas/ExportButton.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/finanzas/ExportButton.tsx","default");a.s(["default",0,b])},4042,a=>{"use strict";a.i(65842);var b=a.i(95872);a.n(b)},95249,a=>a.a(async(b,c)=>{try{var d=a.i(7997),e=a.i(41333),f=a.i(70670),g=a.i(91892),h=a.i(27278),i=a.i(4042),j=a.i(78240),k=b([e]);async function l(){let a=await (0,e.getFinanceData)();return(0,d.jsx)(j.default,{allowedRoles:["ADMIN"],children:(0,d.jsx)("div",{className:"min-h-screen bg-gray-100 py-8",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,d.jsxs)("div",{className:"md:flex md:items-center md:justify-between mb-8",children:[(0,d.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight",children:"ðŸ“Š Gerencia & BI"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Dashboard financiero y control de gestiÃ³n."})]}),(0,d.jsx)("div",{className:"mt-4 flex md:ml-4 md:mt-0",children:(0,d.jsx)(i.default,{})})]}),(0,d.jsxs)("div",{className:"space-y-8",children:[(0,d.jsx)(f.default,{stats:a.monthlyStats}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,d.jsx)("div",{className:"lg:col-span-2",children:(0,d.jsx)(g.default,{data:a.dailySales})}),(0,d.jsx)("div",{className:"lg:col-span-1",children:(0,d.jsx)(h.default,{transactions:a.recentTransactions})})]})]})]})})})}[e]=k.then?(await k)():k,a.s(["default",()=>l,"dynamic",0,"force-dynamic"]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__3ca7dcd6._.js.map