module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},48182,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(42263);function f({children:a,allowedRoles:f}){let g=(0,d.useRouter)(),{isAuthenticated:h,user:i}=(0,e.useAuthStore)(),[j,k]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{h?f&&i&&!f.includes(i.role)?g.push("/"):k(!0):g.push("/login")},[h,i,g,f]),j)?(0,b.jsx)(b.Fragment,{children:a}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}a.s(["default",()=>f])},38784,a=>{"use strict";let b=(0,a.i(70106).default)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);a.s(["ShoppingCart",()=>b],38784)},97990,a=>{"use strict";var b=a.i(87924);let c=(0,a.i(70106).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var d=a.i(38784);function e({suggestions:a}){return 0===a.length?(0,b.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[(0,b.jsx)("div",{className:"mx-auto h-12 w-12 text-green-500",children:(0,b.jsx)(d.ShoppingCart,{className:"h-full w-full"})}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"Sin sugerencias"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"El inventario está saludable. No se requieren compras urgentes."})]}):(0,b.jsxs)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:[(0,b.jsxs)("div",{className:"bg-red-50 px-4 py-3 border-b border-red-200 flex items-center gap-2",children:[(0,b.jsx)(c,{className:"h-5 w-5 text-red-600"}),(0,b.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Sugerencia de Compra Urgente"})]}),(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Producto"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Stock Actual"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Mínimo"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Sugerido"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Proveedor"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:a.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",children:a.nombre}),(0,b.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-red-600 font-bold",children:a.stock_actual}),(0,b.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:a.stock_minimo}),(0,b.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-blue-600 font-bold bg-blue-50",children:a.sugerencia_pedido}),(0,b.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:a.proveedor_sugerido})]},a.producto_id))})]})]})}a.s(["default",()=>e],97990)},33670,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(70106);let f=(0,e.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),g=(0,e.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function h({suppliers:a,products:e}){let h=(0,d.useRouter)(),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)({proveedor_id:"",producto_id:"",cantidad:"",numero_lote:"",fecha_vencimiento:""}),o=async a=>{a.preventDefault(),j(!0);try{if(!(await fetch("/api/supply/receive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,producto_id:Number(m.producto_id),cantidad:Number(m.cantidad)})})).ok)throw Error("Error al recibir producto");l(!0),n({proveedor_id:"",producto_id:"",cantidad:"",numero_lote:"",fecha_vencimiento:""}),h.refresh(),setTimeout(()=>l(!1),3e3)}catch(a){console.error(a),alert("Error al guardar la recepción")}finally{j(!1)}};return(0,b.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,b.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,b.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:"Ingreso de Mercadería (Factura)"}),(0,b.jsx)("div",{className:"mt-2 max-w-xl text-sm text-gray-500",children:(0,b.jsx)("p",{children:"Registre la recepción de productos para actualizar el stock."})}),(0,b.jsxs)("form",{className:"mt-5 space-y-4",onSubmit:o,children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"proveedor",className:"block text-sm font-medium text-gray-700",children:"Proveedor"}),(0,b.jsxs)("select",{id:"proveedor",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm p-2 border",value:m.proveedor_id,onChange:a=>n({...m,proveedor_id:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Seleccione..."}),a.map(a=>(0,b.jsx)("option",{value:a.id,children:a.nombre_fantasia},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"producto",className:"block text-sm font-medium text-gray-700",children:"Producto"}),(0,b.jsxs)("select",{id:"producto",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm p-2 border",value:m.producto_id,onChange:a=>n({...m,producto_id:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Seleccione..."}),e.map(a=>(0,b.jsx)("option",{value:a.id,children:a.nombre},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"cantidad",className:"block text-sm font-medium text-gray-700",children:"Cantidad"}),(0,b.jsx)("input",{type:"number",id:"cantidad",required:!0,min:"1",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm p-2 border",value:m.cantidad,onChange:a=>n({...m,cantidad:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"lote",className:"block text-sm font-medium text-gray-700",children:"Nuevo Lote"}),(0,b.jsx)("input",{type:"text",id:"lote",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm p-2 border",value:m.numero_lote,onChange:a=>n({...m,numero_lote:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"vencimiento",className:"block text-sm font-medium text-gray-700",children:"Vencimiento"}),(0,b.jsx)("input",{type:"date",id:"vencimiento",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm p-2 border",value:m.fecha_vencimiento,onChange:a=>n({...m,fecha_vencimiento:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"pt-4",children:[(0,b.jsx)("button",{type:"submit",disabled:i,className:"inline-flex justify-center rounded-md bg-purple-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-purple-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600 disabled:opacity-50",children:i?(0,b.jsx)(g,{className:"animate-spin h-5 w-5"}):"Registrar Recepción"}),k&&(0,b.jsxs)("span",{className:"ml-3 inline-flex items-center text-green-600 text-sm font-medium",children:[(0,b.jsx)(f,{className:"h-5 w-5 mr-1"})," Guardado"]})]})]})]})})}a.s(["default",()=>h],33670)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__61455991._.js.map