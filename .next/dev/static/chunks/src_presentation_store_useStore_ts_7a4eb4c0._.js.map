{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/store/useStore.ts"],"sourcesContent":["\nimport { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport { InventoryBatch, EmployeeProfile, SaleItem, Customer, QueueTicket, Supplier, PurchaseOrder, CartItem, SaleTransaction, Expense, CashShift, CashMovement, CashMovementReason, AttendanceLog, AttendanceStatus, StockTransfer, WarehouseIncident, SupplierDocument, SiiConfiguration, SiiCaf, DteDocument, DteTipo } from '../../domain/types';\nimport { fetchInventory, fetchEmployees } from '../../actions/sync';\n\n// --- DATOS REALES FARMACIAS VALLENAR ---\nconst MOCK_INVENTORY: InventoryBatch[] = [\n    // --- TOP VENTAS & CRÓNICOS ---\n    { id: 'P001', sku: '780001', name: 'PARACETAMOL 500MG', dci: 'PARACETAMOL', laboratory: 'Lab Chile', condition: 'VD', is_bioequivalent: true, location_id: 'SUCURSAL_CENTRO', aisle: 'GÓNDOLA', stock_actual: 2000, stock_min: 200, stock_max: 3000, expiry_date: new Date('2026-12-01').getTime(), price: 990, cost_price: 400, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Paracetamol'] },\n    { id: 'P002', sku: '780002', name: 'LOSARTÁN 50MG', dci: 'LOSARTÁN POTÁSICO', laboratory: 'Lab Chile', condition: 'R', is_bioequivalent: true, location_id: 'SUCURSAL_CENTRO', aisle: 'ESTANTE A1', stock_actual: 500, stock_min: 100, stock_max: 800, expiry_date: new Date('2025-06-01').getTime(), price: 2990, cost_price: 1000, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Losartán Potásico'] },\n    { id: 'P003', sku: '780003', name: 'IBUPROFENO 600MG', dci: 'IBUPROFENO', laboratory: 'Lab Chile', condition: 'VD', is_bioequivalent: true, location_id: 'SUCURSAL_CENTRO', aisle: 'ESTANTE A2', stock_actual: 800, stock_min: 100, stock_max: 1200, expiry_date: new Date('2026-01-01').getTime(), price: 1990, cost_price: 600, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Ibuprofeno'] },\n    { id: 'P004', sku: '780004', name: 'EUTIROX 100MCG', dci: 'LEVOTIROXINA', laboratory: 'Merck', condition: 'R', is_bioequivalent: false, location_id: 'SUCURSAL_CENTRO', aisle: 'ESTANTE B1', stock_actual: 150, stock_min: 30, stock_max: 300, expiry_date: new Date('2025-10-01').getTime(), price: 8500, cost_price: 3500, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Levotiroxina'] },\n\n    // --- CONTROLADOS (Receta Retenida / Cheque) ---\n    { id: 'C001', sku: 'CTRL-01', name: 'ZOPICLONA 7.5MG', dci: 'ZOPICLONA', laboratory: 'Saval', condition: 'RR', is_bioequivalent: true, location_id: 'SUCURSAL_CENTRO', aisle: 'SEGURIDAD', stock_actual: 60, stock_min: 20, stock_max: 100, expiry_date: new Date('2025-08-01').getTime(), price: 4500, cost_price: 2000, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Zopiclona'] },\n    { id: 'C002', sku: 'CTRL-02', name: 'RAVOTRIL 2MG', dci: 'CLONAZEPAM', laboratory: 'Roche', condition: 'RCH', is_bioequivalent: false, location_id: 'SUCURSAL_CENTRO', aisle: 'CAJA FUERTE', stock_actual: 15, stock_min: 5, stock_max: 30, expiry_date: new Date('2025-12-01').getTime(), price: 12900, cost_price: 6000, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Clonazepam'] },\n    { id: 'C003', sku: 'CTRL-03', name: 'TRAMADOL GOTAS', dci: 'TRAMADOL', laboratory: 'Mintlab', condition: 'RR', is_bioequivalent: true, location_id: 'SUCURSAL_CENTRO', aisle: 'SEGURIDAD', stock_actual: 30, stock_min: 10, stock_max: 60, expiry_date: new Date('2026-02-01').getTime(), price: 3500, cost_price: 1500, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Tramadol'] },\n\n    // --- CADENA DE FRÍO ---\n    { id: 'F001', sku: 'FRIO-01', name: 'INSULINA NPH', dci: 'INSULINA HUMANA', laboratory: 'Novo Nordisk', condition: 'R', is_bioequivalent: false, location_id: 'SUCURSAL_CENTRO', aisle: 'REFRI-01', stock_actual: 25, stock_min: 10, stock_max: 50, expiry_date: new Date('2025-04-01').getTime(), price: 15990, cost_price: 8000, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Insulina Humana'] },\n    { id: 'F002', sku: 'FRIO-02', name: 'INSULINA GLARGINA', dci: 'INSULINA', laboratory: 'Sanofi', condition: 'R', is_bioequivalent: false, location_id: 'SUCURSAL_CENTRO', aisle: 'REFRI-01', stock_actual: 10, stock_min: 5, stock_max: 25, expiry_date: new Date('2025-05-01').getTime(), price: 25000, cost_price: 12000, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Insulina Glargina'] },\n\n    // --- LAB CHILE & GENÉRICOS ---\n    { id: 'G001', sku: 'LC-001', name: 'ACICLOVIR 200MG', dci: 'ACICLOVIR', laboratory: 'Lab Chile', condition: 'R', is_bioequivalent: true, location_id: 'SUCURSAL_CENTRO', aisle: 'GENERICOS-A', stock_actual: 100, stock_min: 20, stock_max: 200, expiry_date: new Date('2026-03-01').getTime(), price: 2167, cost_price: 800, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Aciclovir'] },\n    { id: 'G002', sku: 'LC-002', name: 'NAPROXENO 550MG', dci: 'NAPROXENO', laboratory: 'Lab Chile', condition: 'VD', is_bioequivalent: true, location_id: 'SUCURSAL_CENTRO', aisle: 'GENERICOS-N', stock_actual: 120, stock_min: 30, stock_max: 250, expiry_date: new Date('2026-07-01').getTime(), price: 1208, cost_price: 500, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Naproxeno'] },\n    { id: 'G003', sku: 'LC-003', name: 'OMEPRAZOL 20MG', dci: 'OMEPRAZOL', laboratory: 'Lab Chile', condition: 'VD', is_bioequivalent: true, location_id: 'SUCURSAL_CENTRO', aisle: 'GENERICOS-O', stock_actual: 500, stock_min: 100, stock_max: 800, expiry_date: new Date('2026-09-01').getTime(), price: 893, cost_price: 350, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Omeprazol'] },\n    { id: 'G004', sku: 'LC-004', name: 'KITADOL 1000MG', dci: 'PARACETAMOL', laboratory: 'Lab Chile', condition: 'VD', is_bioequivalent: true, location_id: 'SUCURSAL_CENTRO', aisle: 'INFANTIL', stock_actual: 80, stock_min: 20, stock_max: 150, expiry_date: new Date('2026-01-01').getTime(), price: 5295, cost_price: 2000, category: 'MEDICAMENTO', allows_commission: false, active_ingredients: ['Paracetamol'] },\n\n    // --- RETAIL & COMISIONABLES (LEY ANTI-CANELA: TRUE) ---\n    { id: 'R001', sku: 'RET-01', name: 'MAAM CREMA PRENATAL', dci: 'COSMETICO', laboratory: 'Maam', brand: 'Maam', condition: 'VD', is_bioequivalent: false, location_id: 'SUCURSAL_CENTRO', aisle: 'BELLEZA', stock_actual: 40, stock_min: 10, stock_max: 80, expiry_date: new Date('2027-01-01').getTime(), price: 15847, cost_price: 8000, category: 'RETAIL_BELLEZA', allows_commission: true, active_ingredients: [], image_url: '/images/maam.jpg' },\n    { id: 'R002', sku: 'RET-02', name: 'SIMILAC 1 FÓRMULA', dci: 'ALIMENTO', laboratory: 'Abbott', brand: 'Similac', condition: 'VD', is_bioequivalent: false, location_id: 'SUCURSAL_CENTRO', aisle: 'MATERNIDAD', stock_actual: 20, stock_min: 5, stock_max: 50, expiry_date: new Date('2025-02-01').getTime(), price: 22990, cost_price: 12000, category: 'RETAIL_BELLEZA', allows_commission: true, active_ingredients: [] },\n    { id: 'R003', sku: 'RET-03', name: 'EUCERIN PROTECTOR 50+', dci: 'COSMETICO', laboratory: 'Eucerin', brand: 'Eucerin', condition: 'VD', is_bioequivalent: false, location_id: 'SUCURSAL_CENTRO', aisle: 'SOLARES', stock_actual: 30, stock_min: 5, stock_max: 60, expiry_date: new Date('2027-05-01').getTime(), price: 18990, cost_price: 10000, category: 'RETAIL_BELLEZA', allows_commission: true, active_ingredients: [] },\n    { id: 'R004', sku: 'RET-04', name: 'LAUNOL SHAMPOO', dci: 'PEDICULICIDA', laboratory: 'Launol', brand: 'Launol', condition: 'VD', is_bioequivalent: false, location_id: 'SUCURSAL_CENTRO', aisle: 'CAPILAR', stock_actual: 25, stock_min: 5, stock_max: 50, expiry_date: new Date('2026-11-01').getTime(), price: 5528, cost_price: 2500, category: 'RETAIL_BELLEZA', allows_commission: true, active_ingredients: [] }\n];\n\nconst MOCK_EMPLOYEES: EmployeeProfile[] = [\n    {\n        id: 'EMP-001',\n        rut: '11.111.111-1',\n        name: 'Miguel Pérez',\n        role: 'MANAGER',\n        access_pin: '0000',\n        status: 'ACTIVE',\n        current_status: 'OUT',\n        job_title: 'Gerente General',\n        base_salary: 2500000,\n        weekly_hours: 44,\n        pension_fund: 'HABITAT',\n        health_system: 'ISAPRE',\n        mutual_safety: 'ACHS',\n        allowed_modules: ['POS', 'INVENTORY', 'HR', 'REPORTS', 'SUPPLIERS']\n    },\n    {\n        id: 'EMP-002',\n        rut: '22.222.222-2',\n        name: 'Javiera Rojas',\n        role: 'QF',\n        access_pin: '1234',\n        status: 'ACTIVE',\n        current_status: 'OUT',\n        job_title: 'Director Técnico',\n        base_salary: 1800000,\n        weekly_hours: 44,\n        pension_fund: 'MODELO',\n        health_system: 'FONASA',\n        allowed_modules: ['POS', 'INVENTORY', 'REPORTS', 'SUPPLIERS']\n    },\n    {\n        id: 'EMP-003',\n        rut: '33.333.333-3',\n        name: 'Camila Cajera',\n        role: 'CASHIER',\n        access_pin: '1111',\n        status: 'ACTIVE',\n        current_status: 'OUT',\n        job_title: 'Cajero Vendedor',\n        base_salary: 500000,\n        weekly_hours: 45,\n        pension_fund: 'PROVIDA',\n        health_system: 'FONASA',\n        allowed_modules: ['POS', 'INVENTORY']\n    },\n    {\n        id: 'EMP-004',\n        rut: '44.444.444-4',\n        name: 'Pedro Bodega',\n        role: 'WAREHOUSE',\n        access_pin: '2222',\n        status: 'ACTIVE',\n        current_status: 'OUT',\n        job_title: 'Asistente de Bodega',\n        base_salary: 550000,\n        weekly_hours: 45,\n        pension_fund: 'CAPITAL',\n        health_system: 'FONASA',\n        allowed_modules: ['INVENTORY', 'SUPPLIERS']\n    },\n];\n\n// --- MOCK SUPPLIERS ---\nconst MOCK_SUPPLIERS: Supplier[] = [\n    {\n        id: 'SUP-001',\n        rut: '76.111.111-1',\n        business_name: 'Laboratorio Chile S.A.',\n        fantasy_name: 'LabChile',\n        contact_email: 'ventas@labchile.cl',\n        lead_time_days: 2,\n        contacts: [\n            { name: 'Juan Pérez', role: 'SALES', email: 'juan.perez@labchile.cl', phone: '+56911111111', is_primary: true },\n            { name: 'María González', role: 'BILLING', email: 'facturacion@labchile.cl', phone: '+56911111112', is_primary: false }\n        ],\n        categories: ['MEDICAMENTOS'],\n        payment_terms: '30_DIAS',\n        rating: 5,\n        bank_account: { bank: 'Banco de Chile', account_type: 'CORRIENTE', account_number: '111-222-333', email_notification: 'pagos@labchile.cl' }\n    },\n    {\n        id: 'SUP-002',\n        rut: '76.222.222-2',\n        business_name: 'Novo Nordisk Farmacéutica Ltda.',\n        fantasy_name: 'Novo Nordisk',\n        contact_email: 'orders@novo.com',\n        lead_time_days: 5,\n        contacts: [\n            { name: 'Ana Silva', role: 'SALES', email: 'ana.silva@novo.com', phone: '+56922222222', is_primary: true }\n        ],\n        categories: ['MEDICAMENTOS', 'INSUMOS'],\n        payment_terms: '60_DIAS',\n        rating: 4\n    },\n    {\n        id: 'SUP-003',\n        rut: '76.333.333-3',\n        business_name: 'Droguería Hofmann S.A.',\n        fantasy_name: 'Droguería Hofmann',\n        contact_email: 'contacto@hofmann.cl',\n        lead_time_days: 3,\n        contacts: [],\n        categories: ['INSUMOS', 'RETAIL'],\n        payment_terms: 'CONTADO',\n        rating: 3\n    },\n];\n\ninterface PharmaState {\n    // Auth\n    user: EmployeeProfile | null;\n    employees: EmployeeProfile[]; // Store loaded employees\n    login: (userId: string, pin: string) => boolean;\n    logout: () => void;\n\n    // Data Sync\n    isLoading: boolean;\n    syncData: () => Promise<void>;\n\n    // Inventory\n    inventory: InventoryBatch[];\n    suppliers: Supplier[];\n    supplierDocuments: SupplierDocument[];\n    purchaseOrders: PurchaseOrder[];\n    updateStock: (batchId: string, quantity: number) => void;\n    addStock: (batchId: string, quantity: number, expiry?: number) => void;\n    addNewProduct: (product: InventoryBatch) => void;\n    transferStock: (batchId: string, targetLocation: 'BODEGA_CENTRAL' | 'SUCURSAL_CENTRO' | 'SUCURSAL_NORTE' | 'KIOSCO', quantity: number) => void;\n    addPurchaseOrder: (po: PurchaseOrder) => void;\n    receivePurchaseOrder: (poId: string, receivedItems: { sku: string, received_qty: number }[]) => void;\n\n    // SRM Actions\n    addSupplier: (supplier: Omit<Supplier, 'id'>) => void;\n    updateSupplier: (id: string, data: Partial<Supplier>) => void;\n    addSupplierDocument: (doc: Omit<SupplierDocument, 'id'>) => void;\n\n    // POS & Cart\n    cart: CartItem[];\n    currentCustomer: Customer | null;\n    setCustomer: (customer: Customer | null) => void;\n    addToCart: (batch: InventoryBatch, quantity: number) => void;\n    addManualItem: (item: { description: string, price: number, quantity: number }) => void;\n    removeFromCart: (sku: string) => void;\n    clearCart: () => void;\n    processSale: (paymentMethod: string, customer?: Customer) => void;\n\n    // CRM\n    customers: Customer[];\n    addCustomer: (customer: Omit<Customer, 'id' | 'totalPoints' | 'lastVisit' | 'name' | 'age' | 'health_tags'>) => Customer;\n    updateCustomer: (id: string, data: Partial<Customer>) => void;\n\n    // BI & Reports\n    salesHistory: SaleTransaction[];\n    expenses: Expense[];\n    addExpense: (expense: Omit<Expense, 'id'>) => void;\n\n    // Cash Management\n    currentShift: CashShift | null;\n    cashMovements: CashMovement[];\n    openShift: (amount: number) => void;\n    closeShift: (finalAmount: number) => void;\n    updateOpeningAmount: (newAmount: number) => void;\n    registerCashMovement: (movement: Omit<CashMovement, 'id' | 'timestamp' | 'shift_id' | 'user_id'>) => void;\n    getShiftMetrics: () => {\n        totalSales: number;\n        cashSales: number;\n        cardSales: number;\n        transferSales: number;\n        initialFund: number;\n        totalOutflows: number;\n        expectedCash: number;\n    };\n\n    // Attendance & HR\n    attendanceLogs: AttendanceLog[];\n    registerAttendance: (employeeId: string, type: AttendanceLog['type']) => void;\n    updateEmployeeBiometrics: (employeeId: string, credentialId: string) => void;\n\n    // WMS & Logistics\n    stockTransfers: StockTransfer[];\n    warehouseIncidents: WarehouseIncident[];\n    dispatchTransfer: (transfer: Omit<StockTransfer, 'id' | 'status' | 'timeline'>) => void;\n    receiveTransfer: (transferId: string, incidents?: Omit<WarehouseIncident, 'id' | 'transfer_id' | 'reported_at' | 'status'>[]) => void;\n\n    // Queue\n    tickets: QueueTicket[];\n    generateTicket: (rut?: string) => QueueTicket;\n    callNextTicket: () => QueueTicket | null;\n\n    // SII (Facturación Electrónica)\n    siiConfiguration: SiiConfiguration | null;\n    siiCafs: SiiCaf[];\n    dteDocuments: DteDocument[];\n    updateSiiConfiguration: (config: SiiConfiguration) => void;\n    addCaf: (caf: Omit<SiiCaf, 'id'>) => void;\n    getAvailableFolios: (tipoDte: DteTipo) => number;\n}\n\n\nexport const usePharmaStore = create<PharmaState>()(\n    persist(\n        (set, get) => ({\n            // --- Auth ---\n            user: null, // ALWAYS start logged out - force login\n            employees: MOCK_EMPLOYEES,\n            login: (userId, pin) => {\n                const { employees } = get();\n                const employee = employees.find(e => e.id === userId && e.access_pin === pin);\n                if (employee) {\n                    set({ user: employee });\n                    return true;\n                }\n                return false;\n            },\n            logout: () => set({ user: null }),\n\n            // --- Data Sync ---\n            isLoading: false,\n            syncData: async () => {\n                set({ isLoading: true });\n                try {\n                    const [inventory, employees] = await Promise.all([\n                        fetchInventory(),\n                        fetchEmployees()\n                    ]);\n\n                    // Si falla la DB (Safe Mode devuelve []), mantenemos lo que haya o usamos un fallback mínimo si está vacío\n                    if (inventory.length > 0) set({ inventory });\n                    if (employees.length > 0) set({ employees });\n\n                    const state = get();\n                    console.log('Data Synced:', {\n                        inventoryCount: state.inventory.length,\n                        employeeCount: state.employees.length,\n                        source: inventory.length > 0 ? 'DB' : 'MOCK/CACHE'\n                    });\n                } catch (error) {\n                    console.error('Sync failed:', error);\n                } finally {\n                    set({ isLoading: false });\n                }\n            },\n\n            // --- Inventory ---\n            inventory: MOCK_INVENTORY, // Start with real data\n            suppliers: MOCK_SUPPLIERS,\n            supplierDocuments: [],\n            purchaseOrders: [],\n            updateStock: (batchId, quantity) => set((state) => ({\n                inventory: state.inventory.map(item =>\n                    item.id === batchId ? { ...item, stock_actual: item.stock_actual + quantity } : item\n                )\n            })),\n            addStock: (batchId, quantity, expiry) => set((state) => ({\n                inventory: state.inventory.map(item =>\n                    item.id === batchId ? {\n                        ...item,\n                        stock_actual: item.stock_actual + quantity,\n                        expiry_date: expiry || item.expiry_date\n                    } : item\n                )\n            })),\n            addNewProduct: (product) => set((state) => ({\n                inventory: [...state.inventory, { ...product, id: `BATCH-${Date.now()}` }]\n            })),\n            transferStock: (batchId, targetLocation, quantity) => set((state) => {\n                const sourceItem = state.inventory.find(i => i.id === batchId);\n                if (!sourceItem || sourceItem.stock_actual < quantity) return state;\n\n                // 1. Deduct from source\n                const updatedInventory = state.inventory.map(i =>\n                    i.id === batchId ? { ...i, stock_actual: i.stock_actual - quantity } : i\n                );\n\n                // 2. Add to target (Find existing batch in target location or create new)\n                // For simplicity in this demo, we'll clone the item with new location\n                // In a real DB, we'd check if SKU exists in target location\n                const existingInTarget = updatedInventory.find(i => i.sku === sourceItem.sku && i.location_id === targetLocation);\n\n                if (existingInTarget) {\n                    existingInTarget.stock_actual += quantity;\n                } else {\n                    updatedInventory.push({\n                        ...sourceItem,\n                        id: `TRF-${Date.now()}`,\n                        location_id: targetLocation,\n                        stock_actual: quantity\n                    });\n                }\n\n                return { inventory: updatedInventory };\n            }),\n            addPurchaseOrder: (po) => set((state) => ({ purchaseOrders: [...state.purchaseOrders, po] })),\n            receivePurchaseOrder: (poId, receivedItems) => set((state) => {\n                // 1. Actualizar estado de la PO\n                const updatedPOs = state.purchaseOrders.map(po =>\n                    po.id === poId ? { ...po, status: 'COMPLETED' as const } : po\n                );\n\n                // 2. Actualizar Inventario\n                const updatedInventory = [...state.inventory];\n                receivedItems.forEach(rec => {\n                    const itemIndex = updatedInventory.findIndex(i => i.sku === rec.sku);\n                    if (itemIndex >= 0) {\n                        updatedInventory[itemIndex] = {\n                            ...updatedInventory[itemIndex],\n                            stock_actual: updatedInventory[itemIndex].stock_actual + rec.received_qty\n                        };\n                    }\n                });\n\n                return { purchaseOrders: updatedPOs, inventory: updatedInventory };\n            }),\n\n            // --- SRM Actions ---\n            addSupplier: (supplierData) => set((state) => ({\n                suppliers: [...state.suppliers, { ...supplierData, id: `SUP-${Date.now()}` }]\n            })),\n            updateSupplier: (id, data) => set((state) => ({\n                suppliers: state.suppliers.map(s => s.id === id ? { ...s, ...data } : s)\n            })),\n            addSupplierDocument: (docData) => set((state) => ({\n                supplierDocuments: [...state.supplierDocuments, { ...docData, id: `DOC-${Date.now()}` }]\n            })),\n\n            // --- POS ---\n            cart: [],\n            currentCustomer: null,\n            setCustomer: (customer) => set({ currentCustomer: customer }),\n            addToCart: (batch, quantity) => set((state) => {\n                const existingItem = state.cart.find(i => i.sku === batch.sku);\n                if (existingItem) {\n                    return {\n                        cart: state.cart.map(i => i.sku === batch.sku ? { ...i, quantity: i.quantity + quantity } : i)\n                    };\n                }\n                return {\n                    cart: [...state.cart, {\n                        id: batch.id,\n                        batch_id: batch.id,\n                        sku: batch.sku,\n                        name: batch.name,\n                        price: batch.price,\n                        quantity: quantity,\n                        allows_commission: batch.allows_commission,\n                        active_ingredients: batch.active_ingredients\n                    }]\n                };\n            }),\n            addManualItem: (item) => set((state) => ({\n                cart: [...state.cart, {\n                    id: 'MANUAL-' + Date.now(),\n                    batch_id: 'MANUAL',\n                    sku: 'MANUAL-SKU', // Generic SKU as requested\n                    name: item.description,\n                    price: item.price,\n                    quantity: item.quantity,\n                    allows_commission: true, // Usually manual items like services allow commission or are neutral\n                    active_ingredients: []\n                }]\n            })),\n            removeFromCart: (sku) => set((state) => ({\n                cart: state.cart.filter(i => i.sku !== sku)\n            })),\n            clearCart: () => set({ cart: [] }),\n            processSale: (paymentMethod, customer) => {\n                const state = get();\n                // 1. Descontar Stock\n                const newInventory = state.inventory.map(item => {\n                    const cartItem = state.cart.find(c => c.sku === item.sku);\n                    if (cartItem) {\n                        return { ...item, stock_actual: item.stock_actual - cartItem.quantity };\n                    }\n                    return item;\n                });\n\n                // Update customer points and last visit if applicable\n                if (customer) {\n                    const pointsEarned = Math.floor(state.cart.reduce((a, b) => a + b.price * b.quantity, 0) * 0.01); // 1% points\n                    state.updateCustomer(customer.id, {\n                        totalPoints: customer.totalPoints + pointsEarned,\n                        lastVisit: Date.now()\n                    });\n                }\n\n                console.log('Venta Procesada:', { items: state.cart, total: state.cart.reduce((a, b) => a + b.price * b.quantity, 0), paymentMethod, customer });\n\n                const saleTransaction: SaleTransaction = {\n                    id: `SALE-${Date.now()}`,\n                    timestamp: Date.now(),\n                    items: state.cart.map(item => ({\n                        batch_id: item.batch_id || 'UNKNOWN',\n                        sku: item.sku,\n                        name: item.name,\n                        price: item.price,\n                        quantity: item.quantity,\n                        allows_commission: item.allows_commission || false,\n                        active_ingredients: item.active_ingredients\n                    })),\n                    total: state.cart.reduce((a, b) => a + b.price * b.quantity, 0),\n                    payment_method: paymentMethod as any,\n                    seller_id: state.user?.id || 'UNKNOWN',\n                    customer: customer || undefined\n                };\n\n                set({\n                    inventory: newInventory,\n                    cart: [],\n                    currentCustomer: null,\n                    salesHistory: [...state.salesHistory, saleTransaction]\n                }); // Clear customer after sale\n            },\n\n            // --- CRM ---\n            customers: [\n                { id: 'C-001', rut: '11.111.111-1', fullName: 'Cliente Frecuente Demo', name: 'Cliente Frecuente Demo', phone: '+56912345678', email: 'demo@cliente.cl', totalPoints: 1500, registrationSource: 'ADMIN', lastVisit: Date.now() - 86400000, age: 45, health_tags: ['HYPERTENSION'] }\n            ],\n            addCustomer: (data) => {\n                const newCustomer: Customer = {\n                    id: `C-${Date.now()}`,\n                    ...data,\n                    name: data.fullName, // Alias\n                    totalPoints: 0,\n                    lastVisit: Date.now(),\n                    age: 0, // Default\n                    health_tags: [] // Default\n                };\n                set((state) => ({ customers: [...state.customers, newCustomer] }));\n                return newCustomer;\n            },\n            updateCustomer: (id, data) => set((state) => ({\n                customers: state.customers.map(c => c.id === id ? { ...c, ...data } : c)\n            })),\n\n            // --- BI & Reports ---\n            salesHistory: [],\n            expenses: [],\n            addExpense: (expense) => set((state) => ({\n                expenses: [...state.expenses, { ...expense, id: `EXP-${Date.now()}` }]\n            })),\n\n            // --- Cash Management ---\n            currentShift: null,\n            cashMovements: [],\n            openShift: (amount) => set((state) => {\n                if (state.currentShift?.status === 'OPEN') return state;\n                const newShift: CashShift = {\n                    id: `SHIFT-${Date.now()}`,\n                    user_id: state.user?.id || 'UNKNOWN',\n                    start_time: Date.now(),\n                    opening_amount: amount,\n                    status: 'OPEN'\n                };\n                return { currentShift: newShift };\n            }),\n            closeShift: (finalAmount) => set((state) => {\n                if (!state.currentShift) return state;\n                const metrics = state.getShiftMetrics();\n                return {\n                    currentShift: {\n                        ...state.currentShift,\n                        end_time: Date.now(),\n                        status: 'CLOSED',\n                        closing_amount: finalAmount,\n                        difference: finalAmount - metrics.expectedCash\n                    }\n                };\n            }),\n            updateOpeningAmount: (newAmount) => set((state) => {\n                if (!state.currentShift) return state;\n                return {\n                    currentShift: {\n                        ...state.currentShift,\n                        opening_amount: newAmount\n                    }\n                };\n            }),\n            registerCashMovement: (movement) => set((state) => {\n                if (!state.currentShift) return state;\n                const newMovement: CashMovement = {\n                    id: `MOV-${Date.now()}`,\n                    shift_id: state.currentShift.id,\n                    timestamp: Date.now(),\n                    user_id: state.user?.id || 'UNKNOWN',\n                    ...movement\n                };\n                return { cashMovements: [...state.cashMovements, newMovement] };\n            }),\n            getShiftMetrics: () => {\n                const state = get();\n                if (!state.currentShift) return {\n                    totalSales: 0, cashSales: 0, cardSales: 0, transferSales: 0, initialFund: 0, totalOutflows: 0, expectedCash: 0\n                };\n\n                // Filter sales within the current shift\n                const shiftSales = state.salesHistory.filter(s => s.timestamp >= state.currentShift!.start_time && (!state.currentShift!.end_time || s.timestamp <= state.currentShift!.end_time));\n\n                const totalSales = shiftSales.reduce((sum, s) => sum + s.total, 0);\n                const cashSales = shiftSales.filter(s => s.payment_method === 'CASH').reduce((sum, s) => sum + s.total, 0);\n                const cardSales = shiftSales.filter(s => s.payment_method === 'DEBIT' || s.payment_method === 'CREDIT').reduce((sum, s) => sum + s.total, 0);\n                const transferSales = shiftSales.filter(s => s.payment_method === 'TRANSFER').reduce((sum, s) => sum + s.total, 0);\n\n                const initialFund = state.currentShift.opening_amount;\n\n                const shiftMovements = state.cashMovements.filter(m => m.shift_id === state.currentShift!.id);\n                const totalOutflows = shiftMovements.filter(m => m.type === 'OUT' && m.is_cash).reduce((sum, m) => sum + m.amount, 0);\n                const totalInflows = shiftMovements.filter(m => m.type === 'IN' && m.is_cash).reduce((sum, m) => sum + m.amount, 0);\n\n                const expectedCash = initialFund + cashSales + totalInflows - totalOutflows;\n\n                return {\n                    totalSales,\n                    cashSales,\n                    cardSales,\n                    transferSales,\n                    initialFund,\n                    totalOutflows,\n                    expectedCash\n                };\n            },\n\n            // --- Attendance ---\n            attendanceLogs: [],\n            registerAttendance: (employeeId, type) => set((state) => {\n                const now = Date.now();\n                let newStatus: AttendanceStatus = 'OUT';\n\n                if (type === 'CHECK_IN' || type === 'LUNCH_END') newStatus = 'IN';\n                if (type === 'LUNCH_START') newStatus = 'LUNCH';\n                if (type === 'CHECK_OUT') newStatus = 'OUT';\n\n                // Calculate overtime if CHECK_OUT\n                let overtime = 0;\n                if (type === 'CHECK_OUT') {\n                    // Simple logic: find last CHECK_IN today\n                    const todayStart = new Date().setHours(0, 0, 0, 0);\n                    const lastCheckIn = state.attendanceLogs.find(l => l.employee_id === employeeId && l.type === 'CHECK_IN' && l.timestamp >= todayStart);\n\n                    if (lastCheckIn) {\n                        const workedMinutes = (now - lastCheckIn.timestamp) / 1000 / 60;\n                        const contractMinutes = 9 * 60; // 9 hours default\n                        if (workedMinutes > contractMinutes) {\n                            overtime = Math.round(workedMinutes - contractMinutes);\n                        }\n                    }\n                }\n\n                const newLog: AttendanceLog = {\n                    id: `LOG-${now}`,\n                    employee_id: employeeId,\n                    timestamp: now,\n                    type,\n                    overtime_minutes: overtime > 0 ? overtime : undefined\n                };\n\n                return {\n                    attendanceLogs: [...state.attendanceLogs, newLog],\n                    employees: state.employees.map(emp =>\n                        emp.id === employeeId ? { ...emp, current_status: newStatus } : emp\n                    )\n                };\n            }),\n            updateEmployeeBiometrics: (employeeId, credentialId) => set((state) => ({\n                employees: state.employees.map(emp =>\n                    emp.id === employeeId\n                        ? { ...emp, biometric_credentials: [...(emp.biometric_credentials || []), credentialId] }\n                        : emp\n                )\n            })),\n\n            // --- WMS & Logistics ---\n            stockTransfers: [],\n            warehouseIncidents: [],\n            dispatchTransfer: (transferData) => set((state) => {\n                const now = Date.now();\n                const newTransfer: StockTransfer = {\n                    ...transferData,\n                    id: `TRF-${now}`,\n                    status: 'IN_TRANSIT',\n                    timeline: { created_at: now, dispatched_at: now }\n                };\n\n                // Move stock to TRANSIT\n                const updatedInventory = [...state.inventory];\n\n                transferData.items.forEach(item => {\n                    const batchIndex = updatedInventory.findIndex(b => b.id === item.batchId);\n                    if (batchIndex !== -1) {\n                        // Deduct from origin\n                        updatedInventory[batchIndex] = {\n                            ...updatedInventory[batchIndex],\n                            stock_actual: updatedInventory[batchIndex].stock_actual - item.quantity\n                        };\n\n                        // Add to TRANSIT\n                        updatedInventory.push({\n                            ...updatedInventory[batchIndex],\n                            id: `TRANSIT-${item.batchId}-${now}`,\n                            location_id: 'TRANSIT',\n                            stock_actual: item.quantity,\n                            stock_min: 0,\n                            stock_max: 0\n                        });\n                    }\n                });\n\n                return {\n                    stockTransfers: [...state.stockTransfers, newTransfer],\n                    inventory: updatedInventory\n                };\n            }),\n            receiveTransfer: (transferId, incidents) => set((state) => {\n                const now = Date.now();\n                const transfer = state.stockTransfers.find(t => t.id === transferId);\n                if (!transfer) return {};\n\n                let updatedInventory = [...state.inventory];\n                const newIncidents: WarehouseIncident[] = [];\n\n                // Move stock from TRANSIT to Destination\n                transfer.items.forEach(item => {\n                    const transitBatchIndex = updatedInventory.findIndex(b =>\n                        b.sku === item.sku &&\n                        b.location_id === 'TRANSIT' &&\n                        b.stock_actual >= item.quantity\n                    );\n\n                    if (transitBatchIndex !== -1) {\n                        // Remove from TRANSIT\n                        updatedInventory[transitBatchIndex] = {\n                            ...updatedInventory[transitBatchIndex],\n                            stock_actual: updatedInventory[transitBatchIndex].stock_actual - item.quantity\n                        };\n\n                        // Add to Destination\n                        const destBatchIndex = updatedInventory.findIndex(b =>\n                            b.sku === item.sku &&\n                            b.location_id === transfer.destination_location_id\n                        );\n\n                        if (destBatchIndex !== -1) {\n                            updatedInventory[destBatchIndex] = {\n                                ...updatedInventory[destBatchIndex],\n                                stock_actual: updatedInventory[destBatchIndex].stock_actual + item.quantity\n                            };\n                        } else {\n                            // Create new batch at destination\n                            updatedInventory.push({\n                                ...updatedInventory[transitBatchIndex],\n                                id: `BATCH-${now}-${Math.random()}`,\n                                location_id: transfer.destination_location_id,\n                                stock_actual: item.quantity,\n                                stock_min: 10,\n                                stock_max: 100\n                            });\n                        }\n                    }\n                });\n\n                // Register Incidents\n                if (incidents && incidents.length > 0) {\n                    incidents.forEach(inc => {\n                        newIncidents.push({\n                            ...inc,\n                            id: `INC-${now}-${Math.random()}`,\n                            transfer_id: transferId,\n                            status: 'OPEN',\n                            reported_at: now\n                        });\n                    });\n                }\n\n                return {\n                    stockTransfers: state.stockTransfers.map(t =>\n                        t.id === transferId\n                            ? { ...t, status: incidents?.length ? 'DISPUTED' : 'RECEIVED', timeline: { ...t.timeline, received_at: now } }\n                            : t\n                    ),\n                    inventory: updatedInventory,\n                    warehouseIncidents: [...state.warehouseIncidents, ...newIncidents]\n                };\n            }),\n\n            // --- Queue ---\n            tickets: [],\n            generateTicket: (rut) => {\n                const state = get();\n                // Check if customer exists to personalize ticket\n                // const customer = rut ? state.customers.find(c => c.rut === rut) : null;\n\n                const newTicket: QueueTicket = {\n                    id: Math.random().toString(36).substr(2, 9),\n                    number: `A-${String(state.tickets.length + 1).padStart(3, '0')}`,\n                    status: 'WAITING',\n                    rut,\n                    timestamp: Date.now()\n                };\n\n                set((state) => ({ tickets: [...state.tickets, newTicket] }));\n                return newTicket;\n            },\n            callNextTicket: () => {\n                const state = get();\n                const nextTicket = state.tickets.find(t => t.status === 'WAITING');\n                if (nextTicket) {\n                    set((state) => ({\n                        tickets: state.tickets.map(t => t.id === nextTicket.id ? { ...t, status: 'CALLING' } : t)\n                    }));\n                    return nextTicket;\n                }\n                return null;\n            },\n\n            // --- SII ---\n            siiConfiguration: null,\n            siiCafs: [],\n            dteDocuments: [],\n            updateSiiConfiguration: (config) => set({ siiConfiguration: config }),\n            addCaf: (cafData) => set((state) => ({\n                siiCafs: [...state.siiCafs, { ...cafData, id: `CAF-${Date.now()}` }]\n            })),\n            getAvailableFolios: (tipoDte) => {\n                const state = get();\n                const caf = state.siiCafs.find(c => c.tipo_dte === tipoDte && c.active);\n                if (!caf) return 0;\n                return (caf.rango_hasta - caf.rango_desde) - caf.folios_usados;\n            }\n        }),\n        {\n            name: 'farmacias-vallenar-v4-fix', // Force cache clear - fix auto-login & empty inventory\n            version: 4,\n            storage: createJSONStorage(() => localStorage),\n            partialize: (state) => ({\n                user: state.user,\n                cart: state.cart,\n                inventory: state.inventory,\n                customers: state.customers,\n                salesHistory: state.salesHistory,\n                expenses: state.expenses,\n                currentShift: state.currentShift,\n                cashMovements: state.cashMovements,\n                attendanceLogs: state.attendanceLogs,\n                employees: state.employees,\n                stockTransfers: state.stockTransfers,\n                warehouseIncidents: state.warehouseIncidents,\n                siiConfiguration: state.siiConfiguration,\n                siiCafs: state.siiCafs,\n                dteDocuments: state.dteDocuments\n            }),\n            // Merge function to ensure employees are never empty\n            merge: (persistedState: any, currentState: PharmaState) => ({\n                ...currentState,\n                ...persistedState,\n                // Always ensure employees are populated\n                employees: (persistedState?.employees && persistedState.employees.length > 0)\n                    ? persistedState.employees\n                    : MOCK_EMPLOYEES\n            })\n        }\n    )\n);\n"],"names":[],"mappings":"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"}}]
}