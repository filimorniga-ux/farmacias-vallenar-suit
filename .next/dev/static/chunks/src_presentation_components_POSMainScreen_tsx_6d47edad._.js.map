{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/components/POSMainScreen.tsx"],"sourcesContent":["'use client';\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { usePharmaStore } from '../store/useStore';\nimport { Search, Plus, X, Tag, CreditCard, Banknote, Smartphone, AlertTriangle, ShoppingCart, PlusCircle, Coins, DollarSign, Lock as LockIcon, Edit, TrendingDown, TrendingUp, Wallet, User, Bot, AlertOctagon, Snowflake, ScanBarcode, Scissors, Trash2 } from 'lucide-react';\nimport ClinicalSidebar from './clinical/ClinicalSidebar';\nimport { ClinicalAgent } from '../../domain/logic/clinicalAgent';\nimport ClientPanel from './pos/ClientPanel';\nimport PrescriptionModal from './pos/PrescriptionModal';\nimport ManualItemModal from './pos/ManualItemModal';\nimport CashControlModal from './pos/CashControlModal';\nimport CashOutModal from './pos/CashOutModal';\nimport QuickFractionModal from './pos/QuickFractionModal';\nimport { CartItem, InventoryBatch } from '../../domain/types';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nimport { useKioskGuard } from '../hooks/useKioskGuard';\nimport SafeExitButton from './security/SafeExitButton';\nimport { PrinterService } from '../../domain/services/PrinterService';\nimport CustomerSelectModal from './pos/CustomerSelectModal';\nimport { toast } from 'sonner';\nimport { shouldGenerateDTE } from '../../domain/logic/sii_dte';\nimport { useBarcodeScanner } from '../hooks/useBarcodeScanner';\nimport { formatProductLabel } from '../../domain/logic/productDisplay';\nimport { useSettingsStore } from '@/presentation/store/useSettingsStore';\nimport { applyPromotions } from '../../domain/logic/promotionEngine';\n\nconst POSMainScreen: React.FC = () => {\n    useKioskGuard(true); // Enable Kiosk Lock\n    const {\n        inventory, cart, addToCart, addManualItem, removeFromCart, clearCart,\n        processSale, currentCustomer, currentShift, getShiftMetrics, updateOpeningAmount, employees, printerConfig,\n        setCustomer, promotions, redeemGiftCard\n    } = usePharmaStore();\n\n    const { enable_sii_integration } = useSettingsStore();\n\n    const metrics = getShiftMetrics();\n    const [isEditBaseModalOpen, setIsEditBaseModalOpen] = useState(false);\n    const [supervisorPin, setSupervisorPin] = useState('');\n    const [newBaseAmount, setNewBaseAmount] = useState('');\n    const [editBaseError, setEditBaseError] = useState('');\n\n    // Calculate promotions\n    const { items: cartWithDiscounts, totalDiscount, finalTotal } = useMemo(() => {\n        return applyPromotions(cart, currentCustomer, promotions);\n    }, [cart, currentCustomer, promotions]);\n\n    // Use finalTotal for display instead of raw reduce\n    const total = finalTotal;\n\n    const [searchTerm, setSearchTerm] = useState('');\n    const [isPaymentModalOpen, setIsPaymentModalOpen] = useState(false);\n    const [isPrescriptionModalOpen, setIsPrescriptionModalOpen] = useState(false);\n    const [isManualItemModalOpen, setIsManualItemModalOpen] = useState(false);\n    const [isCashModalOpen, setIsCashModalOpen] = useState(false);\n    const [isCashOutModalOpen, setIsCashOutModalOpen] = useState(false);\n    const [isCustomerSelectModalOpen, setIsCustomerSelectModalOpen] = useState(false);\n    const [isQuickFractionModalOpen, setIsQuickFractionModalOpen] = useState(false);\n\n    // Gift Card Payment State\n    const [giftCardCode, setGiftCardCode] = useState('');\n    const [isGiftCardPayment, setIsGiftCardPayment] = useState(false);\n    const [selectedProductForFraction, setSelectedProductForFraction] = useState<InventoryBatch | null>(null);\n    const [pendingItemForPrescription, setPendingItemForPrescription] = useState<CartItem | null>(null);\n    const [paymentMethod, setPaymentMethod] = useState<'CASH' | 'DEBIT' | 'TRANSFER'>('CASH');\n    const [transferId, setTransferId] = useState('');\n\n    // Sidebar Tabs State\n    const [activeTab, setActiveTab] = useState<'CART' | 'CLIENT' | 'AI'>('CART');\n\n    // Barcode Scanner Integration\n    useBarcodeScanner({\n        onScan: (sku) => {\n            const product = inventory.find(p => p.sku === sku || p.id === sku);\n            if (product) {\n                addToCart(product, 1);\n                toast.success('Producto agregado', { duration: 1000, icon: <ScanBarcode /> });\n                // Play beep sound if possible\n                const audio = new Audio('/beep.mp3'); // Assuming file exists or just placeholder\n                audio.play().catch(() => { });\n            } else {\n                toast.error('Producto no encontrado');\n            }\n        }\n    });\n\n    // FEFO Sorting & Filtering - ONLY SHOW IF SEARCHING\n    const filteredInventory = useMemo(() => {\n        if (!searchTerm) return []; // Hide by default\n        return inventory\n            .filter(item =>\n                item.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                item.dci.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                item.sku.toLowerCase().includes(searchTerm.toLowerCase())\n            )\n            .sort((a, b) => a.expiry_date - b.expiry_date); // FEFO: First Expired, First Out\n    }, [inventory, searchTerm]);\n\n    // Clinical Analysis\n    const clinicalAnalysis = useMemo(() => ClinicalAgent.analyzeCart(cart, currentCustomer || undefined), [cart, currentCustomer]);\n    const cartTotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);\n\n    // AI Alert Logic\n    useEffect(() => {\n        if (clinicalAnalysis.status === 'WARNING' || clinicalAnalysis.status === 'BLOCK') {\n            setActiveTab('AI'); // Auto-switch to AI tab on alert\n        }\n    }, [clinicalAnalysis.status]);\n\n    // Check for Restricted Items (R/RR/RCH)\n    const isRestricted = (item: CartItem) => {\n        const inventoryItem = inventory.find(i => i.id === item.id);\n        return inventoryItem && (inventoryItem.condition === 'R' || inventoryItem.condition === 'RR' || inventoryItem.condition === 'RCH');\n    };\n    const hasRestrictedItems = cart.some(isRestricted);\n\n    const proceedToPaymentFlow = () => {\n        if (hasRestrictedItems) {\n            setIsPrescriptionModalOpen(true);\n        } else {\n            setIsPaymentModalOpen(true);\n        }\n    };\n\n    const handlePrePayment = () => {\n        if (cart.length === 0) return;\n        // Simplified flow: Skip customer check if not strictly required, or keep it but make it faster.\n        // Prompt 2 says \"Elimina el paso intermedio de Asociar Cliente\".\n        // We will go straight to payment. If customer is needed for R/RR, the PrescriptionModal handles it or we can add it there.\n        proceedToPaymentFlow();\n    };\n\n    const handlePrescriptionConfirm = (data: { folio: string, doctorRut: string }) => {\n        setIsPrescriptionModalOpen(false);\n        setIsPaymentModalOpen(true); // Proceed to payment\n    };\n\n    const handleCheckout = () => {\n        if (cart.length === 0) return;\n        if (!currentShift || currentShift.status === 'CLOSED') {\n            toast.error('Debe abrir caja antes de vender.');\n            return;\n        }\n        if (paymentMethod === 'TRANSFER' && !transferId) {\n            // Optional ID logic: allow empty, will be marked as PENDING\n        }\n\n        // Determine DTE Status based on Settings\n        let dteResult = { shouldGenerate: false, status: 'FISCALIZED_BY_VOUCHER' as any };\n        let dteFolio = undefined;\n\n        if (enable_sii_integration) {\n            const check = shouldGenerateDTE(paymentMethod);\n            dteResult = { shouldGenerate: check.shouldGenerate, status: check.status };\n            dteFolio = dteResult.shouldGenerate ? Math.floor(Math.random() * 100000).toString() : undefined;\n        }\n\n        // Capture sale data before processing (since cart clears)\n        const saleToPrint: any = {\n            id: `V-${Date.now()}`, // Mock ID, ideally returned by processSale\n            timestamp: Date.now(),\n            items: [...cart],\n            total: cart.reduce((sum, item) => sum + item.price * item.quantity, 0),\n            payment_method: paymentMethod,\n            customer: currentCustomer || undefined,\n            transfer_id: paymentMethod === 'TRANSFER' ? (transferId || 'SIN_ID_PENDIENTE') : undefined,\n            dte_status: dteResult.status,\n            dte_folio: dteFolio,\n            is_internal_ticket: !enable_sii_integration // Flag for template\n        };\n\n        processSale(paymentMethod, currentCustomer || undefined);\n\n        // Auto-Print Trigger\n        PrinterService.printTicket(saleToPrint, printerConfig);\n\n        setIsPaymentModalOpen(false);\n        setTransferId('');\n        setPaymentMethod('CASH');\n\n        if (enable_sii_integration && dteResult.shouldGenerate) {\n            toast.success(`¬°Venta Exitosa! Boleta N¬∫ ${dteFolio} generada.`, { duration: 3000 });\n        } else if (!enable_sii_integration) {\n            toast.success('¬°Venta Exitosa! Comprobante Interno Generado.', { duration: 3000 });\n        } else {\n            toast.success('¬°Venta Exitosa! Fiscalizada por Voucher.', { duration: 3000 });\n        }\n    };\n\n    const handleUpdateBase = () => {\n        const supervisor = employees.find(e => (e.role === 'MANAGER' || e.role === 'ADMIN') && e.access_pin === supervisorPin);\n        if (supervisor) {\n            updateOpeningAmount(Number(newBaseAmount));\n            setIsEditBaseModalOpen(false);\n            setSupervisorPin('');\n            setNewBaseAmount('');\n            setEditBaseError('');\n            alert('Base actualizada correctamente');\n        } else {\n            setEditBaseError('PIN no autorizado');\n        }\n    };\n\n    const openFractionModal = (e: React.MouseEvent, product: InventoryBatch) => {\n        e.stopPropagation();\n        setSelectedProductForFraction(product);\n        setIsQuickFractionModalOpen(true);\n    };\n\n    const handleFractionConfirm = (quantity: number, price: number) => {\n        if (selectedProductForFraction) {\n            // Create a special fractional item\n            const fractionalItem: any = {\n                ...selectedProductForFraction,\n                id: `${selectedProductForFraction.id}-F`, // Unique ID for fractional\n                name: `üîµ ${selectedProductForFraction.name} (FRACCIONADO: ${quantity} un)`,\n                price: selectedProductForFraction.fractional_price || Math.ceil(selectedProductForFraction.price / (selectedProductForFraction.units_per_box || 1)),\n                quantity: quantity,\n                is_fractional: true,\n                original_name: selectedProductForFraction.name\n            };\n            // We add it as a manual item effectively, or modify addToCart to handle it.\n            // Since addToCart takes InventoryBatch, we might need to use addManualItem or a custom logic.\n            // Let's use addManualItem for now as it fits the \"custom price/name\" model, \n            // BUT we need to ensure inventory tracking. \n            // Ideally, we should update addToCart to support overrides, but for now let's construct a CartItem.\n\n            // Hack: We use addToCart but we need to pass the modified object. \n            // However, addToCart looks up by ID usually. \n            // Let's use addManualItem which simply adds to cart array.\n            addManualItem({\n                sku: selectedProductForFraction.sku, // Keep SKU for tracking\n                description: fractionalItem.name,\n                price: fractionalItem.price,\n                quantity: quantity,\n                active_ingredients: selectedProductForFraction.active_ingredients,\n                is_fractional: true,\n                original_name: selectedProductForFraction.name\n            });\n\n            toast.success('Fraccionamiento agregado', { icon: <Scissors size={16} /> });\n        }\n    };\n\n    return (\n        <div className=\"flex h-[calc(100vh-80px)] bg-slate-100 overflow-hidden\">\n\n            {/* COL 1: B√∫squeda (20%) */}\n            <div className=\"w-[25%] flex flex-col p-6 pr-3 gap-4\">\n                <div className=\"bg-white rounded-3xl shadow-sm border border-slate-200 flex flex-col h-full overflow-hidden\">\n                    <div className=\"p-6 border-b border-slate-100\">\n                        <div className=\"relative w-full\">\n                            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400\" size={24} />\n                            <input\n                                type=\"text\"\n                                placeholder=\"Buscar...\"\n                                className=\"w-full pl-12 pr-4 py-4 bg-slate-50 border-2 border-slate-200 rounded-2xl focus:border-cyan-500 focus:outline-none transition-colors font-bold text-lg\"\n                                value={searchTerm}\n                                onChange={(e) => setSearchTerm(e.target.value)}\n                                autoFocus\n                            />\n                        </div>\n                        <p className=\"text-xs text-slate-400 mt-2 text-center\">Escanee un producto para agregarlo r√°pido</p>\n                    </div>\n\n                    <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\n                        {searchTerm ? (\n                            filteredInventory.map(item => (\n                                <div\n                                    key={item.id}\n                                    onClick={() => addToCart(item, 1)}\n                                    className=\"bg-white p-3 rounded-xl shadow-sm border border-slate-100 hover:shadow-md hover:border-cyan-200 cursor-pointer transition-all group\"\n                                >\n                                    <h3 className=\"font-bold text-slate-800 text-sm leading-tight mb-1 group-hover:text-cyan-600\">\n                                        {item.name}\n                                    </h3>\n                                    <p className=\"text-[10px] text-slate-500 font-mono mb-1\">{item.dci}</p>\n                                    <div className=\"flex justify-between items-center\">\n                                        <span className=\"font-bold text-slate-900\">${item.price.toLocaleString()}</span>\n                                        <div className=\"flex items-center gap-2\">\n                                            {item.is_fractionable && (\n                                                <button\n                                                    onClick={(e) => openFractionModal(e, item)}\n                                                    className=\"p-1.5 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors\"\n                                                    title=\"Venta Fraccionada\"\n                                                >\n                                                    <Scissors size={16} />\n                                                </button>\n                                            )}\n                                            <span className={`text-[10px] px-1.5 py-0.5 rounded ${item.stock_actual > 0 ? 'bg-emerald-100 text-emerald-700' : 'bg-red-100 text-red-700'}`}>Stock: {item.stock_actual}</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            ))\n                        ) : (\n                            <div className=\"h-full flex flex-col items-center justify-center text-slate-300 opacity-50\">\n                                <Search size={48} className=\"mb-4\" />\n                                <p className=\"text-sm font-bold\">Escriba para buscar</p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n\n            {/* COL 2: Carrito y Pago (80%) */}\n            <div className=\"flex-1 flex flex-col p-6 pl-0 gap-4\">\n                <div className=\"flex-1 bg-white rounded-3xl shadow-xl border border-slate-200 overflow-hidden flex flex-col\">\n                    {/* Header */}\n                    <div className=\"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50\">\n                        <div className=\"flex items-center gap-4\">\n                            <div className=\"bg-cyan-100 p-3 rounded-2xl text-cyan-700\">\n                                <ShoppingCart size={28} />\n                            </div>\n                            <div>\n                                <h1 className=\"text-2xl font-extrabold text-slate-800\">Carrito de Compra</h1>\n                                <div className=\"flex items-center gap-2 mt-1\">\n                                    {currentCustomer ? (\n                                        <div className=\"flex items-center gap-2 bg-emerald-50 text-emerald-700 px-2 py-1 rounded-lg border border-emerald-100\">\n                                            <User size={14} />\n                                            <span className=\"text-xs font-bold\">{currentCustomer.fullName}</span>\n                                            <button\n                                                onClick={() => setCustomer(null)}\n                                                className=\"p-0.5 hover:bg-emerald-200 rounded-full\"\n                                            >\n                                                <X size={12} />\n                                            </button>\n                                        </div>\n                                    ) : (\n                                        <div className=\"flex items-center gap-2\">\n                                            <span className=\"text-xs text-slate-400 font-bold\">üë§ Cliente: An√≥nimo</span>\n                                            <button\n                                                onClick={() => setIsCustomerSelectModalOpen(true)}\n                                                className=\"text-[10px] font-bold bg-slate-100 text-slate-600 px-2 py-1 rounded-md hover:bg-slate-200 transition\"\n                                            >\n                                                ASIGNAR\n                                            </button>\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n                            {/* Shift Status Badge */}\n                            <div className={`px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 ${currentShift?.status === 'OPEN' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\n                                <div className={`w-2 h-2 rounded-full ${currentShift?.status === 'OPEN' ? 'bg-green-500 animate-pulse' : 'bg-red-500'}`} />\n                                {currentShift?.status === 'OPEN' ? `TURNO #${currentShift.shiftNumber} - ABIERTO` : 'CAJA CERRADA'}\n                            </div>\n                        </div>\n                        <div className=\"flex gap-3\">\n                            <button\n                                onClick={() => setIsCashModalOpen(true)}\n                                className=\"flex items-center gap-2 bg-blue-600 text-white px-5 py-3 rounded-xl hover:bg-blue-700 font-bold transition-colors shadow-lg shadow-blue-200\"\n                            >\n                                <DollarSign size={20} />\n                                <span className=\"hidden lg:inline\">Gesti√≥n Caja</span>\n                            </button>\n                            <button\n                                onClick={() => setIsManualItemModalOpen(true)}\n                                className=\"flex items-center gap-2 bg-purple-100 text-purple-700 px-5 py-3 rounded-xl hover:bg-purple-200 font-bold transition-colors\"\n                            >\n                                <Plus size={20} />\n                                <span className=\"hidden lg:inline\">Item Manual</span>\n                            </button>\n                            <button\n                                onClick={clearCart}\n                                className=\"flex items-center gap-2 bg-red-50 text-red-600 px-5 py-3 rounded-xl hover:bg-red-100 font-bold transition-colors\"\n                            >\n                                <X size={20} />\n                                <span className=\"hidden lg:inline\">Limpiar</span>\n                            </button>\n                        </div>\n                    </div>\n\n                    {/* Cart Items */}\n                    <div className=\"flex-1 overflow-y-auto p-6\">\n                        {cart.length === 0 ? (\n                            <div className=\"h-full flex flex-col items-center justify-center text-slate-300\">\n                                <ShoppingCart size={80} className=\"mb-6 opacity-20\" />\n                                <h3 className=\"text-2xl font-bold text-slate-400\">El carrito est√° vac√≠o</h3>\n                                <p className=\"text-slate-400\">Escanee un producto o use el buscador</p>\n                            </div>\n                        ) : (\n                            <div className=\"space-y-3\">\n                                {cartWithDiscounts.map((item) => {\n                                    const fullItem = inventory.find(i => i.id === item.id);\n                                    return (\n                                        <div key={item.id} className=\"flex justify-between items-center p-3 bg-white rounded-xl border border-slate-100 shadow-sm group hover:border-purple-200 transition-all\">\n                                            <div className=\"flex-1\">\n                                                <div className=\"flex items-center gap-2 mb-1\">\n                                                    <h3 className=\"font-bold text-slate-800\">{fullItem ? formatProductLabel(fullItem) : item.name}</h3>\n                                                    {item.discount && (\n                                                        <span className=\"bg-purple-100 text-purple-700 text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1\">\n                                                            <Tag size={10} /> OFERTA\n                                                        </span>\n                                                    )}\n                                                </div>\n                                                <div className=\"text-xs text-slate-500 flex items-center gap-2\">\n                                                    <span className=\"bg-slate-100 px-2 py-1 rounded text-slate-600 font-mono\">{item.quantity} un.</span>\n                                                    <span>x</span>\n                                                    <span>${item.price.toLocaleString()}</span>\n                                                    {item.discount && (\n                                                        <span className=\"text-green-600 font-bold ml-1\">\n                                                            (-${item.discount.discountAmount.toLocaleString()})\n                                                        </span>\n                                                    )}\n                                                </div>\n                                            </div>\n                                            <div className=\"text-right mr-4\">\n                                                {item.discount ? (\n                                                    <div className=\"flex flex-col items-end\">\n                                                        <p className=\"font-bold text-slate-800 text-lg\">${(item.discount.finalPrice * item.quantity).toLocaleString()}</p>\n                                                        <p className=\"text-xs text-slate-400 line-through\">${(item.price * item.quantity).toLocaleString()}</p>\n                                                    </div>\n                                                ) : (\n                                                    <p className=\"font-bold text-slate-800 text-lg\">${(item.price * item.quantity).toLocaleString()}</p>\n                                                )}\n                                            </div>\n                                            <button\n                                                onClick={() => removeFromCart(item.sku)}\n                                                className=\"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\n                                            >\n                                                <Trash2 size={20} />\n                                            </button>\n                                        </div>\n                                    );\n                                })}\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Footer / Total */}\n                    <div className=\"bg-slate-900 text-white p-8 flex justify-between items-center\">\n                        <div className=\"flex gap-8\">\n                            <div>\n                                <p className=\"text-slate-400 text-sm mb-1\">√çtems</p>\n                                <p className=\"text-2xl font-bold\">{cart.reduce((acc, item) => acc + item.quantity, 0)}</p>\n                            </div>\n                            <div>\n                                <p className=\"text-slate-400 text-sm mb-1\">Subtotal</p>\n                                <p className=\"text-2xl font-bold\">${cartTotal.toLocaleString()}</p>\n                            </div>\n                        </div>\n                        <div className=\"flex items-center gap-8\">\n                            <div className=\"text-right\">\n                                <p className=\"text-slate-400 text-sm mb-1\">Total a Pagar</p>\n                                <p className=\"text-5xl font-extrabold text-emerald-400\">${cartTotal.toLocaleString()}</p>\n                            </div>\n                            <button\n                                onClick={handlePrePayment}\n                                disabled={cart.length === 0 || !currentShift || currentShift.status === 'CLOSED'}\n                                className=\"bg-emerald-500 hover:bg-emerald-400 text-emerald-950 px-12 py-6 rounded-2xl font-extrabold text-2xl shadow-lg shadow-emerald-900/50 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\"\n                            >\n                                PAGAR (F9)\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Modals */}\n            <PrescriptionModal\n                isOpen={isPrescriptionModalOpen}\n                onCancel={() => setIsPrescriptionModalOpen(false)}\n                onConfirm={handlePrescriptionConfirm}\n                itemName={pendingItemForPrescription?.name || ''}\n            />\n\n            <ManualItemModal\n                isOpen={isManualItemModalOpen}\n                onClose={() => setIsManualItemModalOpen(false)}\n                onConfirm={(item) => { addManualItem(item); setIsManualItemModalOpen(false); }}\n            />\n            <CashControlModal\n                isOpen={isCashModalOpen}\n                onClose={() => setIsCashModalOpen(false)}\n            />\n\n            <CashOutModal\n                isOpen={isCashOutModalOpen}\n                onClose={() => setIsCashOutModalOpen(false)}\n            />\n\n            <QuickFractionModal\n                isOpen={isQuickFractionModalOpen}\n                onClose={() => setIsQuickFractionModalOpen(false)}\n                product={selectedProductForFraction}\n                onConfirm={handleFractionConfirm}\n            />\n\n            {/* Edit Base Modal */}\n            {isEditBaseModalOpen && (\n                <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n                    <div className=\"bg-white rounded-3xl shadow-2xl w-full max-w-sm p-6 animate-in fade-in zoom-in duration-200\">\n                        <h3 className=\"text-xl font-bold text-slate-800 mb-4\">Ajustar Base Inicial</h3>\n\n                        <div className=\"space-y-4\">\n                            <div>\n                                <label className=\"block text-sm font-bold text-slate-600 mb-1\">Nuevo Monto Base</label>\n                                <input\n                                    type=\"number\"\n                                    className=\"w-full p-3 border-2 border-slate-200 rounded-xl font-bold text-lg\"\n                                    value={newBaseAmount}\n                                    onChange={(e) => setNewBaseAmount(e.target.value)}\n                                    placeholder=\"$0\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-bold text-slate-600 mb-1\">PIN Supervisor (Manager)</label>\n                                <input\n                                    type=\"password\"\n                                    maxLength={4}\n                                    className=\"w-full p-3 border-2 border-slate-200 rounded-xl font-bold text-lg tracking-widest text-center\"\n                                    value={supervisorPin}\n                                    onChange={(e) => {\n                                        setSupervisorPin(e.target.value);\n                                        setEditBaseError('');\n                                    }}\n                                    placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                                />\n                            </div>\n\n                            {editBaseError && <p className=\"text-red-500 text-sm font-bold text-center\">{editBaseError}</p>}\n\n                            <div className=\"grid grid-cols-2 gap-3 mt-6\">\n                                <button\n                                    onClick={() => setIsEditBaseModalOpen(false)}\n                                    className=\"py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100\"\n                                >\n                                    Cancelar\n                                </button>\n                                <button\n                                    onClick={handleUpdateBase}\n                                    className=\"py-3 rounded-xl font-bold bg-cyan-600 text-white hover:bg-cyan-700\"\n                                >\n                                    Confirmar\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Payment Modal */}\n            {isPaymentModalOpen && (\n                <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n                    <div className=\"bg-white rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden animate-in fade-in zoom-in duration-200\">\n                        <div className=\"p-6 border-b border-slate-100 flex justify-between items-center\">\n                            <h3 className=\"text-xl font-bold text-slate-800\">Finalizar Venta</h3>\n                            <button onClick={() => setIsPaymentModalOpen(false)}><X className=\"text-slate-400\" /></button>\n                        </div>\n\n                        <div className=\"p-6\">\n                            <div className=\"grid grid-cols-3 gap-4 mb-8\">\n                                <button\n                                    onClick={() => setPaymentMethod('CASH')}\n                                    className={`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${paymentMethod === 'CASH' ? 'border-emerald-500 bg-emerald-50 text-emerald-700' : 'border-slate-100 text-slate-400'}`}\n                                >\n                                    <Banknote size={24} />\n                                    <span className=\"text-xs font-bold\">EFECTIVO</span>\n                                </button>\n                                <button\n                                    onClick={() => setPaymentMethod('DEBIT')}\n                                    className={`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${paymentMethod === 'DEBIT' ? 'border-blue-500 bg-blue-50 text-blue-700' : 'border-slate-100 text-slate-400'}`}\n                                >\n                                    <CreditCard size={24} />\n                                    <span className=\"text-xs font-bold\">TARJETA</span>\n                                </button>\n                                <button\n                                    onClick={() => setPaymentMethod('TRANSFER')}\n                                    className={`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${paymentMethod === 'TRANSFER' ? 'border-purple-500 bg-purple-50 text-purple-700' : 'border-slate-100 text-slate-400'}`}\n                                >\n                                    <Smartphone size={24} />\n                                    <span className=\"text-xs font-bold\">TRANSF.</span>\n                                </button>\n                            </div>\n\n                            {paymentMethod === 'TRANSFER' && (\n                                <div className=\"mb-6 animate-in fade-in slide-in-from-top-2\">\n                                    <label className=\"block text-sm font-bold text-slate-700 mb-2\">ID de Transacci√≥n</label>\n                                    <input\n                                        type=\"text\"\n                                        className=\"w-full p-3 border-2 border-slate-300 rounded-xl focus:border-purple-500 focus:outline-none\"\n                                        placeholder=\"Ej: 12345678 (Opcional)\"\n                                        value={transferId}\n                                        onChange={(e) => setTransferId(e.target.value)}\n                                    />\n                                    <p className=\"text-xs text-slate-400 mt-2 flex items-center\">\n                                        <AlertTriangle size={12} className=\"mr-1\" />\n                                        Puede ingresar el ID despu√©s en el historial si es necesario.\n                                    </p>\n                                </div>\n                            )}\n\n                            <button\n                                onClick={handleCheckout}\n                                className=\"w-full py-4 bg-cyan-600 text-white font-bold rounded-xl hover:bg-cyan-700 transition shadow-lg shadow-cyan-200 flex items-center justify-center gap-2\"\n                            >\n                                <DollarSign size={20} /> CONFIRMAR PAGO\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            )}\n            <CustomerSelectModal\n                isOpen={isCustomerSelectModalOpen}\n                onClose={() => setIsCustomerSelectModalOpen(false)}\n            />\n\n\n        </div>\n    );\n};\n\n// Helper Icon\nconst ClockIcon = ({ size }: { size: number }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <circle cx=\"12\" cy=\"12\" r=\"10\" />\n        <polyline points=\"12 6 12 12 16 14\" />\n    </svg>\n);\n\nexport default POSMainScreen;\n"],"names":[],"mappings":"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"}}]
}