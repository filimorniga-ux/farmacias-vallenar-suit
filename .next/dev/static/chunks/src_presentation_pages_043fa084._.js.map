{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/LandingPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { usePharmaStore } from '../store/useStore';\nimport { ShoppingCart, Truck, Users, Clock, Lock, ArrowRight, BarChart3, Building2 } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { EmployeeProfile } from '../../domain/types';\n\nconst LandingPage: React.FC = () => {\n    const navigate = useNavigate();\n    const { login, user, employees } = usePharmaStore();\n    const [pin, setPin] = useState('');\n    const [error, setError] = useState('');\n    const [isLoginModalOpen, setIsLoginModalOpen] = useState(false);\n    const [targetRoute, setTargetRoute] = useState('');\n    const [selectedEmployee, setSelectedEmployee] = useState<EmployeeProfile | null>(null);\n    const [step, setStep] = useState<'select' | 'pin'>('select');\n\n    // Role mapping based on which card was clicked\n    const ROUTE_TO_ROLES: Record<string, string[]> = {\n        '/dashboard': ['MANAGER'],                    // Gerencia -> Only Manager\n        '/settings': ['MANAGER', 'ADMIN', 'QF'],     // Administraci贸n -> Manager, Admin, QF\n        '/pos': ['CASHIER', 'QF', 'MANAGER'],        // POS -> Cashiers, QF, Manager\n        '/warehouse': ['WAREHOUSE', 'MANAGER'],       // Warehouse -> Warehouse staff, Manager\n    };\n\n    // Filter employees based on target route\n    const filteredEmployees = targetRoute && ROUTE_TO_ROLES[targetRoute]\n        ? employees.filter(emp => ROUTE_TO_ROLES[targetRoute].includes(emp.role) && emp.status === 'ACTIVE')\n        : employees.filter(emp => emp.status === 'ACTIVE');\n\n    const handleCardClick = (route: string) => {\n        if (user) {\n            navigate(route);\n        } else {\n            setTargetRoute(route);\n            setIsLoginModalOpen(true);\n            setStep('select');\n            setSelectedEmployee(null);\n            setPin('');\n            setError('');\n        }\n    };\n\n    const handleEmployeeSelect = (employee: EmployeeProfile) => {\n        setSelectedEmployee(employee);\n        setStep('pin');\n        setError('');\n    };\n\n    const handleLogin = (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!selectedEmployee) return;\n\n        if (login(selectedEmployee.id, pin)) {\n            setIsLoginModalOpen(false);\n            navigate(targetRoute || '/pos');\n        } else {\n            setError('PIN Incorrecto');\n            setPin('');\n            // Shake animation will be handled by AnimatePresence\n        }\n    };\n\n    const handleBack = () => {\n        setStep('select');\n        setSelectedEmployee(null);\n        setPin('');\n        setError('');\n    };\n\n    const BentoCard = ({ title, icon: Icon, color, route, desc }: any) => (\n        <motion.div\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            className={`relative overflow-hidden rounded-3xl p-8 cursor-pointer shadow-xl transition-all ${color} text-white group`}\n            onClick={() => handleCardClick(route)}\n        >\n            <div className=\"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity\">\n                <Icon size={120} />\n            </div>\n            <div className=\"relative z-10 flex flex-col h-full justify-between\">\n                <div>\n                    <div className=\"bg-white/20 w-12 h-12 rounded-2xl flex items-center justify-center mb-4 backdrop-blur-sm\">\n                        <Icon size={24} />\n                    </div>\n                    <h3 className=\"text-2xl font-bold mb-2\">{title}</h3>\n                    <p className=\"text-white/80 text-sm font-medium\">{desc}</p>\n                </div>\n                <div className=\"flex items-center text-sm font-bold mt-4\">\n                    ACCEDER <ArrowRight size={16} className=\"ml-2\" />\n                </div>\n            </div>\n        </motion.div>\n    );\n\n    return (\n        <div className=\"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-6\">\n            <header className=\"mb-12 text-center\">\n                <h1 className=\"text-4xl font-extrabold text-slate-900 tracking-tight mb-2\">\n                    Farmacias <span className=\"text-cyan-600\">Vallenar</span> Suit\n                </h1>\n                <p className=\"text-slate-500 font-medium\">Sistema ERP Cl铆nico Integral v2.1</p>\n            </header>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl w-full\">\n                {/* Gerencia */}\n                <BentoCard\n                    title=\"GERENCIA & BI\"\n                    icon={BarChart3}\n                    color=\"bg-gradient-to-br from-purple-600 to-pink-600\"\n                    route=\"/dashboard\"\n                    desc=\"Reportes y An谩lisis Ejecutivo\"\n                />\n\n                {/* Administraci贸n */}\n                <BentoCard\n                    title=\"ADMINISTRACIN\"\n                    icon={Building2}\n                    color=\"bg-gradient-to-br from-blue-500 to-cyan-600\"\n                    route=\"/settings\"\n                    desc=\"Configuraci贸n y Gesti贸n\"\n                />\n\n                {/* POS */}\n                <BentoCard\n                    title=\"Punto de Venta\"\n                    icon={ShoppingCart}\n                    color=\"bg-gradient-to-br from-emerald-500 to-teal-600\"\n                    route=\"/pos\"\n                    desc=\"Ventas, Recetas y Caja\"\n                />\n\n                {/* Log铆stica */}\n                <BentoCard\n                    title=\"Log铆stica\"\n                    icon={Truck}\n                    color=\"bg-gradient-to-br from-orange-400 to-red-500\"\n                    route=\"/warehouse\"\n                    desc=\"Inventario y Operaciones WMS\"\n                />\n            </div>\n\n            {/* Login Modal */}\n            <AnimatePresence>\n                {isLoginModalOpen && (\n                    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n                        <motion.div\n                            initial={{ opacity: 0, y: 20 }}\n                            animate={{ opacity: 1, y: 0 }}\n                            exit={{ opacity: 0, y: 20 }}\n                            className=\"bg-white rounded-3xl shadow-2xl p-8 w-full max-w-md\"\n                        >\n                            {step === 'select' ? (\n                                <>\n                                    <div className=\"text-center mb-8\">\n                                        <div className=\"bg-cyan-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\n                                            <Users className=\"text-cyan-700\" size={32} />\n                                        </div>\n                                        <h2 className=\"text-2xl font-bold text-slate-900\">驴Qui茅n eres?</h2>\n                                        <p className=\"text-slate-500\">Selecciona tu perfil</p>\n                                        {/* Debug Info */}\n                                        <div className=\"mt-2 text-xs text-slate-400 space-y-1\">\n                                            <p> Total Empleados: {employees.length}</p>\n                                            <p> Filtrados: {filteredEmployees.length}</p>\n                                            <p> Ruta: {targetRoute}</p>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"grid grid-cols-2 gap-4 mb-6\">\n                                        {filteredEmployees.length > 0 ? (\n                                            filteredEmployees.map(emp => (\n                                                <motion.button\n                                                    key={emp.id}\n                                                    whileHover={{ scale: 1.05 }}\n                                                    whileTap={{ scale: 0.95 }}\n                                                    onClick={() => handleEmployeeSelect(emp)}\n                                                    className=\"p-4 rounded-2xl border-2 border-slate-200 hover:border-cyan-500 hover:bg-cyan-50 transition-all group\"\n                                                >\n                                                    <div className=\"w-16 h-16 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center text-white font-bold text-2xl mx-auto mb-2 group-hover:scale-110 transition-transform\">\n                                                        {emp.name.charAt(0)}\n                                                    </div>\n                                                    <p className=\"font-bold text-slate-800 text-sm\">{emp.name}</p>\n                                                    <p className=\"text-xs text-slate-400\">{emp.job_title}</p>\n                                                </motion.button>\n                                            ))\n                                        ) : (\n                                            <div className=\"col-span-2 text-center py-8 text-slate-400\">\n                                                <p>No hay usuarios disponibles para este m贸dulo</p>\n                                            </div>\n                                        )}\n                                    </div>\n\n                                    <button\n                                        onClick={() => setIsLoginModalOpen(false)}\n                                        className=\"w-full py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100 transition\"\n                                    >\n                                        Cancelar\n                                    </button>\n                                </>\n                            ) : (\n                                <>\n                                    <div className=\"text-center mb-8\">\n                                        <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center text-white font-bold text-3xl mx-auto mb-4\">\n                                            {selectedEmployee?.name.charAt(0)}\n                                        </div>\n                                        <h2 className=\"text-2xl font-bold text-slate-900\">{selectedEmployee?.name}</h2>\n                                        <p className=\"text-slate-500\">{selectedEmployee?.job_title}</p>\n                                    </div>\n\n                                    <form onSubmit={handleLogin} className=\"space-y-6\">\n                                        <div>\n                                            <label className=\"block text-center text-sm font-bold text-slate-600 mb-2\">\n                                                Ingresa tu PIN de 4 d铆gitos\n                                            </label>\n                                            <motion.input\n                                                key={error} // This will cause re-mount and trigger animation when error changes\n                                                animate={error ? { x: [-10, 10, -10, 10, 0] } : {}}\n                                                transition={{ duration: 0.4 }}\n                                                type=\"password\"\n                                                maxLength={4}\n                                                className={`w-full text-center text-4xl tracking-[1em] font-bold py-4 border-b-4 ${error ? 'border-red-500' : 'border-slate-200'} focus:border-cyan-600 focus:outline-none transition-colors text-slate-800 placeholder-slate-300`}\n                                                placeholder=\"⑩⑩⑩\"\n                                                value={pin}\n                                                onChange={(e) => {\n                                                    setPin(e.target.value);\n                                                    setError('');\n                                                }}\n                                                autoFocus\n                                            />\n                                        </div>\n\n                                        {error && (\n                                            <motion.p\n                                                initial={{ opacity: 0 }}\n                                                animate={{ opacity: 1 }}\n                                                className=\"text-red-500 text-center font-medium\"\n                                            >\n                                                {error}\n                                            </motion.p>\n                                        )}\n\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            <button\n                                                type=\"button\"\n                                                onClick={handleBack}\n                                                className=\"py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100 transition\"\n                                            >\n                                                Atr谩s\n                                            </button>\n                                            <button\n                                                type=\"submit\"\n                                                disabled={pin.length < 4}\n                                                className=\"py-3 rounded-xl font-bold bg-cyan-600 text-white hover:bg-cyan-700 shadow-lg shadow-cyan-200 transition disabled:opacity-50 disabled:cursor-not-allowed\"\n                                            >\n                                                Ingresar\n                                            </button>\n                                        </div>\n                                    </form>\n\n                                    <div className=\"mt-8 text-center text-xs text-slate-400\">\n                                        <p>PIN Demo: Miguel (0000), Javiera (1234)</p>\n                                    </div>\n                                </>\n                            )}\n                        </motion.div>\n                    </div>\n                )}\n            </AnimatePresence>\n        </div>\n    );\n};\n\nexport default LandingPage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 636, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/SupplyChainPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { usePharmaStore } from '../store/useStore';\nimport { PurchasingAgent } from '../../domain/logic/purchasingAgent';\nimport { Package, Truck, CheckCircle, AlertCircle, Plus } from 'lucide-react';\nimport BlindReceptionModal from '../components/scm/BlindReceptionModal';\n\nconst SupplyChainPage: React.FC = () => {\n    const { inventory, suppliers, purchaseOrders, addPurchaseOrder, receivePurchaseOrder } = usePharmaStore();\n    const [isReceptionModalOpen, setIsReceptionModalOpen] = useState(false);\n    const [selectedOrder, setSelectedOrder] = useState<any>(null);\n\n    // Run Purchasing Agent on mount\n    useEffect(() => {\n        const suggestions = PurchasingAgent.generateSuggestions(inventory, suppliers);\n        // In a real app, we would diff this with existing POs to avoid duplicates\n        // For MVP, we just log them or add them if empty\n        if (purchaseOrders.length === 0 && suggestions.length > 0) {\n            suggestions.forEach(po => addPurchaseOrder(po));\n        }\n    }, []);\n\n    const KanbanColumn = ({ title, status, color, icon: Icon }: any) => {\n        const orders = purchaseOrders.filter(po => po.status === status);\n\n        return (\n            <div className=\"flex-1 min-w-[300px] bg-slate-100 rounded-3xl p-4 flex flex-col h-full\">\n                <div className={`flex items-center gap-2 mb-4 px-2 ${color}`}>\n                    <Icon size={20} />\n                    <h3 className=\"font-bold text-slate-700\">{title}</h3>\n                    <span className=\"ml-auto bg-white/50 px-2 py-1 rounded-full text-xs font-bold\">{orders.length}</span>\n                </div>\n\n                <div className=\"flex-1 overflow-y-auto space-y-3\">\n                    {orders.map(po => (\n                        <div key={po.id} className=\"bg-white p-4 rounded-2xl shadow-sm border border-slate-200 hover:shadow-md transition-all cursor-pointer\">\n                            <div className=\"flex justify-between items-start mb-2\">\n                                <span className=\"text-xs font-mono text-slate-400\">{po.id}</span>\n                                <span className=\"text-xs font-bold text-slate-600\">{new Date(po.created_at).toLocaleDateString()}</span>\n                            </div>\n                            <h4 className=\"font-bold text-slate-800 mb-1\">{suppliers.find(s => s.id === po.supplier_id)?.fantasy_name || 'Proveedor Desconocido'}</h4>\n                            <p className=\"text-sm text-slate-500 mb-3\">{po.items.length} Items</p>\n\n                            {status === 'SENT' && (\n                                <button\n                                    onClick={() => { setSelectedOrder(po); setIsReceptionModalOpen(true); }}\n                                    className=\"w-full py-2 bg-blue-600 text-white rounded-lg text-xs font-bold hover:bg-blue-700 transition\"\n                                >\n                                    RECEPCIONAR\n                                </button>\n                            )}\n                        </div>\n                    ))}\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <div className=\"h-screen p-6 bg-slate-50 flex flex-col\">\n            <header className=\"mb-8 flex justify-between items-center\">\n                <div>\n                    <h1 className=\"text-3xl font-extrabold text-slate-900\">Cadena de Suministro</h1>\n                    <p className=\"text-slate-500\">Gesti贸n Inteligente de Abastecimiento</p>\n                </div>\n                <button className=\"flex items-center gap-2 px-6 py-3 bg-slate-900 text-white rounded-xl font-bold hover:bg-slate-800 transition shadow-lg\">\n                    <Plus size={20} /> Nueva Orden Manual\n                </button>\n            </header>\n\n            <div className=\"flex-1 flex gap-6 overflow-x-auto pb-4\">\n                <KanbanColumn title=\"Sugerido (IA)\" status=\"SUGGESTED\" color=\"text-purple-600\" icon={AlertCircle} />\n                <KanbanColumn title=\"Borrador\" status=\"DRAFT\" color=\"text-slate-600\" icon={Package} />\n                <KanbanColumn title=\"Enviado\" status=\"SENT\" color=\"text-blue-600\" icon={Truck} />\n                <KanbanColumn title=\"Completado\" status=\"COMPLETED\" color=\"text-emerald-600\" icon={CheckCircle} />\n            </div>\n\n            {isReceptionModalOpen && selectedOrder && (\n                <BlindReceptionModal\n                    order={selectedOrder}\n                    onClose={() => setIsReceptionModalOpen(false)}\n                    onReceive={(order, items) => {\n                        receivePurchaseOrder(order.id, items.map(i => ({ sku: i.sku, received_qty: i.receivedQty })));\n                        setIsReceptionModalOpen(false);\n                    }}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default SupplyChainPage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 931, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/AccessControlPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { User, Clock, Coffee, LogOut, CheckCircle } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\n// Mock Employees for Attendance Wall\nconst EMPLOYEES = [\n    { id: '1', name: 'Juan P茅rez', role: 'QF', avatar: 'JP' },\n    { id: '2', name: 'Mar铆a Gonz谩lez', role: 'Caja', avatar: 'MG' },\n    { id: '3', name: 'Carlos Boss', role: 'Admin', avatar: 'CB' },\n    { id: '4', name: 'Ana Roja', role: 'Bodega', avatar: 'AR' },\n];\n\nconst AccessControlPage: React.FC = () => {\n    const [selectedEmployee, setSelectedEmployee] = useState<any>(null);\n    const [pin, setPin] = useState('');\n    const [status, setStatus] = useState<'IDLE' | 'SUCCESS'>('IDLE');\n    const [actionType, setActionType] = useState('');\n\n    const handlePinSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        // Mock validation\n        if (pin.length === 4) {\n            setStatus('SUCCESS');\n            setTimeout(() => {\n                setStatus('IDLE');\n                setSelectedEmployee(null);\n                setPin('');\n                setActionType('');\n            }, 3000);\n        }\n    };\n\n    const handleAction = (type: string) => {\n        setActionType(type);\n    };\n\n    return (\n        <div className=\"min-h-screen bg-slate-900 flex items-center justify-center p-8\">\n            <div className=\"w-full max-w-5xl\">\n                <header className=\"text-center mb-12\">\n                    <h1 className=\"text-4xl font-extrabold text-white mb-2\">Control de Asistencia</h1>\n                    <p className=\"text-slate-400 text-xl\">{new Date().toLocaleDateString('es-CL', { weekday: 'long', day: 'numeric', month: 'long' })}</p>\n                    <p className=\"text-cyan-400 text-3xl font-mono font-bold mt-2\">\n                        {new Date().toLocaleTimeString('es-CL', { hour: '2-digit', minute: '2-digit' })}\n                    </p>\n                </header>\n\n                {!selectedEmployee ? (\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\n                        {EMPLOYEES.map(emp => (\n                            <motion.button\n                                key={emp.id}\n                                whileHover={{ scale: 1.05 }}\n                                whileTap={{ scale: 0.95 }}\n                                onClick={() => setSelectedEmployee(emp)}\n                                className=\"bg-slate-800 rounded-3xl p-8 flex flex-col items-center gap-4 hover:bg-slate-700 transition border border-slate-700 hover:border-cyan-500 group\"\n                            >\n                                <div className=\"w-24 h-24 rounded-full bg-slate-600 flex items-center justify-center text-2xl font-bold text-white group-hover:bg-cyan-600 transition-colors\">\n                                    {emp.avatar}\n                                </div>\n                                <div className=\"text-center\">\n                                    <h3 className=\"text-xl font-bold text-white\">{emp.name}</h3>\n                                    <p className=\"text-slate-400\">{emp.role}</p>\n                                </div>\n                            </motion.button>\n                        ))}\n                    </div>\n                ) : (\n                    <motion.div\n                        initial={{ opacity: 0, scale: 0.9 }}\n                        animate={{ opacity: 1, scale: 1 }}\n                        className=\"bg-white rounded-[3rem] p-12 max-w-2xl mx-auto shadow-2xl\"\n                    >\n                        {status === 'SUCCESS' ? (\n                            <div className=\"text-center py-12\">\n                                <CheckCircle size={80} className=\"text-emerald-500 mx-auto mb-6\" />\n                                <h2 className=\"text-3xl font-bold text-slate-900 mb-2\">隆Marca Registrada!</h2>\n                                <p className=\"text-xl text-slate-500\">Hola {selectedEmployee.name}, que tengas un buen turno.</p>\n                            </div>\n                        ) : (\n                            <>\n                                <div className=\"flex items-center gap-6 mb-8 pb-8 border-b border-slate-100\">\n                                    <div className=\"w-20 h-20 rounded-full bg-cyan-600 flex items-center justify-center text-2xl font-bold text-white\">\n                                        {selectedEmployee.avatar}\n                                    </div>\n                                    <div>\n                                        <h2 className=\"text-3xl font-bold text-slate-900\">{selectedEmployee.name}</h2>\n                                        <button onClick={() => setSelectedEmployee(null)} className=\"text-slate-400 hover:text-slate-600 font-medium\">\n                                            Cambiar Usuario\n                                        </button>\n                                    </div>\n                                </div>\n\n                                {!actionType ? (\n                                    <div className=\"grid grid-cols-2 gap-4\">\n                                        <button onClick={() => handleAction('IN')} className=\"p-6 bg-emerald-50 rounded-2xl border-2 border-emerald-100 hover:border-emerald-500 flex flex-col items-center gap-2 transition\">\n                                            <Clock size={32} className=\"text-emerald-600\" />\n                                            <span className=\"font-bold text-emerald-800\">ENTRADA</span>\n                                        </button>\n                                        <button onClick={() => handleAction('OUT')} className=\"p-6 bg-red-50 rounded-2xl border-2 border-red-100 hover:border-red-500 flex flex-col items-center gap-2 transition\">\n                                            <LogOut size={32} className=\"text-red-600\" />\n                                            <span className=\"font-bold text-red-800\">SALIDA</span>\n                                        </button>\n                                        <button onClick={() => handleAction('BREAK')} className=\"col-span-2 p-6 bg-orange-50 rounded-2xl border-2 border-orange-100 hover:border-orange-500 flex flex-col items-center gap-2 transition\">\n                                            <Coffee size={32} className=\"text-orange-600\" />\n                                            <span className=\"font-bold text-orange-800\">COLACIN</span>\n                                        </button>\n                                    </div>\n                                ) : (\n                                    <form onSubmit={handlePinSubmit}>\n                                        <h3 className=\"text-center text-xl font-bold text-slate-700 mb-6\">Ingrese su PIN para confirmar</h3>\n                                        <input\n                                            type=\"password\"\n                                            maxLength={4}\n                                            autoFocus\n                                            className=\"w-full text-center text-5xl tracking-[1em] font-bold py-6 border-b-4 border-slate-200 focus:border-cyan-600 focus:outline-none mb-8\"\n                                            value={pin}\n                                            onChange={(e) => setPin(e.target.value)}\n                                        />\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            <button type=\"button\" onClick={() => setActionType('')} className=\"py-4 rounded-xl font-bold text-slate-500 bg-slate-100\">\n                                                Volver\n                                            </button>\n                                            <button type=\"submit\" className=\"py-4 rounded-xl font-bold text-white bg-cyan-600 hover:bg-cyan-700 shadow-lg\">\n                                                Confirmar\n                                            </button>\n                                        </div>\n                                    </form>\n                                )}\n                            </>\n                        )}\n                    </motion.div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default AccessControlPage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1360, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/HRPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Users, UserPlus, Search, Shield, Briefcase, FileText, Activity, Save, X, Lock } from 'lucide-react';\nimport { usePharmaStore } from '../store/useStore';\nimport { ROLES, Role, Permission } from '../../domain/security/roles';\nimport { EmployeeProfile } from '../../domain/types';\n\nconst HRPage = () => {\n    const { user, employees } = usePharmaStore();\n    const [searchTerm, setSearchTerm] = useState('');\n    const [selectedEmployee, setSelectedEmployee] = useState<EmployeeProfile | null>(null);\n    const [isEditing, setIsEditing] = useState(false);\n\n    // --- Access Control ---\n    if (!user || user.role !== 'MANAGER') {\n        return (\n            <div className=\"flex flex-col items-center justify-center h-full text-slate-500\">\n                <Shield size={64} className=\"text-red-500 mb-4\" />\n                <h2 className=\"text-2xl font-bold text-slate-800 mb-2\">Acceso Denegado</h2>\n                <p>No tienes permisos para acceder al m贸dulo de Recursos Humanos.</p>\n                <p className=\"text-sm mt-2\">Rol requerido: MANAGER</p>\n            </div>\n        );\n    }\n\n    const filteredEmployees = employees.filter(emp =>\n        emp.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        emp.rut.includes(searchTerm)\n    );\n\n    const handleSave = (e: React.FormEvent) => {\n        e.preventDefault();\n        // Here we would call an updateEmployee action from the store\n        console.log('Saving employee:', selectedEmployee);\n        setIsEditing(false);\n        setSelectedEmployee(null);\n    };\n\n    return (\n        <div className=\"h-full flex flex-col bg-slate-50 p-6 overflow-hidden\">\n            <header className=\"flex justify-between items-center mb-6\">\n                <div>\n                    <h1 className=\"text-2xl font-bold text-slate-800 flex items-center gap-2\">\n                        <Users className=\"text-blue-600\" />\n                        Recursos Humanos\n                    </h1>\n                    <p className=\"text-slate-500\">Gesti贸n de personal, contratos y permisos</p>\n                </div>\n                <button\n                    onClick={() => {\n                        setSelectedEmployee({\n                            id: `EMP-${Date.now()}`,\n                            rut: '',\n                            name: '',\n                            role: 'CASHIER',\n                            access_pin: '',\n                            status: 'ACTIVE',\n                            current_status: 'OUT',\n                            allowed_modules: []\n                        } as EmployeeProfile);\n                        setIsEditing(true);\n                    }}\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-xl font-bold hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-lg shadow-blue-200\"\n                >\n                    <UserPlus size={20} />\n                    Nuevo Empleado\n                </button>\n            </header>\n\n            <div className=\"flex gap-6 flex-1 overflow-hidden\">\n                {/* Employee List */}\n                <div className=\"w-1/3 bg-white rounded-2xl shadow-sm border border-slate-200 flex flex-col overflow-hidden\">\n                    <div className=\"p-4 border-b border-slate-100\">\n                        <div className=\"relative\">\n                            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\" size={18} />\n                            <input\n                                type=\"text\"\n                                placeholder=\"Buscar por nombre o RUT...\"\n                                value={searchTerm}\n                                onChange={(e) => setSearchTerm(e.target.value)}\n                                className=\"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                            />\n                        </div>\n                    </div>\n                    <div className=\"flex-1 overflow-y-auto p-2 space-y-2\">\n                        {filteredEmployees.map(emp => (\n                            <div\n                                key={emp.id}\n                                onClick={() => { setSelectedEmployee(emp); setIsEditing(true); }}\n                                className={`p-3 rounded-xl cursor-pointer transition-all ${selectedEmployee?.id === emp.id ? 'bg-blue-50 border-blue-200 ring-1 ring-blue-300' : 'hover:bg-slate-50 border border-transparent'}`}\n                            >\n                                <div className=\"flex justify-between items-start\">\n                                    <div>\n                                        <h3 className=\"font-bold text-slate-800\">{emp.name}</h3>\n                                        <p className=\"text-xs text-slate-500\">{emp.job_title || ROLES[emp.role]}</p>\n                                    </div>\n                                    <span className={`px-2 py-0.5 rounded-full text-[10px] font-bold ${emp.status === 'ACTIVE' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\n                                        {emp.status}\n                                    </span>\n                                </div>\n                                <div className=\"mt-2 flex items-center gap-2 text-xs text-slate-400\">\n                                    <Shield size={12} />\n                                    <span>{emp.role}</span>\n                                    <span className=\"w-1 h-1 bg-slate-300 rounded-full\"></span>\n                                    <span>{emp.rut}</span>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n\n                {/* Employee Details Form */}\n                <div className=\"flex-1 bg-white rounded-2xl shadow-sm border border-slate-200 flex flex-col overflow-hidden\">\n                    {selectedEmployee ? (\n                        <form onSubmit={handleSave} className=\"flex flex-col h-full\">\n                            <div className=\"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50\">\n                                <div className=\"flex items-center gap-4\">\n                                    <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-xl\">\n                                        {selectedEmployee.name.charAt(0)}\n                                    </div>\n                                    <div>\n                                        <h2 className=\"text-xl font-bold text-slate-800\">{selectedEmployee.name || 'Nuevo Empleado'}</h2>\n                                        <p className=\"text-sm text-slate-500\">{selectedEmployee.id}</p>\n                                    </div>\n                                </div>\n                                <div className=\"flex gap-2\">\n                                    <button\n                                        type=\"button\"\n                                        onClick={() => { setSelectedEmployee(null); setIsEditing(false); }}\n                                        className=\"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors\"\n                                    >\n                                        Cancelar\n                                    </button>\n                                    <button\n                                        type=\"submit\"\n                                        className=\"px-4 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-md shadow-blue-200\"\n                                    >\n                                        <Save size={18} />\n                                        Guardar Cambios\n                                    </button>\n                                </div>\n                            </div>\n\n                            <div className=\"flex-1 overflow-y-auto p-6\">\n                                <div className=\"grid grid-cols-2 gap-6\">\n                                    {/* Personal Information */}\n                                    <div className=\"space-y-4\">\n                                        <h3 className=\"font-bold text-slate-800 flex items-center gap-2 border-b border-slate-100 pb-2\">\n                                            <UserPlus size={18} className=\"text-blue-500\" />\n                                            Informaci贸n Personal\n                                        </h3>\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            <div>\n                                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">Nombre Completo</label>\n                                                <input type=\"text\" className=\"w-full p-2 border border-slate-200 rounded-lg text-sm\" value={selectedEmployee.name} onChange={e => setSelectedEmployee({ ...selectedEmployee, name: e.target.value })} />\n                                            </div>\n                                            <div>\n                                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">RUT</label>\n                                                <input type=\"text\" className=\"w-full p-2 border border-slate-200 rounded-lg text-sm\" value={selectedEmployee.rut} onChange={e => setSelectedEmployee({ ...selectedEmployee, rut: e.target.value })} />\n                                            </div>\n                                            <div>\n                                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">Tel茅fono Contacto</label>\n                                                <input type=\"text\" className=\"w-full p-2 border border-slate-200 rounded-lg text-sm\" value={selectedEmployee.contact_phone || ''} onChange={e => setSelectedEmployee({ ...selectedEmployee, contact_phone: e.target.value })} />\n                                            </div>\n                                            <div>\n                                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">Estado</label>\n                                                <select className=\"w-full p-2 border border-slate-200 rounded-lg text-sm\" value={selectedEmployee.status} onChange={e => setSelectedEmployee({ ...selectedEmployee, status: e.target.value as any })}>\n                                                    <option value=\"ACTIVE\">Activo</option>\n                                                    <option value=\"ON_LEAVE\">Licencia/Vacaciones</option>\n                                                    <option value=\"TERMINATED\">Desvinculado</option>\n                                                </select>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"bg-orange-50 p-4 rounded-xl border border-orange-100\">\n                                            <h4 className=\"text-xs font-bold text-orange-800 mb-2 flex items-center gap-1\">\n                                                <Activity size={14} /> Contacto de Emergencia\n                                            </h4>\n                                            <div className=\"grid grid-cols-3 gap-2\">\n                                                <input type=\"text\" placeholder=\"Nombre\" className=\"p-2 border border-orange-200 rounded-lg text-xs\" value={selectedEmployee.emergency_contact?.name || ''} onChange={e => setSelectedEmployee({ ...selectedEmployee, emergency_contact: { ...selectedEmployee.emergency_contact!, name: e.target.value } })} />\n                                                <input type=\"text\" placeholder=\"Relaci贸n\" className=\"p-2 border border-orange-200 rounded-lg text-xs\" value={selectedEmployee.emergency_contact?.relation || ''} onChange={e => setSelectedEmployee({ ...selectedEmployee, emergency_contact: { ...selectedEmployee.emergency_contact!, relation: e.target.value } })} />\n                                                <input type=\"text\" placeholder=\"Tel茅fono\" className=\"p-2 border border-orange-200 rounded-lg text-xs\" value={selectedEmployee.emergency_contact?.phone || ''} onChange={e => setSelectedEmployee({ ...selectedEmployee, emergency_contact: { ...selectedEmployee.emergency_contact!, phone: e.target.value } })} />\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    {/* Contractual Data */}\n                                    <div className=\"space-y-4\">\n                                        <h3 className=\"font-bold text-slate-800 flex items-center gap-2 border-b border-slate-100 pb-2\">\n                                            <Briefcase size={18} className=\"text-purple-500\" />\n                                            Datos Contractuales\n                                        </h3>\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            <div>\n                                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">Cargo</label>\n                                                <input type=\"text\" className=\"w-full p-2 border border-slate-200 rounded-lg text-sm\" value={selectedEmployee.job_title || ''} onChange={e => setSelectedEmployee({ ...selectedEmployee, job_title: e.target.value })} />\n                                            </div>\n                                            <div>\n                                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">Sueldo Base (CLP)</label>\n                                                <input type=\"number\" className=\"w-full p-2 border border-slate-200 rounded-lg text-sm\" value={selectedEmployee.base_salary || 0} onChange={e => setSelectedEmployee({ ...selectedEmployee, base_salary: Number(e.target.value) })} />\n                                            </div>\n                                            <div>\n                                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">Horas Semanales</label>\n                                                <input type=\"number\" className=\"w-full p-2 border border-slate-200 rounded-lg text-sm\" value={selectedEmployee.weekly_hours || 45} onChange={e => setSelectedEmployee({ ...selectedEmployee, weekly_hours: Number(e.target.value) })} />\n                                            </div>\n                                            <div>\n                                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">AFP</label>\n                                                <select className=\"w-full p-2 border border-slate-200 rounded-lg text-sm\" value={selectedEmployee.pension_fund || ''} onChange={e => setSelectedEmployee({ ...selectedEmployee, pension_fund: e.target.value })}>\n                                                    <option value=\"\">Seleccionar...</option>\n                                                    <option value=\"HABITAT\">Habitat</option>\n                                                    <option value=\"MODELO\">Modelo</option>\n                                                    <option value=\"CAPITAL\">Capital</option>\n                                                    <option value=\"PROVIDA\">Provida</option>\n                                                    <option value=\"CUPRUM\">Cuprum</option>\n                                                    <option value=\"PLANVITAL\">Planvital</option>\n                                                    <option value=\"UNO\">Uno</option>\n                                                </select>\n                                            </div>\n                                            <div>\n                                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">Sistema Salud</label>\n                                                <select className=\"w-full p-2 border border-slate-200 rounded-lg text-sm\" value={selectedEmployee.health_system || ''} onChange={e => setSelectedEmployee({ ...selectedEmployee, health_system: e.target.value })}>\n                                                    <option value=\"\">Seleccionar...</option>\n                                                    <option value=\"FONASA\">Fonasa</option>\n                                                    <option value=\"ISAPRE\">Isapre</option>\n                                                </select>\n                                            </div>\n                                            <div>\n                                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">Mutual</label>\n                                                <select className=\"w-full p-2 border border-slate-200 rounded-lg text-sm\" value={selectedEmployee.mutual_safety || ''} onChange={e => setSelectedEmployee({ ...selectedEmployee, mutual_safety: e.target.value })}>\n                                                    <option value=\"\">Seleccionar...</option>\n                                                    <option value=\"ACHS\">ACHS</option>\n                                                    <option value=\"MUTUAL\">Mutual de Seguridad</option>\n                                                    <option value=\"IST\">IST</option>\n                                                    <option value=\"ISL\">ISL</option>\n                                                </select>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    {/* Security & Roles */}\n                                    <div className=\"col-span-2 space-y-4 mt-4\">\n                                        <h3 className=\"font-bold text-slate-800 flex items-center gap-2 border-b border-slate-100 pb-2\">\n                                            <Lock size={18} className=\"text-red-500\" />\n                                            Seguridad y Accesos\n                                        </h3>\n                                        <div className=\"grid grid-cols-2 gap-6\">\n                                            <div className=\"space-y-4\">\n                                                <div>\n                                                    <label className=\"block text-xs font-bold text-slate-500 mb-1\">Rol del Sistema</label>\n                                                    <select className=\"w-full p-2 border border-slate-200 rounded-lg text-sm font-bold text-slate-700\" value={selectedEmployee.role} onChange={e => setSelectedEmployee({ ...selectedEmployee, role: e.target.value as Role })}>\n                                                        {Object.entries(ROLES).map(([key, label]) => (\n                                                            <option key={key} value={key}>{label}</option>\n                                                        ))}\n                                                    </select>\n                                                    <p className=\"text-[10px] text-slate-400 mt-1\">Define los permisos base del usuario.</p>\n                                                </div>\n                                                <div>\n                                                    <label className=\"block text-xs font-bold text-slate-500 mb-1\">PIN de Acceso (4 d铆gitos)</label>\n                                                    <input type=\"password\" maxLength={4} className=\"w-full p-2 border border-slate-200 rounded-lg text-sm font-mono tracking-widest\" value={selectedEmployee.access_pin} onChange={e => setSelectedEmployee({ ...selectedEmployee, access_pin: e.target.value })} />\n                                                </div>\n                                            </div>\n\n                                            <div className=\"bg-slate-50 p-4 rounded-xl border border-slate-200\">\n                                                <h4 className=\"text-xs font-bold text-slate-700 mb-3\">Permisos Adicionales (M贸dulos)</h4>\n                                                <div className=\"space-y-2\">\n                                                    {['POS', 'INVENTORY', 'HR', 'REPORTS', 'SUPPLIERS'].map(module => (\n                                                        <label key={module} className=\"flex items-center gap-2 cursor-pointer\">\n                                                            <input\n                                                                type=\"checkbox\"\n                                                                className=\"rounded text-blue-600 focus:ring-blue-500\"\n                                                                checked={selectedEmployee.allowed_modules?.includes(module)}\n                                                                onChange={e => {\n                                                                    const current = selectedEmployee.allowed_modules || [];\n                                                                    if (e.target.checked) {\n                                                                        setSelectedEmployee({ ...selectedEmployee, allowed_modules: [...current, module] });\n                                                                    } else {\n                                                                        setSelectedEmployee({ ...selectedEmployee, allowed_modules: current.filter(m => m !== module) });\n                                                                    }\n                                                                }}\n                                                            />\n                                                            <span className=\"text-sm text-slate-600\">{module}</span>\n                                                        </label>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </form>\n                    ) : (\n                        <div className=\"flex flex-col items-center justify-center h-full text-slate-400\">\n                            <Users size={64} className=\"mb-4 text-slate-200\" />\n                            <p className=\"text-lg font-medium\">Selecciona un empleado para ver sus detalles</p>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default HRPage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2631, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/settings/SiiSettings.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Shield, Upload, FileText, CheckCircle, AlertTriangle, Key, Building2, Briefcase, Hash } from 'lucide-react';\nimport { usePharmaStore } from '../../store/useStore';\nimport { validateCertificate } from '../../../domain/logic/sii/crypto';\n\nconst SiiSettings = () => {\n    const { siiConfiguration, siiCafs, updateSiiConfiguration, addCaf, getAvailableFolios } = usePharmaStore();\n\n    const [certFile, setCertFile] = useState<File | null>(null);\n    const [certPassword, setCertPassword] = useState('');\n    const [isValidating, setIsValidating] = useState(false);\n    const [validationResult, setValidationResult] = useState<{ valid: boolean; commonName?: string; expiryDate?: Date; error?: string } | null>(null);\n\n    // Company Info State\n    const [companyData, setCompanyData] = useState({\n        rut: siiConfiguration?.rut_emisor || '',\n        razonSocial: siiConfiguration?.razon_social || '',\n        giro: siiConfiguration?.giro || '',\n        acteco: siiConfiguration?.acteco || 477310\n    });\n\n    const handleCertificateUpload = async () => {\n        if (!certFile || !certPassword) {\n            alert('Por favor seleccione un certificado e ingrese la contrase帽a');\n            return;\n        }\n\n        setIsValidating(true);\n        try {\n            // Convert file to base64\n            const reader = new FileReader();\n            reader.onload = async (e) => {\n                const base64 = e.target?.result as string;\n                const pfxBase64 = base64.split(',')[1]; // Remove data:application/x-pkcs12;base64,\n\n                // Validate certificate\n                const result = await validateCertificate(pfxBase64, certPassword);\n                setValidationResult(result);\n\n                if (result.valid) {\n                    // Save to store\n                    const config = {\n                        id: siiConfiguration?.id || `SII-${Date.now()}`,\n                        rut_emisor: companyData.rut,\n                        razon_social: companyData.razonSocial,\n                        giro: companyData.giro,\n                        acteco: companyData.acteco,\n                        certificado_pfx_base64: pfxBase64,\n                        certificado_password: certPassword, // In production, encrypt this!\n                        fecha_vencimiento_firma: result.expiryDate?.getTime() || Date.now(),\n                        ambiente: siiConfiguration?.ambiente || 'CERTIFICACION' as const,\n                    };\n                    updateSiiConfiguration(config);\n                }\n            };\n            reader.readAsDataURL(certFile);\n        } catch (error) {\n            setValidationResult({ valid: false, error: 'Error al procesar el certificado' });\n        } finally {\n            setIsValidating(false);\n        }\n    };\n\n    const handleCafUpload = async (e: React.ChangeEvent<HTMLInputElement>, tipoDte: 39 | 33) => {\n        const file = e.target.files?.[0];\n        if (!file) return;\n\n        const reader = new FileReader();\n        reader.onload = (event) => {\n            const xmlContent = event.target?.result as string;\n\n            // TODO: Parse XML to extract rango_desde and rango_hasta\n            // For MVP, using mock values\n            const mockRangoDesde = 1;\n            const mockRangoHasta = tipoDte === 39 ? 1000 : 500;\n\n            addCaf({\n                tipo_dte: tipoDte,\n                xml_content: xmlContent,\n                rango_desde: mockRangoDesde,\n                rango_hasta: mockRangoHasta,\n                folios_usados: 0,\n                fecha_carga: Date.now(),\n                active: true\n            });\n\n            alert(` CAF cargado exitosamente. Folios disponibles: ${mockRangoHasta - mockRangoDesde}`);\n        };\n        reader.readAsText(file);\n    };\n\n    const toggleAmbiente = () => {\n        if (!siiConfiguration) return;\n        updateSiiConfiguration({\n            ...siiConfiguration,\n            ambiente: siiConfiguration.ambiente === 'CERTIFICACION' ? 'PRODUCCION' : 'CERTIFICACION'\n        });\n    };\n\n    return (\n        <div className=\"p-6 bg-slate-50 min-h-screen\">\n            <header className=\"mb-8\">\n                <h1 className=\"text-3xl font-extrabold text-slate-900 flex items-center gap-3\">\n                    <Shield className=\"text-green-600\" />\n                    Conexi贸n SII (Servicio de Impuestos Internos)\n                </h1>\n                <p className=\"text-slate-500 mt-1\">Configure la facturaci贸n electr贸nica nativa. Sus datos est谩n protegidos.</p>\n            </header>\n\n            <div className=\"grid grid-cols-2 gap-6\">\n                {/* Company Information */}\n                <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 p-6\">\n                    <h2 className=\"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2\">\n                        <Building2 className=\"text-blue-500\" size={20} />\n                        Informaci贸n de la Empresa\n                    </h2>\n                    <div className=\"space-y-4\">\n                        <div>\n                            <label className=\"block text-sm font-bold text-slate-700 mb-1\">RUT Emisor</label>\n                            <input\n                                type=\"text\"\n                                value={companyData.rut}\n                                onChange={(e) => setCompanyData({ ...companyData, rut: e.target.value })}\n                                placeholder=\"76.123.456-7\"\n                                className=\"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                            />\n                        </div>\n                        <div>\n                            <label className=\"block text-sm font-bold text-slate-700 mb-1\">Raz贸n Social</label>\n                            <input\n                                type=\"text\"\n                                value={companyData.razonSocial}\n                                onChange={(e) => setCompanyData({ ...companyData, razonSocial: e.target.value })}\n                                placeholder=\"FARMACIAS VALLENAR LTDA\"\n                                className=\"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                            />\n                        </div>\n                        <div>\n                            <label className=\"block text-sm font-bold text-slate-700 mb-1\">Giro Comercial</label>\n                            <input\n                                type=\"text\"\n                                value={companyData.giro}\n                                onChange={(e) => setCompanyData({ ...companyData, giro: e.target.value })}\n                                placeholder=\"VENTA AL POR MENOR DE PRODUCTOS FARMACEUTICOS\"\n                                className=\"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                            />\n                        </div>\n                        <div>\n                            <label className=\"block text-sm font-bold text-slate-700 mb-1\">ACTECO (C贸digo Actividad)</label>\n                            <input\n                                type=\"number\"\n                                value={companyData.acteco}\n                                onChange={(e) => setCompanyData({ ...companyData, acteco: Number(e.target.value) })}\n                                placeholder=\"477310\"\n                                className=\"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                            />\n                        </div>\n                    </div>\n                </div>\n\n                {/* Certificate Upload */}\n                <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 p-6\">\n                    <h2 className=\"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2\">\n                        <Key className=\"text-purple-500\" size={20} />\n                        Certificado Digital\n                    </h2>\n\n                    {validationResult?.valid ? (\n                        <div className=\"bg-green-50 border border-green-200 rounded-xl p-4 mb-4\">\n                            <div className=\"flex items-center gap-2 text-green-700 font-bold mb-2\">\n                                <CheckCircle size={20} />\n                                Certificado Cargado\n                            </div>\n                            <div className=\"text-sm text-green-600\">\n                                <p><strong>Titular:</strong> {validationResult.commonName}</p>\n                                <p><strong>Vencimiento:</strong> {validationResult.expiryDate?.toLocaleDateString()}</p>\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"space-y-4\">\n                            <div>\n                                <label className=\"block text-sm font-bold text-slate-700 mb-2\">Archivo PFX / P12</label>\n                                <input\n                                    type=\"file\"\n                                    accept=\".pfx,.p12\"\n                                    onChange={(e) => setCertFile(e.target.files?.[0] || null)}\n                                    className=\"w-full p-3 border border-slate-300 rounded-xl\"\n                                />\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-bold text-slate-700 mb-2\">Contrase帽a del Certificado</label>\n                                <input\n                                    type=\"password\"\n                                    value={certPassword}\n                                    onChange={(e) => setCertPassword(e.target.value)}\n                                    placeholder=\"⑩⑩⑩⑩⑩\"\n                                    className=\"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\n                                />\n                            </div>\n                            <button\n                                onClick={handleCertificateUpload}\n                                disabled={!certFile || !certPassword || isValidating}\n                                className=\"w-full py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-purple-200\"\n                            >\n                                {isValidating ? 'Validando...' : 'Cargar y Validar'}\n                            </button>\n                        </div>\n                    )}\n\n                    {validationResult && !validationResult.valid && (\n                        <div className=\"bg-red-50 border border-red-200 rounded-xl p-4 mt-4\">\n                            <div className=\"flex items-center gap-2 text-red-700 font-bold mb-1\">\n                                <AlertTriangle size={20} />\n                                Error\n                            </div>\n                            <p className=\"text-sm text-red-600\">{validationResult.error}</p>\n                        </div>\n                    )}\n                </div>\n\n                {/* CAF Management */}\n                <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 col-span-2\">\n                    <h2 className=\"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2\">\n                        <FileText className=\"text-orange-500\" size={20} />\n                        Folios (CAF - C贸digo de Autorizaci贸n de Folios)\n                    </h2>\n\n                    <div className=\"grid grid-cols-2 gap-6\">\n                        {/* Boletas (39) */}\n                        <div className=\"border border-blue-200 rounded-xl p-4 bg-blue-50\">\n                            <h3 className=\"font-bold text-blue-800 mb-3 flex items-center gap-2\">\n                                <Hash size={18} />\n                                Boletas Electr贸nicas (Tipo 39)\n                            </h3>\n                            <div className=\"mb-4\">\n                                <div className=\"text-sm text-blue-600 mb-2\">\n                                    <strong>Folios Disponibles:</strong> {getAvailableFolios(39)}\n                                </div>\n                                {siiCafs.filter(c => c.tipo_dte === 39).map(caf => (\n                                    <div key={caf.id} className=\"text-xs text-blue-500 bg-white p-2 rounded mb-1\">\n                                        Rango: {caf.rango_desde} - {caf.rango_hasta} | Usados: {caf.folios_usados}\n                                    </div>\n                                ))}\n                            </div>\n                            <input\n                                type=\"file\"\n                                accept=\".xml\"\n                                onChange={(e) => handleCafUpload(e, 39)}\n                                className=\"w-full p-2 border border-blue-300 rounded-lg text-sm\"\n                            />\n                        </div>\n\n                        {/* Facturas (33) */}\n                        <div className=\"border border-green-200 rounded-xl p-4 bg-green-50\">\n                            <h3 className=\"font-bold text-green-800 mb-3 flex items-center gap-2\">\n                                <Hash size={18} />\n                                Facturas Electr贸nicas (Tipo 33)\n                            </h3>\n                            <div className=\"mb-4\">\n                                <div className=\"text-sm text-green-600 mb-2\">\n                                    <strong>Folios Disponibles:</strong> {getAvailableFolios(33)}\n                                </div>\n                                {siiCafs.filter(c => c.tipo_dte === 33).map(caf => (\n                                    <div key={caf.id} className=\"text-xs text-green-500 bg-white p-2 rounded mb-1\">\n                                        Rango: {caf.rango_desde} - {caf.rango_hasta} | Usados: {caf.folios_usados}\n                                    </div>\n                                ))}\n                            </div>\n                            <input\n                                type=\"file\"\n                                accept=\".xml\"\n                                onChange={(e) => handleCafUpload(e, 33)}\n                                className=\"w-full p-2 border border-green-300 rounded-lg text-sm\"\n                            />\n                        </div>\n                    </div>\n                </div>\n\n                {/* Environment Toggle */}\n                <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 col-span-2\">\n                    <h2 className=\"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2\">\n                        <Briefcase className=\"text-indigo-500\" size={20} />\n                        Ambiente\n                    </h2>\n                    <div className=\"flex items-center gap-6\">\n                        <button\n                            onClick={toggleAmbiente}\n                            disabled={!siiConfiguration}\n                            className={`px-8 py-4 rounded-xl font-bold text-lg transition-all ${siiConfiguration?.ambiente === 'CERTIFICACION'\n                                    ? 'bg-yellow-500 text-white shadow-lg shadow-yellow-200'\n                                    : 'bg-slate-200 text-slate-500'\n                                }`}\n                        >\n                            И Certificaci贸n (Pruebas - Maullin)\n                        </button>\n                        <button\n                            onClick={toggleAmbiente}\n                            disabled={!siiConfiguration}\n                            className={`px-8 py-4 rounded-xl font-bold text-lg transition-all ${siiConfiguration?.ambiente === 'PRODUCCION'\n                                    ? 'bg-green-600 text-white shadow-lg shadow-green-200'\n                                    : 'bg-slate-200 text-slate-500'\n                                }`}\n                        >\n                             Producci贸n (Real - Palena)\n                        </button>\n                    </div>\n                    <p className=\"text-sm text-slate-500 mt-4\">\n                        <strong>Nota:</strong> Cambie a Producci贸n solo cuando est茅 listo para emitir documentos reales ante el SII.\n                    </p>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default SiiSettings;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3429, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/SettingsPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Settings, User, Shield, Save, Receipt } from 'lucide-react';\nimport SiiSettings from './settings/SiiSettings';\n\nconst SettingsPage: React.FC = () => {\n    const [activeTab, setActiveTab] = useState<'users' | 'sii'>('users');\n\n    return (\n        <div className=\"p-6 bg-slate-50 min-h-screen\">\n            <header className=\"mb-8\">\n                <h1 className=\"text-3xl font-extrabold text-slate-900\">Configuraci贸n</h1>\n                <p className=\"text-slate-500\">Administraci贸n del Sistema</p>\n            </header>\n\n            {/* Tabs */}\n            <div className=\"bg-white rounded-t-3xl shadow-sm border border-slate-200 overflow-hidden max-w-7xl\">\n                <div className=\"flex border-b border-slate-200\">\n                    <button\n                        onClick={() => setActiveTab('users')}\n                        className={`flex-1 py-4 px-6 font-bold transition-colors flex items-center justify-center gap-2 ${activeTab === 'users'\n                                ? 'bg-cyan-50 text-cyan-700 border-b-2 border-cyan-600'\n                                : 'text-slate-500 hover:bg-slate-50'\n                            }`}\n                    >\n                        <User size={20} />\n                        Gesti贸n de Usuarios\n                    </button>\n                    <button\n                        onClick={() => setActiveTab('sii')}\n                        className={`flex-1 py-4 px-6 font-bold transition-colors flex items-center justify-center gap-2 ${activeTab === 'sii'\n                                ? 'bg-green-50 text-green-700 border-b-2 border-green-600'\n                                : 'text-slate-500 hover:bg-slate-50'\n                            }`}\n                    >\n                        <Receipt size={20} />\n                        Conexi贸n SII\n                    </button>\n                </div>\n            </div>\n\n            {/* Tab Content */}\n            {activeTab === 'users' && (\n                <div className=\"bg-white rounded-b-3xl shadow-sm border border-t-0 border-slate-200 overflow-hidden max-w-7xl p-8\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n                        <div>\n                            <label className=\"block text-sm font-bold text-slate-700 mb-2\">Nombre Completo</label>\n                            <input\n                                type=\"text\"\n                                className=\"w-full p-3 border-2 border-slate-300 rounded-xl focus:border-cyan-600 focus:outline-none font-medium\"\n                                placeholder=\"Ej: Juan P茅rez\"\n                            />\n                        </div>\n                        <div>\n                            <label className=\"block text-sm font-bold text-slate-700 mb-2\">RUT</label>\n                            <input\n                                type=\"text\"\n                                className=\"w-full p-3 border-2 border-slate-300 rounded-xl focus:border-cyan-600 focus:outline-none font-medium\"\n                                placeholder=\"11.111.111-1\"\n                            />\n                        </div>\n                        <div>\n                            <label className=\"block text-sm font-bold text-slate-700 mb-2\">Rol</label>\n                            <select className=\"w-full p-3 border-2 border-slate-300 rounded-xl focus:border-cyan-600 focus:outline-none font-medium bg-white\">\n                                <option>Cajero/a</option>\n                                <option>Qu铆mico Farmac茅utico (QF)</option>\n                                <option>Administrador</option>\n                                <option>Bodega</option>\n                            </select>\n                        </div>\n                        <div>\n                            <label className=\"block text-sm font-bold text-slate-700 mb-2\">PIN de Acceso (4 d铆gitos)</label>\n                            <input\n                                type=\"password\"\n                                maxLength={4}\n                                className=\"w-full p-3 border-2 border-slate-300 rounded-xl focus:border-cyan-600 focus:outline-none font-medium tracking-widest\"\n                                placeholder=\"⑩⑩⑩\"\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"flex justify-end\">\n                        <button className=\"px-8 py-3 bg-cyan-600 text-white font-bold rounded-xl hover:bg-cyan-700 transition shadow-lg flex items-center gap-2\">\n                            <Save size={20} /> Guardar Usuario\n                        </button>\n                    </div>\n                </div>\n            )}\n\n            {activeTab === 'sii' && <SiiSettings />}\n        </div>\n    );\n};\n\nexport default SettingsPage;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;AACA;;;;;;AAEA,MAAM,eAAyB;;IAC3B,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAkB;IAE5D,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAO,WAAU;;kCACd,6LAAC;wBAAG,WAAU;kCAAyC;;;;;;kCACvD,6LAAC;wBAAE,WAAU;kCAAiB;;;;;;;;;;;;0BAIlC,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BACG,SAAS,IAAM,aAAa;4BAC5B,WAAW,CAAC,oFAAoF,EAAE,cAAc,UACtG,wDACA,oCACJ;;8CAEN,6LAAC,6MAAI;oCAAC,MAAM;;;;;;gCAAM;;;;;;;sCAGtB,6LAAC;4BACG,SAAS,IAAM,aAAa;4BAC5B,WAAW,CAAC,oFAAoF,EAAE,cAAc,QACtG,2DACA,oCACJ;;8CAEN,6LAAC,sNAAO;oCAAC,MAAM;;;;;;gCAAM;;;;;;;;;;;;;;;;;;YAOhC,cAAc,yBACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;;kDACG,6LAAC;wCAAM,WAAU;kDAA8C;;;;;;kDAC/D,6LAAC;wCACG,MAAK;wCACL,WAAU;wCACV,aAAY;;;;;;;;;;;;0CAGpB,6LAAC;;kDACG,6LAAC;wCAAM,WAAU;kDAA8C;;;;;;kDAC/D,6LAAC;wCACG,MAAK;wCACL,WAAU;wCACV,aAAY;;;;;;;;;;;;0CAGpB,6LAAC;;kDACG,6LAAC;wCAAM,WAAU;kDAA8C;;;;;;kDAC/D,6LAAC;wCAAO,WAAU;;0DACd,6LAAC;0DAAO;;;;;;0DACR,6LAAC;0DAAO;;;;;;0DACR,6LAAC;0DAAO;;;;;;0DACR,6LAAC;0DAAO;;;;;;;;;;;;;;;;;;0CAGhB,6LAAC;;kDACG,6LAAC;wCAAM,WAAU;kDAA8C;;;;;;kDAC/D,6LAAC;wCACG,MAAK;wCACL,WAAW;wCACX,WAAU;wCACV,aAAY;;;;;;;;;;;;;;;;;;kCAKxB,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC;4BAAO,WAAU;;8CACd,6LAAC,6MAAI;oCAAC,MAAM;;;;;;gCAAM;;;;;;;;;;;;;;;;;;YAMjC,cAAc,uBAAS,6LAAC,sKAAW;;;;;;;;;;;AAGhD;GAvFM;KAAA;uCAyFS"}},
    {"offset": {"line": 3722, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/ClientsPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { usePharmaStore } from '../store/useStore';\nimport { Search, User, MessageCircle, Star, Calendar } from 'lucide-react';\n\nconst ClientsPage: React.FC = () => {\n    const { customers } = usePharmaStore();\n    const [searchTerm, setSearchTerm] = useState('');\n\n    const filteredCustomers = customers.filter(c =>\n        c.fullName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        c.rut.includes(searchTerm) ||\n        (c.phone && c.phone.includes(searchTerm))\n    );\n\n    const openWhatsApp = (phone?: string) => {\n        if (!phone) return;\n        const cleanPhone = phone.replace(/[^0-9]/g, '');\n        window.open(`https://wa.me/${cleanPhone}`, '_blank');\n    };\n\n    return (\n        <div className=\"p-6 bg-slate-50 min-h-screen\">\n            <header className=\"mb-8 flex justify-between items-center\">\n                <div>\n                    <h1 className=\"text-3xl font-extrabold text-slate-900\">Directorio de Clientes</h1>\n                    <p className=\"text-slate-500\">CRM & Fidelizaci贸n</p>\n                </div>\n                <div className=\"bg-white p-4 rounded-2xl shadow-sm border border-slate-200 flex gap-4\">\n                    <div className=\"text-center\">\n                        <p className=\"text-xs font-bold text-slate-400 uppercase\">Total Clientes</p>\n                        <p className=\"text-2xl font-extrabold text-slate-900\">{customers.length}</p>\n                    </div>\n                    <div className=\"w-px bg-slate-200\" />\n                    <div className=\"text-center\">\n                        <p className=\"text-xs font-bold text-slate-400 uppercase\">Nuevos (Mes)</p>\n                        <p className=\"text-2xl font-extrabold text-emerald-600\">\n                            {customers.filter(c => new Date(c.lastVisit).getMonth() === new Date().getMonth()).length}\n                        </p>\n                    </div>\n                </div>\n            </header>\n\n            <div className=\"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden\">\n                <div className=\"p-6 border-b border-slate-100\">\n                    <div className=\"relative max-w-md\">\n                        <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400\" size={20} />\n                        <input\n                            type=\"text\"\n                            placeholder=\"Buscar por RUT, Nombre o Tel茅fono...\"\n                            className=\"w-full pl-12 pr-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl focus:border-cyan-500 focus:outline-none transition-colors font-medium\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                        />\n                    </div>\n                </div>\n\n                <div className=\"overflow-x-auto\">\n                    <table className=\"w-full text-left\">\n                        <thead className=\"bg-slate-50 text-slate-500 font-bold text-sm\">\n                            <tr>\n                                <th className=\"p-6\">Cliente</th>\n                                <th className=\"p-6\">Contacto</th>\n                                <th className=\"p-6\">Puntos</th>\n                                <th className=\"p-6\">Origen</th>\n                                <th className=\"p-6\">ltima Visita</th>\n                                <th className=\"p-6\">Acciones</th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"divide-y divide-slate-100\">\n                            {filteredCustomers.map(customer => (\n                                <tr key={customer.id} className=\"hover:bg-slate-50 transition\">\n                                    <td className=\"p-6\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold\">\n                                                {customer.fullName.charAt(0)}\n                                            </div>\n                                            <div>\n                                                <p className=\"font-bold text-slate-800\">{customer.fullName}</p>\n                                                <p className=\"text-xs text-slate-500 font-mono\">{customer.rut}</p>\n                                            </div>\n                                        </div>\n                                    </td>\n                                    <td className=\"p-6 text-slate-600\">\n                                        {customer.phone || '-'}\n                                    </td>\n                                    <td className=\"p-6\">\n                                        <div className=\"flex items-center gap-1 text-amber-600 font-bold\">\n                                            <Star size={16} fill=\"currentColor\" />\n                                            {customer.totalPoints}\n                                        </div>\n                                    </td>\n                                    <td className=\"p-6\">\n                                        <span className={`px-3 py-1 rounded-full text-xs font-bold border ${customer.registrationSource === 'KIOSK' ? 'bg-purple-50 text-purple-600 border-purple-200' :\n                                                customer.registrationSource === 'POS' ? 'bg-blue-50 text-blue-600 border-blue-200' :\n                                                    'bg-slate-100 text-slate-600 border-slate-200'\n                                            }`}>\n                                            {customer.registrationSource}\n                                        </span>\n                                    </td>\n                                    <td className=\"p-6 text-slate-500 text-sm\">\n                                        <div className=\"flex items-center gap-2\">\n                                            <Calendar size={14} />\n                                            {new Date(customer.lastVisit).toLocaleDateString()}\n                                        </div>\n                                    </td>\n                                    <td className=\"p-6\">\n                                        {customer.phone && (\n                                            <button\n                                                onClick={() => openWhatsApp(customer.phone)}\n                                                className=\"p-2 bg-emerald-100 text-emerald-600 rounded-lg hover:bg-emerald-200 transition\"\n                                                title=\"Abrir WhatsApp\"\n                                            >\n                                                <MessageCircle size={20} />\n                                            </button>\n                                        )}\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ClientsPage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4155, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/InventoryPage.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { usePharmaStore } from '../store/useStore';\nimport { Search, Filter, Plus, ArrowRightLeft, Package, AlertTriangle, Snowflake, Lock, Pill, Trash2, Edit } from 'lucide-react';\nimport StockEntryModal from '../components/inventory/StockEntryModal';\nimport StockTransferModal from '../components/inventory/StockTransferModal';\nimport { hasPermission } from '../../domain/security/roles';\n\nconst InventoryPage: React.FC = () => {\n    const { inventory, user } = usePharmaStore();\n    const [searchTerm, setSearchTerm] = useState('');\n    const [activeTab, setActiveTab] = useState<'MEDS' | 'RETAIL' | 'CONTROLLED'>('MEDS');\n    const [isEntryModalOpen, setIsEntryModalOpen] = useState(false);\n    const [isTransferModalOpen, setIsTransferModalOpen] = useState(false);\n\n    // Permissions\n    const canManageInventory = hasPermission(user, 'MANAGE_INVENTORY');\n    const canDelete = user?.role === 'MANAGER' || user?.role === 'ADMIN';\n\n    // Smart Filters\n    const [filters, setFilters] = useState({\n        coldChain: false,\n        expiring: false,\n        critical: false\n    });\n\n    const filteredInventory = useMemo(() => {\n        return inventory.filter(item => {\n            // 1. Text Search\n            const matchesSearch =\n                item.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                item.sku.includes(searchTerm) ||\n                item.dci.toLowerCase().includes(searchTerm.toLowerCase());\n\n            if (!matchesSearch) return false;\n\n            // 2. Tab Filter\n            if (activeTab === 'MEDS' && item.category !== 'MEDICAMENTO') return false;\n            if (activeTab === 'RETAIL' && item.category === 'MEDICAMENTO') return false;\n            if (activeTab === 'CONTROLLED' && !['R', 'RR', 'RCH'].includes(item.condition)) return false;\n\n            // 3. Smart Filters\n            if (filters.expiring) {\n                const monthsUntilExpiry = (item.expiry_date - Date.now()) / (1000 * 60 * 60 * 24 * 30);\n                if (monthsUntilExpiry > 6) return false;\n            }\n\n            if (filters.critical) {\n                if (item.stock_actual > item.stock_min) return false;\n            }\n\n            return true;\n        });\n    }, [inventory, searchTerm, activeTab, filters]);\n\n    const getStockStatus = (item: any) => {\n        if (item.stock_actual <= 0) return 'bg-red-100 text-red-700 border-red-200';\n        if (item.stock_actual <= item.stock_min) return 'bg-amber-100 text-amber-700 border-amber-200';\n        return 'bg-emerald-100 text-emerald-700 border-emerald-200';\n    };\n\n    return (\n        <div className=\"p-6 bg-slate-50 min-h-screen\">\n            {/* Header */}\n            <header className=\"mb-8 flex justify-between items-end\">\n                <div>\n                    <h1 className=\"text-3xl font-extrabold text-slate-900 flex items-center gap-3\">\n                        <Package className=\"text-cyan-600\" /> Maestro de Inventario\n                    </h1>\n                    <p className=\"text-slate-500 mt-1\">WMS & Control de Stock</p>\n                </div>\n                <div className=\"flex gap-3\">\n                    <button\n                        onClick={() => setIsTransferModalOpen(true)}\n                        className=\"px-6 py-3 bg-white text-slate-700 font-bold rounded-xl border border-slate-200 hover:bg-slate-50 transition flex items-center gap-2\"\n                    >\n                        <ArrowRightLeft size={18} /> Transferir\n                    </button>\n                    {canManageInventory && (\n                        <button\n                            onClick={() => setIsEntryModalOpen(true)}\n                            className=\"px-6 py-3 bg-cyan-600 text-white font-bold rounded-xl hover:bg-cyan-700 transition shadow-lg shadow-cyan-200 flex items-center gap-2\"\n                        >\n                            <Plus size={18} /> Ingreso / Alta\n                        </button>\n                    )}\n                </div>\n            </header>\n\n            {/* Tabs & Filters */}\n            <div className=\"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden mb-6\">\n                <div className=\"border-b border-slate-100 flex\">\n                    <button\n                        onClick={() => setActiveTab('MEDS')}\n                        className={`flex-1 py-4 text-sm font-bold border-b-2 transition-colors ${activeTab === 'MEDS' ? 'border-cyan-500 text-cyan-700 bg-cyan-50' : 'border-transparent text-slate-500 hover:text-slate-700'}`}\n                    >\n                         MEDICAMENTOS\n                    </button>\n                    <button\n                        onClick={() => setActiveTab('RETAIL')}\n                        className={`flex-1 py-4 text-sm font-bold border-b-2 transition-colors ${activeTab === 'RETAIL' ? 'border-pink-500 text-pink-700 bg-pink-50' : 'border-transparent text-slate-500 hover:text-slate-700'}`}\n                    >\n                        锔 RETAIL\n                    </button>\n                    <button\n                        onClick={() => setActiveTab('CONTROLLED')}\n                        className={`flex-1 py-4 text-sm font-bold border-b-2 transition-colors ${activeTab === 'CONTROLLED' ? 'border-purple-500 text-purple-700 bg-purple-50' : 'border-transparent text-slate-500 hover:text-slate-700'}`}\n                    >\n                         CONTROLADOS\n                    </button>\n                </div>\n\n                <div className=\"p-4 flex gap-4 items-center bg-slate-50/50\">\n                    <div className=\"relative flex-1\">\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\" size={18} />\n                        <input\n                            type=\"text\"\n                            placeholder=\"Buscar por SKU, Nombre, DCI...\"\n                            className=\"w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-xl focus:border-cyan-500 focus:outline-none\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                        />\n                    </div>\n                    <div className=\"flex gap-2\">\n                        <button\n                            onClick={() => setFilters(f => ({ ...f, expiring: !f.expiring }))}\n                            className={`px-3 py-2 rounded-lg text-xs font-bold border flex items-center gap-2 transition ${filters.expiring ? 'bg-amber-100 text-amber-700 border-amber-200' : 'bg-white text-slate-500 border-slate-200'}`}\n                        >\n                            <AlertTriangle size={14} /> Por Vencer\n                        </button>\n                        <button\n                            onClick={() => setFilters(f => ({ ...f, critical: !f.critical }))}\n                            className={`px-3 py-2 rounded-lg text-xs font-bold border flex items-center gap-2 transition ${filters.critical ? 'bg-red-100 text-red-700 border-red-200' : 'bg-white text-slate-500 border-slate-200'}`}\n                        >\n                            <Filter size={14} /> Stock Cr铆tico\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            {/* Data Grid */}\n            <div className=\"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden\">\n                <table className=\"w-full text-left\">\n                    <thead className=\"bg-slate-50 text-slate-500 font-bold text-xs uppercase tracking-wider\">\n                        <tr>\n                            <th className=\"p-4\">Producto</th>\n                            <th className=\"p-4\">Condici贸n</th>\n                            <th className=\"p-4\">Ubicaci贸n</th>\n                            <th className=\"p-4\">Vencimiento</th>\n                            <th className=\"p-4 text-right\">Stock</th>\n                            <th className=\"p-4 text-right\">Precio</th>\n                            <th className=\"p-4 text-center\">Acciones</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-slate-100 text-sm\">\n                        {filteredInventory.map(item => (\n                            <tr key={item.id} className=\"hover:bg-slate-50 transition group\">\n                                <td className=\"p-4\">\n                                    <div className=\"font-bold text-slate-800\">{item.name}</div>\n                                    <div className=\"text-xs text-slate-500 font-mono\">{item.sku}  {item.dci}</div>\n                                </td>\n                                <td className=\"p-4\">\n                                    <div className=\"flex gap-1\">\n                                        {item.is_bioequivalent && <span title=\"Bioequivalente\" className=\"p-1 bg-yellow-100 text-yellow-700 rounded\"><Pill size={14} /></span>}\n                                        {['R', 'RR', 'RCH'].includes(item.condition) && <span title=\"Receta Retenida\" className=\"p-1 bg-purple-100 text-purple-700 rounded\"><Lock size={14} /></span>}\n                                    </div>\n                                </td>\n                                <td className=\"p-4 text-slate-600\">\n                                    <span className=\"px-2 py-1 bg-slate-100 rounded text-xs font-bold\">{item.location_id}</span>\n                                </td>\n                                <td className=\"p-4\">\n                                    <span className={`${(item.expiry_date - Date.now()) < (1000 * 60 * 60 * 24 * 30 * 3) ? 'text-red-600 font-bold' : 'text-slate-600'}`}>\n                                        {new Date(item.expiry_date).toLocaleDateString()}\n                                    </span>\n                                </td>\n                                <td className=\"p-4 text-right\">\n                                    <span className={`px-2 py-1 rounded text-xs font-bold border ${getStockStatus(item)}`}>\n                                        {item.stock_actual} un.\n                                    </span>\n                                </td>\n                                <td className=\"p-4 text-right font-mono font-bold text-slate-700\">\n                                    ${item.price.toLocaleString()}\n                                </td>\n                                <td className=\"p-4\">\n                                    <div className=\"flex items-center justify-center gap-2\">\n                                        {canManageInventory && (\n                                            <button className=\"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\">\n                                                <Edit size={16} />\n                                            </button>\n                                        )}\n                                        {canDelete && (\n                                            <button className=\"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\">\n                                                <Trash2 size={16} />\n                                            </button>\n                                        )}\n                                    </div>\n                                </td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n                {filteredInventory.length === 0 && (\n                    <div className=\"p-12 text-center text-slate-400\">\n                        <Package size={48} className=\"mx-auto mb-4 opacity-50\" />\n                        <p>No se encontraron productos con los filtros actuales.</p>\n                    </div>\n                )}\n            </div>\n\n            {/* Modals */}\n            <StockEntryModal isOpen={isEntryModalOpen} onClose={() => setIsEntryModalOpen(false)} />\n            <StockTransferModal isOpen={isTransferModalOpen} onClose={() => setIsTransferModalOpen(false)} />\n        </div>\n    );\n};\n\nexport default InventoryPage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4810, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/ReportsPage.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { usePharmaStore } from '../store/useStore';\nimport { FinancialService } from '../../domain/analytics/FinancialService';\nimport {\n    BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer,\n    PieChart, Pie, Cell, LineChart, Line, ComposedChart, Area\n} from 'recharts';\nimport { Download, Calendar, DollarSign, Users, Package, FileText, TrendingUp, AlertTriangle } from 'lucide-react';\nimport * as XLSX from 'xlsx';\nimport { format } from 'date-fns';\nimport { es } from 'date-fns/locale';\n\n// --- Components ---\n\nconst KPICard = ({ title, value, subtext, icon: Icon, color }: any) => (\n    <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-start justify-between\">\n        <div>\n            <p className=\"text-sm font-medium text-gray-500 mb-1\">{title}</p>\n            <h3 className=\"text-2xl font-bold text-gray-900\">{value}</h3>\n            {subtext && <p className={`text-xs mt-2 ${color === 'red' ? 'text-red-500' : 'text-green-500'}`}>{subtext}</p>}\n        </div>\n        <div className={`p-3 rounded-xl ${color === 'blue' ? 'bg-blue-50 text-blue-600' : color === 'green' ? 'bg-green-50 text-green-600' : 'bg-purple-50 text-purple-600'}`}>\n            <Icon size={24} />\n        </div>\n    </div>\n);\n\nconst ReportsPage: React.FC = () => {\n    const { salesHistory, expenses, employees, inventory } = usePharmaStore();\n    const [dateRange, setDateRange] = useState<{ start: Date, end: Date, label: string }>({\n        start: new Date(new Date().setHours(0, 0, 0, 0)),\n        end: new Date(new Date().setHours(23, 59, 59, 999)),\n        label: 'Hoy'\n    });\n    const [activeTab, setActiveTab] = useState<'FINANCE' | 'TAX' | 'HR' | 'INVENTORY'>('FINANCE');\n\n    // --- Data Aggregation ---\n    const filteredSales = useMemo(() => FinancialService.filterByDateRange(salesHistory, dateRange.start, dateRange.end), [salesHistory, dateRange]);\n    const filteredExpenses = useMemo(() => FinancialService.filterByDateRange(expenses, dateRange.start, dateRange.end), [expenses, dateRange]);\n\n    const salesSummary = useMemo(() => FinancialService.getSalesSummary(filteredSales), [filteredSales]);\n    const expensesSummary = useMemo(() => FinancialService.getExpensesSummary(filteredExpenses), [filteredExpenses]);\n    const taxData = useMemo(() => FinancialService.getTaxCompliance(filteredSales, filteredExpenses), [filteredSales, filteredExpenses]);\n    const laborData = useMemo(() => FinancialService.getLaborCosts(employees), [employees]);\n\n    // --- Charts Data ---\n    const paymentMethodsData = Object.entries(salesSummary.paymentMethods).map(([name, value]) => ({ name, value }));\n    const expensesByCategoryData = Object.entries(expensesSummary.byCategory).map(([name, value]) => ({ name, value }));\n    const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884d8'];\n\n    // --- Handlers ---\n    const handlePresetChange = (preset: string) => {\n        const now = new Date();\n        let start = new Date();\n        let end = new Date();\n\n        switch (preset) {\n            case 'HOY':\n                start.setHours(0, 0, 0, 0);\n                end.setHours(23, 59, 59, 999);\n                break;\n            case 'AYER':\n                start.setDate(now.getDate() - 1);\n                start.setHours(0, 0, 0, 0);\n                end.setDate(now.getDate() - 1);\n                end.setHours(23, 59, 59, 999);\n                break;\n            case 'ESTA_SEMANA':\n                const day = now.getDay() || 7;\n                if (day !== 1) start.setHours(-24 * (day - 1));\n                start.setHours(0, 0, 0, 0);\n                end.setHours(23, 59, 59, 999);\n                break;\n            case 'ESTE_MES':\n                start = new Date(now.getFullYear(), now.getMonth(), 1);\n                end = new Date(now.getFullYear(), now.getMonth() + 1, 0, 23, 59, 59);\n                break;\n        }\n        setDateRange({ start, end, label: preset });\n    };\n\n    const handleDownloadReport = () => {\n        const wb = XLSX.utils.book_new();\n\n        // 1. Libro Ventas\n        const salesSheet = XLSX.utils.json_to_sheet(filteredSales.map(s => ({\n            ID: s.id,\n            Fecha: new Date(s.timestamp).toLocaleString(),\n            Total: s.total,\n            Metodo: s.payment_method,\n            Vendedor: s.seller_id\n        })));\n        XLSX.utils.book_append_sheet(wb, salesSheet, \"Libro Ventas\");\n\n        // 2. Libro Compras (Gastos)\n        const expensesSheet = XLSX.utils.json_to_sheet(filteredExpenses.map(e => ({\n            Descripcion: e.description,\n            Monto: e.amount,\n            Categoria: e.category,\n            Fecha: new Date(e.date).toLocaleDateString(),\n            Deducible: e.is_deductible ? 'SI' : 'NO',\n            Documento: e.document_type\n        })));\n        XLSX.utils.book_append_sheet(wb, expensesSheet, \"Gastos & Compras\");\n\n        // 3. Resumen\n        const summaryData = [\n            { Concepto: 'Ventas Brutas', Valor: salesSummary.grossSales },\n            { Concepto: 'Ventas Netas', Valor: salesSummary.netSales },\n            { Concepto: 'Gastos Totales', Valor: expensesSummary.totalExpenses },\n            { Concepto: 'IVA D茅bito', Valor: taxData.debitFiscal },\n            { Concepto: 'IVA Cr茅dito', Valor: taxData.creditFiscal },\n            { Concepto: 'A Pagar (Estimado)', Valor: taxData.ivaToPay }\n        ];\n        const summarySheet = XLSX.utils.json_to_sheet(summaryData);\n        XLSX.utils.book_append_sheet(wb, summarySheet, \"Resumen Financiero\");\n\n        XLSX.writeFile(wb, `Reporte_Farmacia_${format(new Date(), 'yyyy-MM-dd')}.xlsx`);\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gray-50 p-8 font-sans text-gray-800\">\n            {/* --- Header & Controls --- */}\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4\">\n                <div>\n                    <h1 className=\"text-3xl font-bold text-gray-900 tracking-tight\">Centro de Inteligencia (BI)</h1>\n                    <p className=\"text-gray-500 mt-1\">Visi贸n estrat茅gica y control financiero total.</p>\n                </div>\n\n                <div className=\"flex items-center gap-3 bg-white p-1.5 rounded-xl shadow-sm border border-gray-200\">\n                    {['HOY', 'AYER', 'ESTA_SEMANA', 'ESTE_MES'].map(preset => (\n                        <button\n                            key={preset}\n                            onClick={() => handlePresetChange(preset)}\n                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${dateRange.label === preset\n                                    ? 'bg-blue-600 text-white shadow-md'\n                                    : 'text-gray-600 hover:bg-gray-100'\n                                }`}\n                        >\n                            {preset.replace('_', ' ')}\n                        </button>\n                    ))}\n                    <div className=\"h-6 w-px bg-gray-300 mx-1\"></div>\n                    <button className=\"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm font-medium\">\n                        <Calendar size={16} />\n                        <span>Personalizado</span>\n                    </button>\n                </div>\n\n                <button\n                    onClick={handleDownloadReport}\n                    className=\"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-xl shadow-lg shadow-green-200 transition-all transform hover:-translate-y-0.5 font-semibold\"\n                >\n                    <Download size={20} />\n                    <span>Descargar Pack Mensual</span>\n                </button>\n            </div>\n\n            {/* --- Tabs --- */}\n            <div className=\"flex gap-6 border-b border-gray-200 mb-8\">\n                {[\n                    { id: 'FINANCE', label: 'Finanzas & Cashflow', icon: DollarSign },\n                    { id: 'TAX', label: 'Cumplimiento Tributario', icon: FileText },\n                    { id: 'HR', label: 'RR.HH. & Dotaci贸n', icon: Users },\n                    { id: 'INVENTORY', label: 'Movimientos Bodega', icon: Package },\n                ].map(tab => (\n                    <button\n                        key={tab.id}\n                        onClick={() => setActiveTab(tab.id as any)}\n                        className={`flex items-center gap-2 pb-4 px-2 text-sm font-semibold transition-all relative ${activeTab === tab.id ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'\n                            }`}\n                    >\n                        <tab.icon size={18} />\n                        {tab.label}\n                        {activeTab === tab.id && (\n                            <div className=\"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full\" />\n                        )}\n                    </button>\n                ))}\n            </div>\n\n            {/* --- Content --- */}\n            <div className=\"space-y-8\">\n\n                {/* 1. FINANCE TAB */}\n                {activeTab === 'FINANCE' && (\n                    <>\n                        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n                            <KPICard\n                                title=\"Ventas Brutas\"\n                                value={`$${salesSummary.grossSales.toLocaleString()}`}\n                                subtext={`${filteredSales.length} transacciones`}\n                                icon={TrendingUp}\n                                color=\"blue\"\n                            />\n                            <KPICard\n                                title=\"Ventas Netas\"\n                                value={`$${salesSummary.netSales.toLocaleString()}`}\n                                subtext=\"Excluye IVA\"\n                                icon={DollarSign}\n                                color=\"green\"\n                            />\n                            <KPICard\n                                title=\"Gastos Totales\"\n                                value={`$${expensesSummary.totalExpenses.toLocaleString()}`}\n                                subtext=\"Operativos + RRHH\"\n                                icon={AlertTriangle}\n                                color=\"red\"\n                            />\n                            <KPICard\n                                title=\"EBITDA (Est.)\"\n                                value={`$${(salesSummary.netSales - expensesSummary.totalExpenses).toLocaleString()}`}\n                                subtext=\"Margen Operativo\"\n                                icon={TrendingUp}\n                                color=\"purple\"\n                            />\n                        </div>\n\n                        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                            {/* Income Breakdown */}\n                            <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\n                                <h3 className=\"text-lg font-bold text-gray-900 mb-6\">Desglose de Ingresos</h3>\n                                <div className=\"h-80\">\n                                    <ResponsiveContainer width=\"100%\" height=\"100%\">\n                                        <PieChart>\n                                            <Pie\n                                                data={paymentMethodsData}\n                                                cx=\"50%\"\n                                                cy=\"50%\"\n                                                innerRadius={60}\n                                                outerRadius={100}\n                                                fill=\"#8884d8\"\n                                                paddingAngle={5}\n                                                dataKey=\"value\"\n                                            >\n                                                {paymentMethodsData.map((entry, index) => (\n                                                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                                                ))}\n                                            </Pie>\n                                            <Tooltip formatter={(value: number) => `$${value.toLocaleString()}`} />\n                                            <Legend />\n                                        </PieChart>\n                                    </ResponsiveContainer>\n                                </div>\n                            </div>\n\n                            {/* Expenses Breakdown */}\n                            <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\n                                <h3 className=\"text-lg font-bold text-gray-900 mb-6\">Estructura de Gastos</h3>\n                                <div className=\"h-80\">\n                                    <ResponsiveContainer width=\"100%\" height=\"100%\">\n                                        <BarChart data={expensesByCategoryData} layout=\"vertical\">\n                                            <CartesianGrid strokeDasharray=\"3 3\" horizontal={false} />\n                                            <XAxis type=\"number\" hide />\n                                            <YAxis dataKey=\"name\" type=\"category\" width={100} tick={{ fontSize: 12 }} />\n                                            <Tooltip formatter={(value: number) => `$${value.toLocaleString()}`} />\n                                            <Bar dataKey=\"value\" fill=\"#FF8042\" radius={[0, 4, 4, 0]} barSize={30} />\n                                        </BarChart>\n                                    </ResponsiveContainer>\n                                </div>\n                            </div>\n                        </div>\n                    </>\n                )}\n\n                {/* 2. TAX TAB */}\n                {activeTab === 'TAX' && (\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                        <div className=\"lg:col-span-2 bg-white p-8 rounded-2xl shadow-sm border border-gray-100\">\n                            <h3 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\n                                <FileText className=\"text-blue-600\" />\n                                Simulador F29 (IVA)\n                            </h3>\n\n                            <div className=\"space-y-6\">\n                                <div className=\"flex justify-between items-center p-4 bg-green-50 rounded-xl border border-green-100\">\n                                    <div>\n                                        <p className=\"text-sm font-medium text-green-800\">D茅bito Fiscal (IVA Ventas)</p>\n                                        <p className=\"text-xs text-green-600\">Generado por ventas con boleta/factura</p>\n                                    </div>\n                                    <span className=\"text-2xl font-bold text-green-700\">+ ${taxData.debitFiscal.toLocaleString()}</span>\n                                </div>\n\n                                <div className=\"flex justify-between items-center p-4 bg-red-50 rounded-xl border border-red-100\">\n                                    <div>\n                                        <p className=\"text-sm font-medium text-red-800\">Cr茅dito Fiscal (IVA Compras)</p>\n                                        <p className=\"text-xs text-red-600\">Solo compras con FACTURA</p>\n                                    </div>\n                                    <span className=\"text-2xl font-bold text-red-700\">- ${taxData.creditFiscal.toLocaleString()}</span>\n                                </div>\n\n                                <div className=\"h-px bg-gray-200 my-4\"></div>\n\n                                <div className=\"flex justify-between items-center p-6 bg-gray-900 rounded-xl text-white shadow-lg\">\n                                    <div>\n                                        <p className=\"text-sm font-medium text-gray-400\">IVA a Pagar (Estimado)</p>\n                                        <p className=\"text-xs text-gray-500\">A pagar el d铆a 20 del mes siguiente</p>\n                                    </div>\n                                    <span className=\"text-4xl font-bold\">${taxData.ivaToPay.toLocaleString()}</span>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"space-y-6\">\n                            <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\n                                <h3 className=\"text-lg font-bold text-gray-900 mb-4\">PPM Estimado</h3>\n                                <p className=\"text-sm text-gray-500 mb-4\">Pago Provisional Mensual (1.5% Ventas Netas)</p>\n                                <div className=\"text-3xl font-bold text-blue-600 mb-2\">${taxData.ppm.toLocaleString()}</div>\n                                <div className=\"w-full bg-gray-100 rounded-full h-2\">\n                                    <div className=\"bg-blue-600 h-2 rounded-full\" style={{ width: '15%' }}></div>\n                                </div>\n                            </div>\n\n                            <div className=\"bg-orange-50 p-6 rounded-2xl border border-orange-100\">\n                                <div className=\"flex items-start gap-3\">\n                                    <AlertTriangle className=\"text-orange-600 shrink-0\" />\n                                    <div>\n                                        <h4 className=\"font-bold text-orange-800\">Alerta de Gastos No Deducibles</h4>\n                                        <p className=\"text-sm text-orange-700 mt-1\">\n                                            Tienes <strong>${taxData.nonDeductibleWarning.toLocaleString()}</strong> en gastos sin respaldo tributario (boletas o sin documento). Esto aumenta tu base imponible artificialmente.\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {/* 3. HR TAB */}\n                {activeTab === 'HR' && (\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\n                            <h3 className=\"text-lg font-bold text-gray-900 mb-6\">Costo Empresa Real</h3>\n                            <div className=\"space-y-4\">\n                                <div className=\"flex justify-between items-center\">\n                                    <span className=\"text-gray-600\">Sueldos L铆quidos + Retenciones</span>\n                                    <span className=\"font-semibold\">${laborData.totalSalaries.toLocaleString()}</span>\n                                </div>\n                                <div className=\"flex justify-between items-center\">\n                                    <span className=\"text-gray-600\">Aporte Patronal (SIS, Cesant铆a, Mutual)</span>\n                                    <span className=\"font-semibold text-red-600\">+ ${laborData.totalSocialLaws.toLocaleString()}</span>\n                                </div>\n                                <div className=\"h-px bg-gray-200\"></div>\n                                <div className=\"flex justify-between items-center text-lg font-bold\">\n                                    <span>Costo Total N贸mina</span>\n                                    <span>${laborData.totalCost.toLocaleString()}</span>\n                                </div>\n                            </div>\n                            <div className=\"mt-6 p-4 bg-blue-50 rounded-xl text-sm text-blue-700\">\n                                 El costo real de tu equipo es un <strong>~22%</strong> mayor a la suma de los sueldos imponibles.\n                            </div>\n                        </div>\n\n                        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\n                            <h3 className=\"text-lg font-bold text-gray-900 mb-6\">Dotaci贸n Activa</h3>\n                            <div className=\"space-y-4\">\n                                {employees.map(emp => (\n                                    <div key={emp.id} className=\"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <div className=\"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 font-bold\">\n                                                {emp.name.charAt(0)}\n                                            </div>\n                                            <div>\n                                                <p className=\"font-medium text-gray-900\">{emp.name}</p>\n                                                <p className=\"text-xs text-gray-500\">{emp.role}</p>\n                                            </div>\n                                        </div>\n                                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${emp.status === 'ACTIVE' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\n                                            {emp.status}\n                                        </span>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {/* 4. INVENTORY TAB */}\n                {activeTab === 'INVENTORY' && (\n                    <div className=\"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 text-center py-20\">\n                        <Package size={64} className=\"mx-auto text-gray-300 mb-4\" />\n                        <h3 className=\"text-xl font-bold text-gray-900\">An谩lisis de Inventario en Desarrollo</h3>\n                        <p className=\"text-gray-500 mt-2 max-w-md mx-auto\">\n                            Pr贸ximamente podr谩s ver el balance de masas, rotaci贸n de stock y an谩lisis de mermas detallado aqu铆.\n                        </p>\n                    </div>\n                )}\n\n            </div>\n        </div>\n    );\n};\n\nexport default ReportsPage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6041, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/AttendanceKioskPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { usePharmaStore } from '../store/useStore';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Lock, User, Clock, Fingerprint, LogOut, CheckCircle, AlertTriangle, Coffee, ArrowRight } from 'lucide-react';\nimport { WebAuthnService } from '../../infrastructure/biometrics/WebAuthnService';\nimport { EmployeeProfile, AttendanceStatus } from '../../domain/types';\n\nconst AttendanceKioskPage: React.FC = () => {\n    const { employees, registerAttendance, user } = usePharmaStore();\n    const [isLocked, setIsLocked] = useState(true);\n    const [selectedEmployee, setSelectedEmployee] = useState<EmployeeProfile | null>(null);\n    const [authMethod, setAuthMethod] = useState<'PIN' | 'BIOMETRIC' | null>(null);\n    const [pin, setPin] = useState('');\n    const [message, setMessage] = useState<{ text: string, type: 'success' | 'error' } | null>(null);\n\n    // --- Activation Logic ---\n    const handleUnlock = () => {\n        const password = prompt(\"Ingrese contrase帽a de GERENTE para activar el Kiosco:\");\n        if (password === 'admin123') { // Hardcoded for demo\n            setIsLocked(false);\n        } else {\n            alert(\"Contrase帽a incorrecta\");\n        }\n    };\n\n    // --- Authentication Logic ---\n    const handlePinSubmit = () => {\n        if (!selectedEmployee) return;\n        if (pin === selectedEmployee.access_pin) {\n            handleAttendanceAction();\n        } else {\n            setMessage({ text: 'PIN Incorrecto', type: 'error' });\n            setPin('');\n        }\n    };\n\n    const handleBiometricAuth = async () => {\n        if (!selectedEmployee) return;\n        setMessage({ text: 'Coloque su dedo en el sensor...', type: 'success' });\n\n        const result = await WebAuthnService.verifyCredential(selectedEmployee.id);\n        if (result.success) {\n            handleAttendanceAction();\n        } else {\n            setMessage({ text: result.message, type: 'error' });\n        }\n    };\n\n    const handleAttendanceAction = () => {\n        if (!selectedEmployee) return;\n\n        let action: 'CHECK_IN' | 'CHECK_OUT' | 'LUNCH_START' | 'LUNCH_END' = 'CHECK_IN';\n        const status = selectedEmployee.current_status || 'OUT';\n\n        // Determine next logical action\n        if (status === 'OUT') action = 'CHECK_IN';\n        if (status === 'IN') {\n            // Ask user preference in a real app, here we toggle for simplicity or show options\n            // For this MVP, if IN, we show options in the UI before this function is called, \n            // BUT since we are inside the auth flow, let's assume we need to know what they want to do.\n            // Let's simplify: If IN, default to CHECK_OUT, but we should probably have selected the action BEFORE auth.\n            // REFACTOR: Let's select action AFTER auth for security, or select action THEN auth.\n            // Standard Kiosk: Select User -> Auth -> Select Action (if multiple available) or Auto-Action.\n        }\n\n        // Since we need to support multiple actions from IN state (Lunch vs Out), \n        // we will show an Action Selection screen AFTER successful auth.\n        setAuthMethod(null); // Close auth modal\n        // We need a new state for \"Authenticated Employee\"\n    };\n\n    // Refactored Flow:\n    // 1. Select Employee\n    // 2. Authenticate (PIN/Bio)\n    // 3. Show Actions based on current status\n\n    const [authenticatedEmployee, setAuthenticatedEmployee] = useState<EmployeeProfile | null>(null);\n\n    const onAuthSuccess = () => {\n        setAuthenticatedEmployee(selectedEmployee);\n        setSelectedEmployee(null);\n        setAuthMethod(null);\n        setPin('');\n        setMessage(null);\n    };\n\n    const processAction = (type: 'CHECK_IN' | 'CHECK_OUT' | 'LUNCH_START' | 'LUNCH_END') => {\n        if (!authenticatedEmployee) return;\n        registerAttendance(authenticatedEmployee.id, type);\n\n        setMessage({ text: `Marcaje registrado: ${type}`, type: 'success' });\n\n        setTimeout(() => {\n            setAuthenticatedEmployee(null);\n            setMessage(null);\n        }, 3000);\n    };\n\n    // --- Renders ---\n\n    if (isLocked) {\n        return (\n            <div className=\"min-h-screen bg-slate-900 flex flex-col items-center justify-center text-white p-4\">\n                <Lock size={64} className=\"mb-6 text-slate-500\" />\n                <h1 className=\"text-3xl font-bold mb-2\">Terminal Bloqueado</h1>\n                <p className=\"text-slate-400 mb-8 text-center max-w-md\">\n                    Este dispositivo no est谩 activo como Kiosco de Asistencia.\n                    Se requiere autorizaci贸n de un Gerente para activarlo.\n                </p>\n                <button\n                    onClick={handleUnlock}\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-xl font-bold transition-all\"\n                >\n                    Activar Terminal\n                </button>\n            </div>\n        );\n    }\n\n    if (authenticatedEmployee) {\n        return (\n            <div className=\"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4\">\n                <div className=\"bg-white p-8 rounded-3xl shadow-xl max-w-lg w-full text-center\">\n                    <div className=\"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-600 font-bold text-3xl\">\n                        {authenticatedEmployee.name.charAt(0)}\n                    </div>\n                    <h2 className=\"text-2xl font-bold text-slate-800 mb-1\">Hola, {authenticatedEmployee.name}</h2>\n                    <p className=\"text-slate-500 mb-8\">Selecciona tu marcaje</p>\n\n                    <div className=\"grid gap-4\">\n                        {authenticatedEmployee.current_status === 'OUT' && (\n                            <button\n                                onClick={() => processAction('CHECK_IN')}\n                                className=\"bg-green-500 hover:bg-green-600 text-white p-6 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all\"\n                            >\n                                <LogOut className=\"rotate-180\" /> ENTRADA\n                            </button>\n                        )}\n\n                        {(authenticatedEmployee.current_status === 'IN' || authenticatedEmployee.current_status === 'LUNCH') && (\n                            <>\n                                {authenticatedEmployee.current_status === 'IN' && (\n                                    <button\n                                        onClick={() => processAction('LUNCH_START')}\n                                        className=\"bg-amber-500 hover:bg-amber-600 text-white p-6 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all\"\n                                    >\n                                        <Coffee /> SALIDA A COLACIN\n                                    </button>\n                                )}\n\n                                {authenticatedEmployee.current_status === 'LUNCH' && (\n                                    <button\n                                        onClick={() => processAction('LUNCH_END')}\n                                        className=\"bg-blue-500 hover:bg-blue-600 text-white p-6 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all\"\n                                    >\n                                        <ArrowRight /> VUELTA DE COLACIN\n                                    </button>\n                                )}\n\n                                {authenticatedEmployee.current_status === 'IN' && (\n                                    <button\n                                        onClick={() => processAction('CHECK_OUT')}\n                                        className=\"bg-red-500 hover:bg-red-600 text-white p-6 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all\"\n                                    >\n                                        <LogOut /> FIN DE JORNADA\n                                    </button>\n                                )}\n                            </>\n                        )}\n                    </div>\n\n                    <button\n                        onClick={() => setAuthenticatedEmployee(null)}\n                        className=\"mt-8 text-slate-400 hover:text-slate-600 font-medium\"\n                    >\n                        Cancelar\n                    </button>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-slate-100 flex flex-col\">\n            {/* Header */}\n            <div className=\"bg-white p-6 shadow-sm flex justify-between items-center\">\n                <div className=\"flex items-center gap-3\">\n                    <Clock className=\"text-blue-600\" size={32} />\n                    <div>\n                        <h1 className=\"text-xl font-bold text-slate-800\">Control de Asistencia</h1>\n                        <p className=\"text-sm text-slate-500\">{new Date().toLocaleDateString()} - {new Date().toLocaleTimeString()}</p>\n                    </div>\n                </div>\n                <button onClick={() => setIsLocked(true)} className=\"text-slate-400 hover:text-red-500\">\n                    <Lock size={20} />\n                </button>\n            </div>\n\n            {/* Employee Grid */}\n            <div className=\"flex-1 p-6 overflow-y-auto\">\n                <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n                    {employees.map(emp => (\n                        <motion.button\n                            key={emp.id}\n                            whileHover={{ scale: 1.02 }}\n                            whileTap={{ scale: 0.98 }}\n                            onClick={() => { setSelectedEmployee(emp); setAuthMethod('BIOMETRIC'); }}\n                            className=\"bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-all flex flex-col items-center text-center relative overflow-hidden\"\n                        >\n                            {/* Status Indicator */}\n                            <div className={`absolute top-4 right-4 w-4 h-4 rounded-full ${emp.current_status === 'IN' ? 'bg-green-500 animate-pulse' :\n                                    emp.current_status === 'LUNCH' ? 'bg-amber-500' : 'bg-slate-300'\n                                }`} />\n\n                            <div className=\"w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mb-4 text-slate-500 font-bold text-2xl\">\n                                {emp.name.charAt(0)}\n                            </div>\n                            <h3 className=\"font-bold text-slate-800 text-lg\">{emp.name}</h3>\n                            <p className=\"text-sm text-slate-500\">{emp.role}</p>\n                            <span className={`mt-3 px-3 py-1 rounded-full text-xs font-bold ${emp.current_status === 'IN' ? 'bg-green-100 text-green-700' :\n                                    emp.current_status === 'LUNCH' ? 'bg-amber-100 text-amber-700' : 'bg-slate-100 text-slate-500'\n                                }`}>\n                                {emp.current_status === 'IN' ? 'TRABAJANDO' :\n                                    emp.current_status === 'LUNCH' ? 'EN COLACIN' : 'FUERA'}\n                            </span>\n                        </motion.button>\n                    ))}\n                </div>\n            </div>\n\n            {/* Auth Modal */}\n            <AnimatePresence>\n                {selectedEmployee && authMethod && (\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0 }}\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n                    >\n                        <motion.div\n                            initial={{ scale: 0.9 }}\n                            animate={{ scale: 1 }}\n                            exit={{ scale: 0.9 }}\n                            className=\"bg-white rounded-3xl p-8 max-w-md w-full relative\"\n                        >\n                            <button\n                                onClick={() => { setSelectedEmployee(null); setAuthMethod(null); setPin(''); setMessage(null); }}\n                                className=\"absolute top-4 right-4 text-slate-400 hover:text-slate-600\"\n                            >\n                                <LogOut size={24} />\n                            </button>\n\n                            <div className=\"text-center mb-8\">\n                                <div className=\"w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-600 font-bold text-2xl\">\n                                    {selectedEmployee.name.charAt(0)}\n                                </div>\n                                <h3 className=\"text-xl font-bold text-slate-800\">Hola, {selectedEmployee.name}</h3>\n                                <p className=\"text-slate-500\">Verifica tu identidad para continuar</p>\n                            </div>\n\n                            {message && (\n                                <div className={`mb-6 p-4 rounded-xl text-center font-bold ${message.type === 'success' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'\n                                    }`}>\n                                    {message.text}\n                                </div>\n                            )}\n\n                            {authMethod === 'BIOMETRIC' ? (\n                                <div className=\"space-y-6\">\n                                    <button\n                                        onClick={handleBiometricAuth}\n                                        className=\"w-full py-8 border-2 border-dashed border-blue-300 bg-blue-50 rounded-2xl flex flex-col items-center gap-3 hover:bg-blue-100 transition-colors group\"\n                                    >\n                                        <Fingerprint size={48} className=\"text-blue-500 group-hover:scale-110 transition-transform\" />\n                                        <span className=\"font-bold text-blue-700\">Tocar Sensor de Huella</span>\n                                    </button>\n\n                                    <div className=\"relative\">\n                                        <div className=\"absolute inset-0 flex items-center\"><div className=\"w-full border-t border-slate-200\"></div></div>\n                                        <div className=\"relative flex justify-center text-sm\"><span className=\"px-2 bg-white text-slate-500\">O usa tu PIN</span></div>\n                                    </div>\n\n                                    <button\n                                        onClick={() => setAuthMethod('PIN')}\n                                        className=\"w-full py-3 text-slate-600 font-bold hover:bg-slate-50 rounded-xl transition-colors\"\n                                    >\n                                        Ingresar PIN Manualmente\n                                    </button>\n                                </div>\n                            ) : (\n                                <div className=\"space-y-6\">\n                                    <div>\n                                        <label className=\"block text-sm font-bold text-slate-700 mb-2\">Ingresa tu PIN de 4 d铆gitos</label>\n                                        <input\n                                            type=\"password\"\n                                            maxLength={4}\n                                            value={pin}\n                                            onChange={(e) => setPin(e.target.value)}\n                                            className=\"w-full text-center text-4xl tracking-widest font-bold py-4 border-2 border-slate-200 rounded-xl focus:border-blue-500 outline-none\"\n                                            placeholder=\"⑩⑩⑩\"\n                                            autoFocus\n                                        />\n                                    </div>\n                                    <button\n                                        onClick={() => {\n                                            if (pin === selectedEmployee.access_pin) {\n                                                onAuthSuccess();\n                                            } else {\n                                                setMessage({ text: 'PIN Incorrecto', type: 'error' });\n                                                setPin('');\n                                            }\n                                        }}\n                                        className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-xl font-bold shadow-lg shadow-blue-200 transition-all\"\n                                    >\n                                        Confirmar PIN\n                                    </button>\n                                    <button\n                                        onClick={() => setAuthMethod('BIOMETRIC')}\n                                        className=\"w-full py-3 text-slate-600 font-bold hover:bg-slate-50 rounded-xl transition-colors\"\n                                    >\n                                        Volver a Huella Digital\n                                    </button>\n                                </div>\n                            )}\n                        </motion.div>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n        </div>\n    );\n};\n\nexport default AttendanceKioskPage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6749, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/WarehouseOps.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { usePharmaStore } from '../store/useStore';\nimport { Package, Truck, ArrowRight, CheckCircle, AlertTriangle, Search, Filter, FileText, Camera } from 'lucide-react';\nimport { StockTransfer, WarehouseIncident } from '../../domain/types';\n\nexport const WarehouseOps = () => {\n    const {\n        inventory,\n        stockTransfers,\n        dispatchTransfer,\n        receiveTransfer,\n        suppliers,\n        addPurchaseOrder,\n        receivePurchaseOrder\n    } = usePharmaStore();\n\n    const [activeTab, setActiveTab] = useState<'INBOUND' | 'OUTBOUND' | 'TRANSIT' | 'REVERSE'>('INBOUND');\n    const [searchTerm, setSearchTerm] = useState('');\n    const [selectedTransfer, setSelectedTransfer] = useState<StockTransfer | null>(null);\n\n    // --- MOCK DATA FOR UI DEV ---\n    // In a real app, these would come from the store or API\n\n    return (\n        <div className=\"p-6 space-y-6\">\n            <div className=\"flex justify-between items-center\">\n                <h1 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\n                    <Package className=\"w-8 h-8 text-blue-600\" />\n                    Operaciones Log铆sticas (WMS)\n                </h1>\n                <div className=\"flex gap-2\">\n                    <button className=\"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 flex items-center gap-2\">\n                        <FileText className=\"w-4 h-4\" />\n                        Reportes\n                    </button>\n                    <button className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2\">\n                        <Truck className=\"w-4 h-4\" />\n                        Nueva Orden\n                    </button>\n                </div>\n            </div>\n\n            {/* Tabs */}\n            <div className=\"flex gap-4 border-b border-gray-200\">\n                <button\n                    onClick={() => setActiveTab('INBOUND')}\n                    className={`pb-3 px-4 font-medium flex items-center gap-2 ${activeTab === 'INBOUND' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500 hover:text-gray-700'}`}\n                >\n                    <ArrowRight className=\"w-4 h-4 rotate-90\" />\n                    Recepci贸n (Inbound)\n                </button>\n                <button\n                    onClick={() => setActiveTab('OUTBOUND')}\n                    className={`pb-3 px-4 font-medium flex items-center gap-2 ${activeTab === 'OUTBOUND' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500 hover:text-gray-700'}`}\n                >\n                    <ArrowRight className=\"w-4 h-4 -rotate-90\" />\n                    Despacho (Outbound)\n                </button>\n                <button\n                    onClick={() => setActiveTab('TRANSIT')}\n                    className={`pb-3 px-4 font-medium flex items-center gap-2 ${activeTab === 'TRANSIT' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500 hover:text-gray-700'}`}\n                >\n                    <Truck className=\"w-4 h-4\" />\n                    En Tr谩nsito\n                    {stockTransfers.filter(t => t.status === 'IN_TRANSIT').length > 0 && (\n                        <span className=\"bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded-full\">\n                            {stockTransfers.filter(t => t.status === 'IN_TRANSIT').length}\n                        </span>\n                    )}\n                </button>\n                <button\n                    onClick={() => setActiveTab('REVERSE')}\n                    className={`pb-3 px-4 font-medium flex items-center gap-2 ${activeTab === 'REVERSE' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500 hover:text-gray-700'}`}\n                >\n                    <AlertTriangle className=\"w-4 h-4\" />\n                    Log铆stica Inversa\n                </button>\n            </div>\n\n            {/* Search & Filter Bar */}\n            <div className=\"flex gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-100\">\n                <div className=\"relative flex-1\">\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5\" />\n                    <input\n                        type=\"text\"\n                        placeholder=\"Buscar por SKU, Lote, Orden o Proveedor...\"\n                        className=\"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                    />\n                </div>\n                <button className=\"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 flex items-center gap-2 text-gray-600\">\n                    <Filter className=\"w-4 h-4\" />\n                    Filtros\n                </button>\n            </div>\n\n            {/* Content Area */}\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 min-h-[400px] p-6\">\n                {activeTab === 'INBOUND' && <InboundView />}\n                {activeTab === 'OUTBOUND' && <OutboundView />}\n                {activeTab === 'TRANSIT' && <TransitView transfers={stockTransfers} onReceive={receiveTransfer} />}\n                {activeTab === 'REVERSE' && <ReverseLogisticsView />}\n            </div>\n        </div>\n    );\n};\n\n// --- Sub-components (Placeholders for now, will expand) ---\n\nconst InboundView = () => (\n    <div className=\"text-center py-12 text-gray-500\">\n        <Package className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" />\n        <h3 className=\"text-lg font-medium text-gray-900\">Recepci贸n de Mercader铆a</h3>\n        <p>Gestione la recepci贸n de 贸rdenes de compra y devoluciones.</p>\n        <button className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\">\n            Ingresar Recepci贸n Manual\n        </button>\n    </div>\n);\n\nconst OutboundView = () => (\n    <div className=\"text-center py-12 text-gray-500\">\n        <Truck className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" />\n        <h3 className=\"text-lg font-medium text-gray-900\">Despacho y Transferencias</h3>\n        <p>Cree transferencias entre sucursales o devoluciones a proveedores.</p>\n        <button className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\">\n            Nueva Transferencia\n        </button>\n    </div>\n);\n\nconst TransitView = ({ transfers, onReceive }: { transfers: StockTransfer[], onReceive: any }) => {\n    const inTransit = transfers.filter(t => t.status === 'IN_TRANSIT');\n\n    if (inTransit.length === 0) {\n        return (\n            <div className=\"text-center py-12 text-gray-500\">\n                <CheckCircle className=\"w-12 h-12 mx-auto mb-4 text-green-500\" />\n                <h3 className=\"text-lg font-medium text-gray-900\">Todo al d铆a</h3>\n                <p>No hay mercader铆a en tr谩nsito actualmente.</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-4\">\n            {inTransit.map(transfer => (\n                <div key={transfer.id} className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\">\n                    <div className=\"flex justify-between items-start mb-4\">\n                        <div>\n                            <div className=\"flex items-center gap-2\">\n                                <span className=\"font-bold text-lg text-gray-900\">{transfer.id}</span>\n                                <span className=\"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full font-medium\">En Tr谩nsito</span>\n                            </div>\n                            <p className=\"text-sm text-gray-500 mt-1\">\n                                Origen: <span className=\"font-medium text-gray-700\">{transfer.origin_location_id}</span>\n                                <ArrowRight className=\"w-3 h-3 inline mx-2\" />\n                                Destino: <span className=\"font-medium text-gray-700\">{transfer.destination_location_id}</span>\n                            </p>\n                        </div>\n                        <div className=\"text-right text-sm text-gray-500\">\n                            <p>Enviado: {new Date(transfer.timeline.dispatched_at!).toLocaleDateString()}</p>\n                            <p>{transfer.items.length} Items</p>\n                        </div>\n                    </div>\n\n                    <div className=\"bg-gray-50 rounded p-3 mb-4\">\n                        <h4 className=\"text-xs font-semibold text-gray-500 uppercase mb-2\">Contenido</h4>\n                        <ul className=\"space-y-1\">\n                            {transfer.items.map((item, idx) => (\n                                <li key={idx} className=\"text-sm flex justify-between\">\n                                    <span>{item.sku}</span>\n                                    <span className=\"font-medium\">x{item.quantity}</span>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n\n                    <div className=\"flex justify-end gap-2\">\n                        <button className=\"px-3 py-1.5 text-sm border border-gray-300 rounded hover:bg-gray-50 text-gray-600\">\n                            Ver Documentos\n                        </button>\n                        <button\n                            onClick={() => onReceive(transfer.id)}\n                            className=\"px-3 py-1.5 text-sm bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-1\"\n                        >\n                            <CheckCircle className=\"w-3 h-3\" />\n                            Recepcionar\n                        </button>\n                    </div>\n                </div>\n            ))}\n        </div>\n    );\n};\n\nconst ReverseLogisticsView = () => (\n    <div className=\"text-center py-12 text-gray-500\">\n        <AlertTriangle className=\"w-12 h-12 mx-auto mb-4 text-orange-400\" />\n        <h3 className=\"text-lg font-medium text-gray-900\">Log铆stica Inversa</h3>\n        <p>Gesti贸n de mermas, vencidos y devoluciones de clientes.</p>\n    </div>\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7406, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/SuppliersPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { usePharmaStore } from '../store/useStore';\nimport { Search, Plus, Filter, Building2, Phone, Mail, CreditCard, Star, ChevronRight } from 'lucide-react';\nimport { Link } from 'react-router-dom';\n\nexport const SuppliersPage = () => {\n    const { suppliers } = usePharmaStore();\n    const [searchTerm, setSearchTerm] = useState('');\n    const [categoryFilter, setCategoryFilter] = useState<string>('ALL');\n\n    const filteredSuppliers = suppliers.filter(supplier => {\n        const matchesSearch =\n            supplier.business_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            supplier.fantasy_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            supplier.rut.includes(searchTerm);\n\n        const matchesCategory = categoryFilter === 'ALL' || supplier.categories.includes(categoryFilter as any);\n\n        return matchesSearch && matchesCategory;\n    });\n\n    return (\n        <div className=\"p-6 space-y-6 bg-slate-50 min-h-screen\">\n            {/* Header */}\n            <div className=\"flex justify-between items-center\">\n                <div>\n                    <h1 className=\"text-2xl font-bold text-slate-800\">Directorio de Proveedores</h1>\n                    <p className=\"text-slate-500\">Gesti贸n 360掳 de laboratorios y distribuidores</p>\n                </div>\n                <button className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-sm\">\n                    <Plus size={20} />\n                    Nuevo Proveedor\n                </button>\n            </div>\n\n            {/* Filters */}\n            <div className=\"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col md:flex-row gap-4 items-center\">\n                <div className=\"relative flex-1 w-full\">\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\" size={20} />\n                    <input\n                        type=\"text\"\n                        placeholder=\"Buscar por nombre, RUT o fantas铆a...\"\n                        className=\"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                    />\n                </div>\n                <div className=\"flex gap-2 w-full md:w-auto overflow-x-auto\">\n                    {['ALL', 'MEDICAMENTOS', 'INSUMOS', 'RETAIL'].map(cat => (\n                        <button\n                            key={cat}\n                            onClick={() => setCategoryFilter(cat)}\n                            className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${categoryFilter === cat\n                                    ? 'bg-blue-100 text-blue-700 border border-blue-200'\n                                    : 'bg-white text-slate-600 border border-slate-200 hover:bg-slate-50'\n                                }`}\n                        >\n                            {cat === 'ALL' ? 'Todos' : cat}\n                        </button>\n                    ))}\n                </div>\n            </div>\n\n            {/* Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {filteredSuppliers.map(supplier => (\n                    <Link\n                        to={`/suppliers/${supplier.id}`}\n                        key={supplier.id}\n                        className=\"group bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md hover:border-blue-300 transition-all duration-200 overflow-hidden flex flex-col\"\n                    >\n                        <div className=\"p-5 flex-1\">\n                            <div className=\"flex justify-between items-start mb-4\">\n                                <div className=\"flex items-center gap-3\">\n                                    <div className=\"w-12 h-12 bg-slate-100 rounded-lg flex items-center justify-center text-slate-400\">\n                                        {supplier.logo_url ? (\n                                            <img src={supplier.logo_url} alt={supplier.fantasy_name} className=\"w-full h-full object-contain rounded-lg\" />\n                                        ) : (\n                                            <Building2 size={24} />\n                                        )}\n                                    </div>\n                                    <div>\n                                        <h3 className=\"font-bold text-slate-800 group-hover:text-blue-600 transition-colors\">{supplier.fantasy_name}</h3>\n                                        <p className=\"text-xs text-slate-500\">{supplier.business_name}</p>\n                                    </div>\n                                </div>\n                                <div className=\"flex items-center gap-1 bg-yellow-50 px-2 py-1 rounded text-yellow-700 text-xs font-bold\">\n                                    <Star size={12} className=\"fill-yellow-500 text-yellow-500\" />\n                                    {supplier.rating}.0\n                                </div>\n                            </div>\n\n                            <div className=\"space-y-2 text-sm text-slate-600\">\n                                <div className=\"flex items-center gap-2\">\n                                    <CreditCard size={16} className=\"text-slate-400\" />\n                                    <span>{supplier.rut}</span>\n                                </div>\n                                <div className=\"flex items-center gap-2\">\n                                    <Mail size={16} className=\"text-slate-400\" />\n                                    <span className=\"truncate\">{supplier.contact_email}</span>\n                                </div>\n                                <div className=\"flex flex-wrap gap-2 mt-3\">\n                                    {supplier.categories.map(cat => (\n                                        <span key={cat} className=\"px-2 py-0.5 bg-slate-100 text-slate-600 text-xs rounded-full border border-slate-200\">\n                                            {cat}\n                                        </span>\n                                    ))}\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"bg-slate-50 px-5 py-3 border-t border-slate-100 flex justify-between items-center\">\n                            <div className=\"text-xs text-slate-500\">\n                                <span className=\"block font-medium text-slate-700\">Condici贸n Pago</span>\n                                {supplier.payment_terms.replace('_', ' ')}\n                            </div>\n                            <div className=\"flex items-center gap-1 text-blue-600 text-sm font-medium\">\n                                Ver Perfil <ChevronRight size={16} />\n                            </div>\n                        </div>\n                    </Link>\n                ))}\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7796, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/presentation/pages/SupplierProfile.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { usePharmaStore } from '../store/useStore';\nimport {\n    ArrowLeft, Building2, Mail, Phone, Globe, MapPin,\n    FileText, CreditCard, History, Package, AlertCircle, CheckCircle, Clock\n} from 'lucide-react';\n\nexport const SupplierProfile = () => {\n    const { id } = useParams();\n    const { suppliers, purchaseOrders, supplierDocuments } = usePharmaStore();\n    const [activeTab, setActiveTab] = useState<'PROFILE' | 'HISTORY' | 'ACCOUNT' | 'PRODUCTS'>('PROFILE');\n\n    const supplier = suppliers.find(s => s.id === id);\n\n    if (!supplier) {\n        return (\n            <div className=\"p-10 text-center\">\n                <h2 className=\"text-xl font-bold text-gray-800\">Proveedor no encontrado</h2>\n                <Link to=\"/suppliers\" className=\"text-blue-600 hover:underline mt-2 block\">Volver al directorio</Link>\n            </div>\n        );\n    }\n\n    // --- Mock Data Helpers ---\n    const supplierOrders = purchaseOrders.filter(po => po.supplier_id === id);\n    const supplierDocs = supplierDocuments.filter(d => d.supplier_id === id);\n\n    // Calculate Debt\n    const totalDebt = supplierDocs\n        .filter(d => d.type === 'FACTURA' && d.status === 'PENDING')\n        .reduce((sum, d) => sum + d.amount, 0);\n\n    return (\n        <div className=\"min-h-screen bg-slate-50\">\n            {/* Header / Hero */}\n            <div className=\"bg-white border-b border-slate-200 shadow-sm\">\n                <div className=\"max-w-7xl mx-auto px-6 py-6\">\n                    <Link to=\"/suppliers\" className=\"inline-flex items-center text-slate-500 hover:text-slate-800 mb-4 transition-colors\">\n                        <ArrowLeft size={16} className=\"mr-1\" /> Volver al Directorio\n                    </Link>\n\n                    <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                        <div className=\"flex items-center gap-4\">\n                            <div className=\"w-16 h-16 bg-slate-100 rounded-xl flex items-center justify-center border border-slate-200\">\n                                {supplier.logo_url ? (\n                                    <img src={supplier.logo_url} alt={supplier.fantasy_name} className=\"w-full h-full object-contain rounded-xl\" />\n                                ) : (\n                                    <Building2 size={32} className=\"text-slate-400\" />\n                                )}\n                            </div>\n                            <div>\n                                <h1 className=\"text-2xl font-bold text-slate-900\">{supplier.fantasy_name}</h1>\n                                <div className=\"flex items-center gap-2 text-slate-500 text-sm\">\n                                    <span>{supplier.business_name}</span>\n                                    <span className=\"w-1 h-1 bg-slate-300 rounded-full\"></span>\n                                    <span>{supplier.rut}</span>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"flex gap-3\">\n                            <div className=\"text-right px-4 py-2 bg-red-50 border border-red-100 rounded-lg\">\n                                <p className=\"text-xs text-red-600 font-semibold uppercase\">Deuda Actual</p>\n                                <p className=\"text-xl font-bold text-red-700\">${totalDebt.toLocaleString()}</p>\n                            </div>\n                            <div className=\"text-right px-4 py-2 bg-blue-50 border border-blue-100 rounded-lg\">\n                                <p className=\"text-xs text-blue-600 font-semibold uppercase\">Lead Time</p>\n                                <p className=\"text-xl font-bold text-blue-700\">{supplier.lead_time_days} D铆as</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Tabs */}\n                    <div className=\"flex gap-6 mt-8 border-b border-slate-200\">\n                        {[\n                            { id: 'PROFILE', label: 'Perfil & Contacto', icon: Building2 },\n                            { id: 'HISTORY', label: 'Historial Pedidos', icon: History },\n                            { id: 'ACCOUNT', label: 'Cuenta Corriente', icon: CreditCard },\n                            { id: 'PRODUCTS', label: 'Productos', icon: Package },\n                        ].map(tab => (\n                            <button\n                                key={tab.id}\n                                onClick={() => setActiveTab(tab.id as any)}\n                                className={`pb-3 px-2 flex items-center gap-2 font-medium text-sm transition-colors relative ${activeTab === tab.id\n                                    ? 'text-blue-600'\n                                    : 'text-slate-500 hover:text-slate-700'\n                                    }`}\n                            >\n                                <tab.icon size={18} />\n                                {tab.label}\n                                {activeTab === tab.id && (\n                                    <span className=\"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full\"></span>\n                                )}\n                            </button>\n                        ))}\n                    </div>\n                </div>\n            </div>\n\n            {/* Content */}\n            <div className=\"max-w-7xl mx-auto px-6 py-8\">\n                {activeTab === 'PROFILE' && (\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                        {/* Main Info */}\n                        <div className=\"lg:col-span-2 space-y-6\">\n                            <div className=\"bg-white p-6 rounded-xl shadow-sm border border-slate-200\">\n                                <h3 className=\"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2\">\n                                    <Building2 size={20} className=\"text-blue-600\" />\n                                    Informaci贸n Comercial\n                                </h3>\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                    <div>\n                                        <label className=\"block text-xs font-semibold text-slate-500 uppercase mb-1\">Raz贸n Social</label>\n                                        <p className=\"text-slate-800 font-medium\">{supplier.business_name}</p>\n                                    </div>\n                                    <div>\n                                        <label className=\"block text-xs font-semibold text-slate-500 uppercase mb-1\">RUT</label>\n                                        <p className=\"text-slate-800 font-medium\">{supplier.rut}</p>\n                                    </div>\n                                    <div>\n                                        <label className=\"block text-xs font-semibold text-slate-500 uppercase mb-1\">Sitio Web</label>\n                                        <a href={supplier.website} target=\"_blank\" rel=\"noreferrer\" className=\"text-blue-600 hover:underline flex items-center gap-1\">\n                                            {supplier.website || 'No registrado'} <Globe size={14} />\n                                        </a>\n                                    </div>\n                                    <div>\n                                        <label className=\"block text-xs font-semibold text-slate-500 uppercase mb-1\">Condici贸n de Pago</label>\n                                        <span className=\"inline-block px-2 py-1 bg-slate-100 rounded text-slate-700 text-sm font-medium\">\n                                            {supplier.payment_terms.replace('_', ' ')}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"bg-white p-6 rounded-xl shadow-sm border border-slate-200\">\n                                <h3 className=\"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2\">\n                                    <CreditCard size={20} className=\"text-blue-600\" />\n                                    Datos Bancarios\n                                </h3>\n                                {supplier.bank_account ? (\n                                    <div className=\"bg-slate-50 p-4 rounded-lg border border-slate-200\">\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            <div>\n                                                <p className=\"text-xs text-slate-500\">Banco</p>\n                                                <p className=\"font-medium text-slate-800\">{supplier.bank_account.bank}</p>\n                                            </div>\n                                            <div>\n                                                <p className=\"text-xs text-slate-500\">Tipo Cuenta</p>\n                                                <p className=\"font-medium text-slate-800\">{supplier.bank_account.account_type}</p>\n                                            </div>\n                                            <div>\n                                                <p className=\"text-xs text-slate-500\">N煤mero</p>\n                                                <p className=\"font-mono font-medium text-slate-800\">{supplier.bank_account.account_number}</p>\n                                            </div>\n                                            <div>\n                                                <p className=\"text-xs text-slate-500\">Email Notificaci贸n</p>\n                                                <p className=\"font-medium text-slate-800\">{supplier.bank_account.email_notification}</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                ) : (\n                                    <div className=\"text-slate-500 italic\">No hay datos bancarios registrados.</div>\n                                )}\n                            </div>\n                        </div>\n\n                        {/* Contacts Sidebar */}\n                        <div className=\"space-y-6\">\n                            <div className=\"bg-white p-6 rounded-xl shadow-sm border border-slate-200\">\n                                <h3 className=\"text-lg font-bold text-slate-800 mb-4\">Contactos</h3>\n                                <div className=\"space-y-4\">\n                                    {supplier.contacts.map((contact, idx) => (\n                                        <div key={idx} className=\"pb-4 border-b border-slate-100 last:border-0 last:pb-0\">\n                                            <div className=\"flex justify-between items-start\">\n                                                <p className=\"font-bold text-slate-800\">{contact.name}</p>\n                                                {contact.is_primary && (\n                                                    <span className=\"px-2 py-0.5 bg-blue-100 text-blue-700 text-[10px] font-bold rounded-full\">PRINCIPAL</span>\n                                                )}\n                                            </div>\n                                            <p className=\"text-xs text-slate-500 mb-2\">{contact.role}</p>\n                                            <div className=\"space-y-1\">\n                                                <div className=\"flex items-center gap-2 text-sm text-slate-600\">\n                                                    <Mail size={14} /> <a href={`mailto:${contact.email}`} className=\"hover:text-blue-600\">{contact.email}</a>\n                                                </div>\n                                                <div className=\"flex items-center gap-2 text-sm text-slate-600\">\n                                                    <Phone size={14} /> <span>{contact.phone}</span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                    {supplier.contacts.length === 0 && (\n                                        <p className=\"text-slate-500 text-sm\">No hay contactos registrados.</p>\n                                    )}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {activeTab === 'HISTORY' && (\n                    <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden\">\n                        <table className=\"w-full text-left text-sm\">\n                            <thead className=\"bg-slate-50 text-slate-500 font-medium border-b border-slate-200\">\n                                <tr>\n                                    <th className=\"px-6 py-4\">ID Orden</th>\n                                    <th className=\"px-6 py-4\">Fecha</th>\n                                    <th className=\"px-6 py-4\">Estado</th>\n                                    <th className=\"px-6 py-4 text-right\">Monto</th>\n                                    <th className=\"px-6 py-4 text-center\">Acciones</th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"divide-y divide-slate-100\">\n                                {supplierOrders.length > 0 ? supplierOrders.map(po => (\n                                    <tr key={po.id} className=\"hover:bg-slate-50\">\n                                        <td className=\"px-6 py-4 font-medium text-slate-900\">{po.id}</td>\n                                        <td className=\"px-6 py-4 text-slate-600\">{new Date(po.created_at).toLocaleDateString()}</td>\n                                        <td className=\"px-6 py-4\">\n                                            <span className={`px-2 py-1 rounded-full text-xs font-bold ${po.status === 'COMPLETED' ? 'bg-green-100 text-green-700' :\n                                                po.status === 'SENT' ? 'bg-yellow-100 text-yellow-700' :\n                                                    'bg-slate-100 text-slate-700'\n                                                }`}>\n                                                {po.status}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 text-right font-medium text-slate-900\">\n                                            ${po.total_estimated.toLocaleString()}\n                                        </td>\n                                        <td className=\"px-6 py-4 text-center\">\n                                            <button className=\"text-blue-600 hover:text-blue-800 font-medium text-xs\">Ver Detalle</button>\n                                        </td>\n                                    </tr>\n                                )) : (\n                                    <tr>\n                                        <td colSpan={5} className=\"px-6 py-12 text-center text-slate-500\">\n                                            No hay 贸rdenes de compra registradas.\n                                        </td>\n                                    </tr>\n                                )}\n                            </tbody>\n                        </table>\n                    </div>\n                )}\n\n                {activeTab === 'ACCOUNT' && (\n                    <div className=\"space-y-6\">\n                        <div className=\"flex justify-end\">\n                            <button className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm font-medium\">\n                                <PlusIcon /> Nueva Factura / NC\n                            </button>\n                        </div>\n                        <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden\">\n                            <div className=\"p-8 text-center text-slate-500\">\n                                <FileText size={48} className=\"mx-auto mb-4 text-slate-300\" />\n                                <p>M贸dulo de Cuenta Corriente en construcci贸n.</p>\n                                <p className=\"text-sm mt-2\">Aqu铆 se mostrar谩n Facturas y Notas de Cr茅dito.</p>\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {activeTab === 'PRODUCTS' && (\n                    <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 p-8 text-center text-slate-500\">\n                        <Package size={48} className=\"mx-auto mb-4 text-slate-300\" />\n                        <p>Cat谩logo de productos del proveedor.</p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nconst PlusIcon = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>\n);\n"],"names":[],"mappings":"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"}}]
}