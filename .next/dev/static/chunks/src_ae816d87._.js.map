{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/components/rrhh/EmployeeCard.tsx"],"sourcesContent":["import { User, Briefcase, DollarSign, AlertCircle, CheckCircle } from 'lucide-react';\nimport { PayrollData } from '@/lib/data/payroll';\n\nexport interface Employee {\n    id: number;\n    name: string;\n    role: string;\n    baseSalary: number;\n    isActive: boolean;\n    photoUrl?: string;\n}\n\ninterface EmployeeCardProps {\n    employee: Employee;\n    payrollData: PayrollData;\n    onSimulateSalary: (employee: Employee) => void;\n}\n\nexport default function EmployeeCard({ employee, payrollData, onSimulateSalary }: EmployeeCardProps) {\n    const formatCurrency = (amount: number) => {\n        return new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP' }).format(amount);\n    };\n\n    // Mock logic: Distribute total commissions among employees for demo purposes\n    // In a real app, we would filter sales by employee_id.\n    // Here we assume this employee gets a share or all of it for the demo.\n    // Let's say we split it evenly or just show the total for the store manager.\n    // For the purpose of this mock, we'll show the global store stats as if they were the employee's performance\n    // or a fraction of it. Let's just use the global data to demonstrate the \"Anti-Canela\" breakdown.\n\n    return (\n        <div className=\"bg-white overflow-hidden shadow rounded-lg divide-y divide-gray-200\">\n            <div className=\"px-4 py-5 sm:px-6 flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                    <div className=\"flex-shrink-0 h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center\">\n                        {employee.photoUrl ? (\n                            <img className=\"h-12 w-12 rounded-full\" src={employee.photoUrl} alt=\"\" />\n                        ) : (\n                            <User className=\"h-6 w-6 text-gray-500\" />\n                        )}\n                    </div>\n                    <div className=\"ml-4\">\n                        <h3 className=\"text-lg leading-6 font-medium text-gray-900\">{employee.name}</h3>\n                        <p className=\"text-sm text-gray-500 flex items-center\">\n                            <Briefcase className=\"h-4 w-4 mr-1\" /> {employee.role}\n                        </p>\n                    </div>\n                </div>\n                <div>\n                    <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${employee.isActive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\n                        {employee.isActive ? 'Turno Activo' : 'Inactivo'}\n                    </span>\n                </div>\n            </div>\n            <div className=\"px-4 py-5 sm:p-6\">\n                <h4 className=\"text-sm font-medium text-gray-500 mb-3\">Desempeño de Ventas (Tienda)</h4>\n                <dl className=\"grid grid-cols-1 gap-x-4 gap-y-4 sm:grid-cols-2\">\n                    <div className=\"sm:col-span-1\">\n                        <dt className=\"text-sm font-medium text-gray-500\">Ventas Totales</dt>\n                        <dd className=\"mt-1 text-sm text-gray-900 font-semibold\">{formatCurrency(payrollData.totalSales)}</dd>\n                    </div>\n                    <div className=\"sm:col-span-1\">\n                        <dt className=\"text-sm font-medium text-green-600\">Comisionables (3%)</dt>\n                        <dd className=\"mt-1 text-sm text-gray-900\">{formatCurrency(payrollData.commissionableSales)}</dd>\n                    </div>\n                    <div className=\"sm:col-span-2 bg-yellow-50 p-2 rounded-md border border-yellow-200\">\n                        <dt className=\"text-xs font-medium text-yellow-800 flex items-center\">\n                            <AlertCircle className=\"h-3 w-3 mr-1\" />\n                            No Comisionables (Medicamentos) - Ley Anti-Canela\n                        </dt>\n                        <dd className=\"mt-1 text-sm text-gray-900 font-bold\">{formatCurrency(payrollData.nonCommissionableSales)}</dd>\n                    </div>\n                </dl>\n            </div>\n            <div className=\"px-4 py-4 sm:px-6\">\n                <button\n                    type=\"button\"\n                    onClick={() => onSimulateSalary(employee)}\n                    className=\"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\"\n                >\n                    <DollarSign className=\"-ml-1 mr-2 h-5 w-5\" />\n                    Simular Liquidación\n                </button>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;;;AAkBe,SAAS,aAAa,EAAE,QAAQ,EAAE,WAAW,EAAE,gBAAgB,EAAqB;IAC/F,MAAM,iBAAiB,CAAC;QACpB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;YAAE,OAAO;YAAY,UAAU;QAAM,GAAG,MAAM,CAAC;IACzF;IAEA,6EAA6E;IAC7E,uDAAuD;IACvD,uEAAuE;IACvE,6EAA6E;IAC7E,6GAA6G;IAC7G,kGAAkG;IAElG,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;0CACV,SAAS,QAAQ,iBACd,6LAAC;oCAAI,WAAU;oCAAyB,KAAK,SAAS,QAAQ;oCAAE,KAAI;;;;;yDAEpE,6LAAC,6MAAI;oCAAC,WAAU;;;;;;;;;;;0CAGxB,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAG,WAAU;kDAA+C,SAAS,IAAI;;;;;;kDAC1E,6LAAC;wCAAE,WAAU;;0DACT,6LAAC,4NAAS;gDAAC,WAAU;;;;;;4CAAiB;4CAAE,SAAS,IAAI;;;;;;;;;;;;;;;;;;;kCAIjE,6LAAC;kCACG,cAAA,6LAAC;4BAAK,WAAW,CAAC,8DAA8D,EAAE,SAAS,QAAQ,GAAG,gCAAgC,2BAA2B;sCAC5J,SAAS,QAAQ,GAAG,iBAAiB;;;;;;;;;;;;;;;;;0BAIlD,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;kCAAyC;;;;;;kCACvD,6LAAC;wBAAG,WAAU;;0CACV,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAG,WAAU;kDAAoC;;;;;;kDAClD,6LAAC;wCAAG,WAAU;kDAA4C,eAAe,YAAY,UAAU;;;;;;;;;;;;0CAEnG,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAG,WAAU;kDAAqC;;;;;;kDACnD,6LAAC;wCAAG,WAAU;kDAA8B,eAAe,YAAY,mBAAmB;;;;;;;;;;;;0CAE9F,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAG,WAAU;;0DACV,6LAAC,sOAAW;gDAAC,WAAU;;;;;;4CAAiB;;;;;;;kDAG5C,6LAAC;wCAAG,WAAU;kDAAwC,eAAe,YAAY,sBAAsB;;;;;;;;;;;;;;;;;;;;;;;;0BAInH,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBACG,MAAK;oBACL,SAAS,IAAM,iBAAiB;oBAChC,WAAU;;sCAEV,6LAAC,mOAAU;4BAAC,WAAU;;;;;;wBAAuB;;;;;;;;;;;;;;;;;;AAMjE;KApEwB"}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/components/rrhh/SalarySimulator.tsx"],"sourcesContent":["import { Fragment } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { X } from 'lucide-react';\nimport { Employee } from './EmployeeCard';\n\ninterface SalarySimulatorProps {\n    isOpen: boolean;\n    onClose: () => void;\n    employee: Employee | null;\n    totalCommissions: number;\n}\n\nexport default function SalarySimulator({ isOpen, onClose, employee, totalCommissions }: SalarySimulatorProps) {\n    if (!employee) return null;\n\n    const formatCurrency = (amount: number) => {\n        return new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP' }).format(amount);\n    };\n\n    // Constants for Chilean Payroll (Approx)\n    const IMM = 500000; // Ingreso Mínimo Mensual\n    const GRATIFICATION_CAP = (4.75 * IMM) / 12;\n    const HEALTH_DISCOUNT_RATE = 0.07; // 7%\n    const AFP_DISCOUNT_RATE = 0.11; // ~11% average\n    const UNEMPLOYMENT_INSURANCE_RATE = 0.006; // 0.6%\n\n    // Calculations\n    const gratification = Math.min(employee.baseSalary * 0.25, GRATIFICATION_CAP);\n    const taxableIncome = employee.baseSalary + gratification + totalCommissions;\n\n    const healthDiscount = Math.round(taxableIncome * HEALTH_DISCOUNT_RATE);\n    const afpDiscount = Math.round(taxableIncome * AFP_DISCOUNT_RATE);\n    const unemploymentDiscount = Math.round(taxableIncome * UNEMPLOYMENT_INSURANCE_RATE);\n\n    const totalDiscounts = healthDiscount + afpDiscount + unemploymentDiscount;\n    const liquidSalary = taxableIncome - totalDiscounts;\n\n    return (\n        <Transition.Root show={isOpen} as={Fragment}>\n            <Dialog as=\"div\" className=\"relative z-10\" onClose={onClose}>\n                <Transition.Child\n                    as={Fragment}\n                    enter=\"ease-out duration-300\"\n                    enterFrom=\"opacity-0\"\n                    enterTo=\"opacity-100\"\n                    leave=\"ease-in duration-200\"\n                    leaveFrom=\"opacity-100\"\n                    leaveTo=\"opacity-0\"\n                >\n                    <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" />\n                </Transition.Child>\n\n                <div className=\"fixed inset-0 z-10 overflow-y-auto\">\n                    <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n                        <Transition.Child\n                            as={Fragment}\n                            enter=\"ease-out duration-300\"\n                            enterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n                            enterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n                            leave=\"ease-in duration-200\"\n                            leaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n                            leaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n                        >\n                            <Dialog.Panel className=\"relative transform overflow-hidden rounded-lg bg-white px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6\">\n                                <div className=\"absolute top-0 right-0 hidden pt-4 pr-4 sm:block\">\n                                    <button\n                                        type=\"button\"\n                                        className=\"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\"\n                                        onClick={onClose}\n                                    >\n                                        <span className=\"sr-only\">Cerrar</span>\n                                        <X className=\"h-6 w-6\" aria-hidden=\"true\" />\n                                    </button>\n                                </div>\n                                <div className=\"sm:flex sm:items-start\">\n                                    <div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full\">\n                                        <Dialog.Title as=\"h3\" className=\"text-lg font-medium leading-6 text-gray-900\">\n                                            Simulación de Liquidación de Sueldo\n                                        </Dialog.Title>\n                                        <div className=\"mt-2\">\n                                            <p className=\"text-sm text-gray-500 mb-4\">\n                                                Estimación para: <span className=\"font-bold\">{employee.name}</span>\n                                            </p>\n\n                                            <div className=\"bg-gray-50 p-4 rounded-md space-y-3\">\n                                                <div className=\"flex justify-between text-sm\">\n                                                    <span className=\"text-gray-600\">Sueldo Base:</span>\n                                                    <span className=\"font-medium\">{formatCurrency(employee.baseSalary)}</span>\n                                                </div>\n                                                <div className=\"flex justify-between text-sm\">\n                                                    <span className=\"text-gray-600\">Gratificación Legal (Tope):</span>\n                                                    <span className=\"font-medium\">{formatCurrency(gratification)}</span>\n                                                </div>\n                                                <div className=\"flex justify-between text-sm\">\n                                                    <span className=\"text-green-600 font-medium\">Comisiones (Est.):</span>\n                                                    <span className=\"font-medium text-green-600\">{formatCurrency(totalCommissions)}</span>\n                                                </div>\n                                                <div className=\"border-t border-gray-200 pt-2 flex justify-between text-sm font-semibold\">\n                                                    <span>Total Haberes:</span>\n                                                    <span>{formatCurrency(taxableIncome)}</span>\n                                                </div>\n                                            </div>\n\n                                            <div className=\"mt-4 space-y-2\">\n                                                <h4 className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider\">Descuentos Legales</h4>\n                                                <div className=\"flex justify-between text-sm\">\n                                                    <span className=\"text-gray-600\">AFP (11%):</span>\n                                                    <span className=\"text-red-600\">-{formatCurrency(afpDiscount)}</span>\n                                                </div>\n                                                <div className=\"flex justify-between text-sm\">\n                                                    <span className=\"text-gray-600\">Salud (7%):</span>\n                                                    <span className=\"text-red-600\">-{formatCurrency(healthDiscount)}</span>\n                                                </div>\n                                                <div className=\"flex justify-between text-sm\">\n                                                    <span className=\"text-gray-600\">Seguro Cesantía (0.6%):</span>\n                                                    <span className=\"text-red-600\">-{formatCurrency(unemploymentDiscount)}</span>\n                                                </div>\n                                            </div>\n\n                                            <div className=\"mt-6 bg-green-50 p-4 rounded-md border border-green-200\">\n                                                <div className=\"flex justify-between items-center\">\n                                                    <span className=\"text-lg font-bold text-green-900\">Sueldo Líquido:</span>\n                                                    <span className=\"text-2xl font-black text-green-700\">{formatCurrency(liquidSalary)}</span>\n                                                </div>\n                                            </div>\n\n                                            <p className=\"mt-4 text-xs text-gray-400 text-center\">\n                                                * Cálculo referencial. No constituye liquidación oficial.\n                                            </p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </Dialog.Panel>\n                        </Transition.Child>\n                    </div>\n                </div>\n            </Dialog>\n        </Transition.Root>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 728, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/components/rrhh/EmployeeGrid.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport EmployeeCard, { Employee } from './EmployeeCard';\nimport SalarySimulator from './SalarySimulator';\nimport { PayrollData } from '@/lib/data/payroll';\n\ninterface EmployeeGridProps {\n    employees: Employee[];\n    payrollData: PayrollData;\n}\n\nexport default function EmployeeGrid({ employees, payrollData }: EmployeeGridProps) {\n    const [selectedEmployee, setSelectedEmployee] = useState<Employee | null>(null);\n    const [isSimulatorOpen, setIsSimulatorOpen] = useState(false);\n\n    const handleSimulateSalary = (employee: Employee) => {\n        setSelectedEmployee(employee);\n        setIsSimulatorOpen(true);\n    };\n\n    return (\n        <>\n            <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\n                {employees.map((employee) => (\n                    <EmployeeCard\n                        key={employee.id}\n                        employee={employee}\n                        payrollData={payrollData}\n                        onSimulateSalary={handleSimulateSalary}\n                    />\n                ))}\n            </div>\n\n            <SalarySimulator\n                isOpen={isSimulatorOpen}\n                onClose={() => setIsSimulatorOpen(false)}\n                employee={selectedEmployee}\n                totalCommissions={payrollData.totalCommissions} // Passing global commissions for demo\n            />\n        </>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAYe,SAAS,aAAa,EAAE,SAAS,EAAE,WAAW,EAAqB;;IAC9E,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAkB;IAC1E,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IAEvD,MAAM,uBAAuB,CAAC;QAC1B,oBAAoB;QACpB,mBAAmB;IACvB;IAEA,qBACI;;0BACI,6LAAC;gBAAI,WAAU;0BACV,UAAU,GAAG,CAAC,CAAC,yBACZ,6LAAC,wJAAY;wBAET,UAAU;wBACV,aAAa;wBACb,kBAAkB;uBAHb,SAAS,EAAE;;;;;;;;;;0BAQ5B,6LAAC,2JAAe;gBACZ,QAAQ;gBACR,SAAS,IAAM,mBAAmB;gBAClC,UAAU;gBACV,kBAAkB,YAAY,gBAAgB;;;;;;;;AAI9D;GA9BwB;KAAA"}},
    {"offset": {"line": 792, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/lib/store/useAuthStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\nexport type Role = 'ADMIN' | 'QF' | 'VENDEDOR';\n\ninterface User {\n    id: number;\n    username: string;\n    role: Role;\n}\n\ninterface AuthState {\n    user: User | null;\n    isAuthenticated: boolean;\n    role: Role | null;\n    login: (user: User) => void;\n    logout: () => void;\n}\n\nexport const useAuthStore = create<AuthState>()(\n    persist(\n        (set) => ({\n            user: null,\n            isAuthenticated: false,\n            role: null,\n            login: (user) => set({ user, isAuthenticated: true, role: user.role }),\n            logout: () => set({ user: null, isAuthenticated: false, role: null }),\n        }),\n        {\n            name: 'farmacias-vallenar-auth',\n        }\n    )\n);\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAkBO,MAAM,eAAe,IAAA,qJAAM,IAC9B,IAAA,2JAAO,EACH,CAAC,MAAQ,CAAC;QACN,MAAM;QACN,iBAAiB;QACjB,MAAM;QACN,OAAO,CAAC,OAAS,IAAI;gBAAE;gBAAM,iBAAiB;gBAAM,MAAM,KAAK,IAAI;YAAC;QACpE,QAAQ,IAAM,IAAI;gBAAE,MAAM;gBAAM,iBAAiB;gBAAO,MAAM;YAAK;IACvE,CAAC,GACD;IACI,MAAM;AACV"}},
    {"offset": {"line": 824, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/components/auth/RouteGuard.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuthStore, Role } from '@/lib/store/useAuthStore';\n\ninterface RouteGuardProps {\n    children: React.ReactNode;\n    allowedRoles?: Role[];\n}\n\nexport default function RouteGuard({ children, allowedRoles }: RouteGuardProps) {\n    const router = useRouter();\n    const { isAuthenticated, role } = useAuthStore();\n    const [authorized, setAuthorized] = useState(false);\n\n    useEffect(() => {\n        // Wait for hydration (zustand persist)\n        const checkAuth = () => {\n            if (!isAuthenticated) {\n                router.push('/login');\n                return;\n            }\n\n            if (allowedRoles && role && !allowedRoles.includes(role)) {\n                // Redirect to dashboard if role not allowed for this specific route\n                // Or maybe show unauthorized page. For now, dashboard.\n                router.push('/');\n                return;\n            }\n\n            setAuthorized(true);\n        };\n\n        checkAuth();\n    }, [isAuthenticated, role, router, allowedRoles]);\n\n    if (!authorized) {\n        return null; // Or a loading spinner\n    }\n\n    return <>{children}</>;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAWe,SAAS,WAAW,EAAE,QAAQ,EAAE,YAAY,EAAmB;;IAC1E,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,GAAG,IAAA,sJAAY;IAC9C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,IAAA,0KAAS;gCAAC;YACN,uCAAuC;YACvC,MAAM;kDAAY;oBACd,IAAI,CAAC,iBAAiB;wBAClB,OAAO,IAAI,CAAC;wBACZ;oBACJ;oBAEA,IAAI,gBAAgB,QAAQ,CAAC,aAAa,QAAQ,CAAC,OAAO;wBACtD,oEAAoE;wBACpE,uDAAuD;wBACvD,OAAO,IAAI,CAAC;wBACZ;oBACJ;oBAEA,cAAc;gBAClB;;YAEA;QACJ;+BAAG;QAAC;QAAiB;QAAM;QAAQ;KAAa;IAEhD,IAAI,CAAC,YAAY;QACb,OAAO,MAAM,uBAAuB;IACxC;IAEA,qBAAO;kBAAG;;AACd;GA/BwB;;QACL,kJAAS;QACU,sJAAY;;;KAF1B"}}]
}