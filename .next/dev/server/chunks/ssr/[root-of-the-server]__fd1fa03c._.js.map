{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/actions/public-search.ts"],"sourcesContent":["'use server';\n\nimport { query } from '@/lib/db';\n\nexport interface PublicProduct {\n    id: number;\n    name: string;\n    dci: string | null;\n    status: 'Disponible' | 'Agotado';\n}\n\nexport async function searchPublicProducts(term: string): Promise<PublicProduct[]> {\n    if (!term || term.length < 3) {\n        return [];\n    }\n\n    try {\n        // Query database for products matching the term\n        // We select stock to calculate status, but we DO NOT return it to the client\n        const sql = `\n            SELECT id, name, dci, stock\n            FROM products\n            WHERE name ILIKE $1 OR dci ILIKE $1\n            LIMIT 20\n        `;\n\n        const result = await query(sql, [`%${term}%`]);\n\n        // Transform result to hide sensitive data\n        const products: PublicProduct[] = result.rows.map((row: any) => ({\n            id: row.id,\n            name: row.name,\n            dci: row.dci || '',\n            status: row.stock > 0 ? 'Disponible' : 'Agotado'\n        }));\n\n        return products;\n    } catch (error) {\n        console.error('Error searching public products:', error);\n        return [];\n    }\n}\n"],"names":[],"mappings":";;;;;;;IAWsB,uBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/lib/utils.ts"],"sourcesContent":["export function formatCurrency(amount: number): string {\n    return new Intl.NumberFormat('es-CL', {\n        style: 'currency',\n        currency: 'CLP',\n    }).format(amount);\n}\n\nexport function cn(...classes: (string | undefined | null | false)[]) {\n    return classes.filter(Boolean).join(' ');\n}\n"],"names":[],"mappings":";;;;;;AAAO,SAAS,eAAe,MAAc;IACzC,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QAClC,OAAO;QACP,UAAU;IACd,GAAG,MAAM,CAAC;AACd;AAEO,SAAS,GAAG,GAAG,OAA8C;IAChE,OAAO,QAAQ,MAAM,CAAC,SAAS,IAAI,CAAC;AACxC"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/app/web/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Search, MapPin, Clock, Phone, Facebook, Instagram, LogIn, Pill, CheckCircle, XCircle } from 'lucide-react';\nimport Link from 'next/link';\nimport { searchPublicProducts, PublicProduct } from '@/actions/public-search';\nimport { cn } from '@/lib/utils';\n\nexport default function WebPage() {\n    const [searchTerm, setSearchTerm] = useState('');\n    const [results, setResults] = useState<PublicProduct[]>([]);\n    const [isSearching, setIsSearching] = useState(false);\n    const [hasSearched, setHasSearched] = useState(false);\n\n    const handleSearch = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (searchTerm.length < 3) return;\n\n        setIsSearching(true);\n        setHasSearched(true);\n        try {\n            const products = await searchPublicProducts(searchTerm);\n            setResults(products);\n        } catch (error) {\n            console.error('Search failed', error);\n            setResults([]);\n        } finally {\n            setIsSearching(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen flex flex-col bg-white\">\n            {/* Navbar */}\n            <nav className=\"bg-white border-b border-gray-100 sticky top-0 z-50\">\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex justify-between items-center\">\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"bg-blue-600 p-2 rounded-lg\">\n                            <Pill className=\"text-white\" size={24} />\n                        </div>\n                        <span className=\"text-xl font-bold text-blue-900\">Farmacias Vallenar</span>\n                    </div>\n                    <Link\n                        href=\"/login\"\n                        className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                    >\n                        <LogIn size={18} />\n                        Acceso Funcionarios\n                    </Link>\n                </div>\n            </nav>\n\n            {/* Hero Section */}\n            <section className=\"relative bg-blue-900 text-white py-20 lg:py-32 overflow-hidden\">\n                <div className=\"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1631549916768-4119b2e5f926?q=80&w=2979&auto=format&fit=crop')] bg-cover bg-center opacity-10\"></div>\n                <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n                    <h1 className=\"text-4xl md:text-6xl font-bold mb-6 tracking-tight\">\n                        Salud y Confianza <span className=\"text-blue-400\">Local</span>\n                    </h1>\n                    <p className=\"text-xl text-blue-100 mb-12 max-w-2xl mx-auto\">\n                        Tu farmacia de barrio, ahora más cerca de ti. Consulta la disponibilidad de tus medicamentos en tiempo real.\n                    </p>\n\n                    {/* Search Box */}\n                    <div className=\"max-w-2xl mx-auto bg-white p-2 rounded-2xl shadow-2xl transform hover:scale-[1.01] transition-transform duration-300\">\n                        <form onSubmit={handleSearch} className=\"flex gap-2\">\n                            <div className=\"relative flex-1\">\n                                <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={24} />\n                                <input\n                                    type=\"text\"\n                                    placeholder=\"¿Qué medicamento buscas? (Ej: Paracetamol)\"\n                                    className=\"w-full pl-12 pr-4 py-4 text-lg text-gray-900 placeholder-gray-400 bg-transparent border-none focus:ring-0 focus:outline-none\"\n                                    value={searchTerm}\n                                    onChange={(e) => setSearchTerm(e.target.value)}\n                                />\n                            </div>\n                            <button\n                                type=\"submit\"\n                                disabled={isSearching || searchTerm.length < 3}\n                                className=\"px-8 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {isSearching ? 'Buscando...' : 'Buscar'}\n                            </button>\n                        </form>\n                    </div>\n                </div>\n            </section>\n\n            {/* Results Section */}\n            <section className=\"flex-1 bg-gray-50 py-12\">\n                <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n                    {hasSearched && (\n                        <div className=\"space-y-4\">\n                            <h2 className=\"text-lg font-semibold text-gray-700 mb-4\">\n                                Resultados de búsqueda\n                            </h2>\n\n                            {results.length > 0 ? (\n                                <div className=\"grid gap-4\">\n                                    {results.map((product) => (\n                                        <div key={product.id} className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center hover:shadow-md transition-shadow\">\n                                            <div>\n                                                <h3 className=\"text-lg font-bold text-gray-900\">{product.name}</h3>\n                                                {product.dci && (\n                                                    <p className=\"text-sm text-gray-500\">Principio Activo: {product.dci}</p>\n                                                )}\n                                            </div>\n                                            <div className={cn(\n                                                \"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold\",\n                                                product.status === 'Disponible'\n                                                    ? \"bg-green-100 text-green-700\"\n                                                    : \"bg-red-100 text-red-700\"\n                                            )}>\n                                                {product.status === 'Disponible' ? (\n                                                    <>\n                                                        <CheckCircle size={18} />\n                                                        Disponible\n                                                    </>\n                                                ) : (\n                                                    <>\n                                                        <XCircle size={18} />\n                                                        Agotado\n                                                    </>\n                                                )}\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            ) : (\n                                <div className=\"text-center py-12 bg-white rounded-xl border border-gray-100\">\n                                    <div className=\"bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\n                                        <Search className=\"text-gray-400\" size={32} />\n                                    </div>\n                                    <h3 className=\"text-lg font-medium text-gray-900\">No encontramos resultados</h3>\n                                    <p className=\"text-gray-500\">Intenta con otro nombre o revisa la ortografía.</p>\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    {!hasSearched && (\n                        <div className=\"grid md:grid-cols-3 gap-8 text-center\">\n                            <div className=\"bg-white p-8 rounded-2xl shadow-sm border border-gray-100\">\n                                <div className=\"bg-blue-100 w-12 h-12 rounded-xl flex items-center justify-center mx-auto mb-4 text-blue-600\">\n                                    <MapPin size={24} />\n                                </div>\n                                <h3 className=\"font-bold text-gray-900 mb-2\">Ubicación Central</h3>\n                                <p className=\"text-gray-600 text-sm\">\n                                    Arturo Prat 1234<br />\n                                    Vallenar, Atacama\n                                </p>\n                            </div>\n                            <div className=\"bg-white p-8 rounded-2xl shadow-sm border border-gray-100\">\n                                <div className=\"bg-green-100 w-12 h-12 rounded-xl flex items-center justify-center mx-auto mb-4 text-green-600\">\n                                    <Clock size={24} />\n                                </div>\n                                <h3 className=\"font-bold text-gray-900 mb-2\">Horario Continuado</h3>\n                                <p className=\"text-gray-600 text-sm\">\n                                    Lunes a Viernes<br />\n                                    09:00 - 20:00 hrs\n                                </p>\n                            </div>\n                            <div className=\"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 relative overflow-hidden\">\n                                <div className=\"absolute top-0 right-0 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg\">\n                                    URGENCIA\n                                </div>\n                                <div className=\"bg-purple-100 w-12 h-12 rounded-xl flex items-center justify-center mx-auto mb-4 text-purple-600\">\n                                    <Phone size={24} />\n                                </div>\n                                <h3 className=\"font-bold text-gray-900 mb-2\">Farmacia de Turno</h3>\n                                <p className=\"text-gray-600 text-sm\">\n                                    Consulta disponibilidad<br />\n                                    +56 51 261 2345\n                                </p>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </section>\n\n            {/* Footer */}\n            <footer className=\"bg-gray-900 text-gray-400 py-12\">\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n                    <div className=\"grid md:grid-cols-4 gap-8 mb-8\">\n                        <div className=\"col-span-2\">\n                            <h2 className=\"text-white text-xl font-bold mb-4 flex items-center gap-2\">\n                                <Pill className=\"text-blue-500\" />\n                                Farmacias Vallenar\n                            </h2>\n                            <p className=\"text-sm leading-relaxed max-w-xs\">\n                                Comprometidos con la salud de nuestra comunidad desde 1990.\n                                Calidad, confianza y los mejores precios garantizados.\n                            </p>\n                        </div>\n                        <div>\n                            <h3 className=\"text-white font-bold mb-4\">Enlaces</h3>\n                            <ul className=\"space-y-2 text-sm\">\n                                <li><a href=\"#\" className=\"hover:text-white transition-colors\">Inicio</a></li>\n                                <li><a href=\"#\" className=\"hover:text-white transition-colors\">Nosotros</a></li>\n                                <li><a href=\"#\" className=\"hover:text-white transition-colors\">Sucursales</a></li>\n                                <li><Link href=\"/login\" className=\"hover:text-white transition-colors\">Acceso Interno</Link></li>\n                            </ul>\n                        </div>\n                        <div>\n                            <h3 className=\"text-white font-bold mb-4\">Síguenos</h3>\n                            <div className=\"flex gap-4\">\n                                <a href=\"#\" className=\"bg-gray-800 p-2 rounded-lg hover:bg-blue-600 hover:text-white transition-all\">\n                                    <Facebook size={20} />\n                                </a>\n                                <a href=\"#\" className=\"bg-gray-800 p-2 rounded-lg hover:bg-pink-600 hover:text-white transition-all\">\n                                    <Instagram size={20} />\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"border-t border-gray-800 pt-8 text-sm text-center\">\n                        &copy; {new Date().getFullYear()} Farmacias Vallenar. Todos los derechos reservados.\n                    </div>\n                </div>\n            </footer>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}