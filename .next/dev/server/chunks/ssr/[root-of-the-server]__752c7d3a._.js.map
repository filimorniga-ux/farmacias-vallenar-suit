{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/lib/store/useAuthStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\nexport type Role = 'ADMIN' | 'QF' | 'VENDEDOR';\n\ninterface User {\n    id: number;\n    username: string;\n    role: Role;\n}\n\ninterface AuthState {\n    user: User | null;\n    isAuthenticated: boolean;\n    role: Role | null;\n    login: (user: User) => void;\n    logout: () => void;\n}\n\nexport const useAuthStore = create<AuthState>()(\n    persist(\n        (set) => ({\n            user: null,\n            isAuthenticated: false,\n            role: null,\n            login: (user) => set({ user, isAuthenticated: true, role: user.role }),\n            logout: () => set({ user: null, isAuthenticated: false, role: null }),\n        }),\n        {\n            name: 'farmacias-vallenar-auth',\n        }\n    )\n);\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAkBO,MAAM,eAAe,IAAA,kJAAM,IAC9B,IAAA,wJAAO,EACH,CAAC,MAAQ,CAAC;QACN,MAAM;QACN,iBAAiB;QACjB,MAAM;QACN,OAAO,CAAC,OAAS,IAAI;gBAAE;gBAAM,iBAAiB;gBAAM,MAAM,KAAK,IAAI;YAAC;QACpE,QAAQ,IAAM,IAAI;gBAAE,MAAM;gBAAM,iBAAiB;gBAAO,MAAM;YAAK;IACvE,CAAC,GACD;IACI,MAAM;AACV"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/actions/logger-action.ts"],"sourcesContent":["'use server';\n\nimport { logAction as logToDb } from '@/lib/logger';\n\nexport async function logActionServer(usuario: string, accion: string, detalle: string) {\n    await logToDb(usuario, accion, detalle);\n}\n"],"names":[],"mappings":";;;;;;;IAIsB,kBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/app/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuthStore, Role } from '@/lib/store/useAuthStore';\nimport { Lock, User, KeyRound, LogIn } from 'lucide-react';\nimport { logActionServer } from '@/actions/logger-action';\n\nexport default function LoginPage() {\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n    const router = useRouter();\n    const login = useAuthStore((state) => state.login);\n\n    // Fetch shift status\n    const [isShiftOpen, setIsShiftOpen] = useState(false);\n    useEffect(() => {\n        import('@/actions/operations').then(mod => {\n            mod.getShiftStatus().then(setIsShiftOpen);\n        });\n    }, []);\n\n    const handleLogin = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError('');\n\n        // Hardcoded credentials for MVP\n        if (username === 'admin' && password === 'admin123') {\n            login({ id: 1, username, role: 'ADMIN' });\n            await logActionServer(username, 'LOGIN', 'Inicio de sesi贸n exitoso (ADMIN)');\n            router.push('/');\n        } else if (username === 'qf' && password === 'qf123') {\n            login({ id: 2, username, role: 'QF' });\n            await logActionServer(username, 'LOGIN', 'Inicio de sesi贸n exitoso (QF)');\n            router.push('/');\n        } else if (username === 'caja' && password === 'caja123') {\n            login({ id: 3, username, role: 'VENDEDOR' });\n            await logActionServer(username, 'LOGIN', 'Inicio de sesi贸n exitoso (VENDEDOR)');\n            router.push('/');\n        } else {\n            setError('Credenciales inv谩lidas');\n            // Optional: Log failed attempts?\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen flex flex-col items-center justify-center bg-gray-100 p-4 relative overflow-hidden\">\n            {/* Public Banner */}\n            <div className={`absolute top-0 left-0 right-0 p-4 text-center text-white font-bold transition-colors ${isShiftOpen ? 'bg-green-600' : 'bg-slate-800'}`}>\n                {isShiftOpen ? ' FARMACIA DE TURNO - ABIERTO 24H' : ' Horario de Atenci贸n: 09:00 - 21:00'}\n            </div>\n\n            <div className=\"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md mt-12\">\n                <div className=\"text-center mb-8\">\n                    <div className=\"bg-blue-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg\">\n                        <Lock className=\"text-white\" size={32} />\n                    </div>\n                    <h1 className=\"text-2xl font-bold text-gray-800\">Farmacias Vallenar</h1>\n                    <p className=\"text-gray-500\">Sistema de Gesti贸n Integral</p>\n                </div>\n\n                <form onSubmit={handleLogin} className=\"space-y-6\">\n                    {error && (\n                        <div className=\"bg-red-50 text-red-600 p-3 rounded-lg text-sm text-center font-medium border border-red-100\">\n                            {error}\n                        </div>\n                    )}\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-sm font-medium text-gray-700 block\">Usuario</label>\n                        <div className=\"relative\">\n                            <User className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                            <input\n                                type=\"text\"\n                                value={username}\n                                onChange={(e) => setUsername(e.target.value)}\n                                className=\"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all\"\n                                placeholder=\"Ingrese su usuario\"\n                                required\n                                autoComplete=\"username\"\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-sm font-medium text-gray-700 block\">Contrase帽a</label>\n                        <div className=\"relative\">\n                            <KeyRound className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                            <input\n                                type=\"password\"\n                                value={password}\n                                onChange={(e) => setPassword(e.target.value)}\n                                className=\"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all\"\n                                placeholder=\"⑩⑩⑩⑩⑩⑩⑩\"\n                                required\n                                autoComplete=\"current-password\"\n                            />\n                        </div>\n                    </div>\n\n                    <button\n                        type=\"submit\"\n                        className=\"w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-blue-200\"\n                    >\n                        <LogIn size={20} />\n                        Iniciar Sesi贸n\n                    </button>\n                </form>\n\n                <div className=\"mt-6 text-center text-xs text-gray-400\">\n                    <p>Credenciales de prueba:</p>\n                    <p>admin / admin123</p>\n                    <p>qf / qf123</p>\n                    <p>caja / caja123</p>\n                </div>\n\n                <div className=\"mt-4 text-center\">\n                    <a href=\"/pantalla\" className=\"text-sm text-blue-500 hover:underline\">\n                        Ver Pantalla P煤blica\n                    </a>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}