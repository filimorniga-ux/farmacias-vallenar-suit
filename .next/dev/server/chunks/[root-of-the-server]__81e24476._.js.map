{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///Users/miguelperdomoserrato/farmacias-vallenar-suit/src/app/api/migrate/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { Pool } from 'pg';\nimport fs from 'fs';\nimport path from 'path';\n\nprocess.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n\nconst pool = new Pool({\n    connectionString: process.env.DATABASE_URL,\n});\n\nexport async function GET() {\n    try {\n        const sqlPath = path.join(process.cwd(), 'src/lib/db/supply_schema.sql');\n        const sql = fs.readFileSync(sqlPath, 'utf8');\n\n        console.log('Ejecutando migración de Abastecimiento via API...');\n        await pool.query(sql);\n        console.log('Migración completada exitosamente.');\n\n        return NextResponse.json({ success: true, message: 'Migration executed successfully' });\n    } catch (error: any) {\n        console.error('Error durante la migración:', error);\n        return NextResponse.json({ success: false, error: error.message }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;;;;AAEA,QAAQ,GAAG,CAAC,4BAA4B,GAAG;AAE3C,MAAM,OAAO,IAAI,4GAAI,CAAC;IAClB,kBAAkB,QAAQ,GAAG,CAAC,YAAY;AAC9C;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;QACzC,MAAM,MAAM,wGAAE,CAAC,YAAY,CAAC,SAAS;QAErC,QAAQ,GAAG,CAAC;QACZ,MAAM,KAAK,KAAK,CAAC;QACjB,QAAQ,GAAG,CAAC;QAEZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,SAAS;QAAkC;IACzF,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACrF;AACJ"}}]
}